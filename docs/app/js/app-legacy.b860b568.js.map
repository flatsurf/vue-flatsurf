{"version":3,"sources":["webpack://vue-flatsurf/./demo/App.vue?efad","webpack://vue-flatsurf/./src/components/PanZoom.vue?4799","webpack://vue-flatsurf/./src/geometry/Point.ts","webpack://vue-flatsurf/./src/geometry/Box.ts","webpack://vue-flatsurf/./src/geometry/Polygon.ts","webpack://vue-flatsurf/./src/geometry/Vector.ts","webpack://vue-flatsurf/./src/geometry/Segment.ts","webpack://vue-flatsurf/./src/geometry/Line.ts","webpack://vue-flatsurf/./src/geometry/CoordinateSystem.ts","webpack://vue-flatsurf/./src/geometry/Viewport.ts","webpack://vue-flatsurf/./src/components/PanZoom.vue","webpack://vue-flatsurf/./src/components/PanZoom.vue?9fa1","webpack://vue-flatsurf/./src/components/PanZoom.vue?7336","webpack://vue-flatsurf/./src/components/Viewer.vue?1f23","webpack://vue-flatsurf/./src/flatsurf/Edge.ts","webpack://vue-flatsurf/./src/components/flatsurf/options/VisualizationOptions.ts","webpack://vue-flatsurf/./src/wait.ts","webpack://vue-flatsurf/./src/components/flatsurf/Flatsurf.vue?6759","webpack://vue-flatsurf/./src/Palette.ts","webpack://vue-flatsurf/./src/export/SVGExporter.ts","webpack://vue-flatsurf/./src/components/flatsurf/FlatTriangulation.vue?ddad","webpack://vue-flatsurf/./src/components/flatsurf/Face.vue?1205","webpack://vue-flatsurf/./src/components/svg/Ngon.vue?4611","webpack://vue-flatsurf/./src/components/svg/Ngon.vue","webpack://vue-flatsurf/./src/components/svg/Ngon.vue?259e","webpack://vue-flatsurf/./src/components/svg/Ngon.vue?ed49","webpack://vue-flatsurf/./src/components/flatsurf/Face.vue","webpack://vue-flatsurf/./src/components/flatsurf/Face.vue?96c7","webpack://vue-flatsurf/./src/components/flatsurf/Face.vue?4708","webpack://vue-flatsurf/./src/components/flatsurf/HalfEdge.vue?782d","webpack://vue-flatsurf/./src/components/svg/Segment.vue?66f2","webpack://vue-flatsurf/./src/components/svg/Segment.vue","webpack://vue-flatsurf/./src/components/svg/Segment.vue?4ff6","webpack://vue-flatsurf/./src/components/svg/Segment.vue?c246","webpack://vue-flatsurf/./src/components/svg/SegmentLabel.vue?0a12","webpack://vue-flatsurf/./src/components/svg/SegmentLabel.vue","webpack://vue-flatsurf/./src/components/svg/SegmentLabel.vue?f6d6","webpack://vue-flatsurf/./src/components/svg/SegmentLabel.vue?aaf3","webpack://vue-flatsurf/./src/components/svg/Arrow.vue?ac97","webpack://vue-flatsurf/./src/components/svg/Arrow.vue","webpack://vue-flatsurf/./src/components/svg/Arrow.vue?d680","webpack://vue-flatsurf/./src/components/svg/Arrow.vue?5da5","webpack://vue-flatsurf/./src/components/svg/SegmentIcon.vue?e3c3","webpack://vue-flatsurf/./src/components/svg/Icon.vue?50d4","webpack://vue-flatsurf/./src/components/svg/Icon.vue","webpack://vue-flatsurf/./src/components/svg/Icon.vue?3820","webpack://vue-flatsurf/./src/components/svg/Icon.vue?42ef","webpack://vue-flatsurf/./src/components/svg/SegmentIcon.vue","webpack://vue-flatsurf/./src/components/svg/SegmentIcon.vue?8907","webpack://vue-flatsurf/./src/components/svg/SegmentIcon.vue?cad8","webpack://vue-flatsurf/./src/components/flatsurf/HalfEdge.vue","webpack://vue-flatsurf/./src/components/flatsurf/HalfEdge.vue?280f","webpack://vue-flatsurf/./src/components/flatsurf/HalfEdge.vue?0f49","webpack://vue-flatsurf/./src/components/flatsurf/Edge.vue?915e","webpack://vue-flatsurf/./src/components/flatsurf/Edge.vue","webpack://vue-flatsurf/./src/components/flatsurf/Edge.vue?92c5","webpack://vue-flatsurf/./src/components/flatsurf/Edge.vue?2f81","webpack://vue-flatsurf/./src/components/flatsurf/FlatTriangulation.vue","webpack://vue-flatsurf/./src/components/flatsurf/FlatTriangulation.vue?8ebb","webpack://vue-flatsurf/./src/components/flatsurf/FlatTriangulation.vue?8c1c","webpack://vue-flatsurf/./src/components/flatsurf/FlowComponent.vue?9e5c","webpack://vue-flatsurf/./src/components/flatsurf/SaddleConnection.vue?c571","webpack://vue-flatsurf/./src/components/flatsurf/SaddleConnection.vue","webpack://vue-flatsurf/./src/components/flatsurf/SaddleConnection.vue?bf58","webpack://vue-flatsurf/./src/components/flatsurf/SaddleConnection.vue?9746","webpack://vue-flatsurf/./src/components/flatsurf/FlowComponent.vue","webpack://vue-flatsurf/./src/components/flatsurf/FlowComponent.vue?3366","webpack://vue-flatsurf/./src/components/flatsurf/FlowComponent.vue?b3cc","webpack://vue-flatsurf/./src/components/flatsurf/Flatsurf.vue","webpack://vue-flatsurf/./src/components/flatsurf/Flatsurf.vue?71cf","webpack://vue-flatsurf/./src/components/flatsurf/Flatsurf.vue?5601","webpack://vue-flatsurf/./src/components/Viewer.vue","webpack://vue-flatsurf/./src/components/Viewer.vue?fc48","webpack://vue-flatsurf/./src/components/Viewer.vue?2de7","webpack://vue-flatsurf/./src/CancellationToken.ts","webpack://vue-flatsurf/./src/Progress.ts","webpack://vue-flatsurf/./demo/Overlay.vue?09eb","webpack://vue-flatsurf/./demo/Overlay.vue","webpack://vue-flatsurf/./demo/Overlay.vue?3854","webpack://vue-flatsurf/./demo/Overlay.vue?d4f7","webpack://vue-flatsurf/./src/components/interactions/GlueInteraction.vue?a393","webpack://vue-flatsurf/./src/layout/LayoutOptions.ts","webpack://vue-flatsurf/./src/components/interactions/GlueInteraction.vue","webpack://vue-flatsurf/./src/components/interactions/GlueInteraction.vue?eb26","webpack://vue-flatsurf/./src/components/interactions/GlueInteraction.vue?0e8a","webpack://vue-flatsurf/./src/components/interactions/PathInteraction.vue?88e5","webpack://vue-flatsurf/./src/components/svg/Point.vue?d955","webpack://vue-flatsurf/./src/components/svg/Point.vue","webpack://vue-flatsurf/./src/components/svg/Point.vue?2e7f","webpack://vue-flatsurf/./src/components/svg/Point.vue?5714","webpack://vue-flatsurf/./src/flatsurf/HalfEdge.ts","webpack://vue-flatsurf/./src/components/interactions/PathInteraction.vue","webpack://vue-flatsurf/./src/components/interactions/PathInteraction.vue?b888","webpack://vue-flatsurf/./src/components/interactions/PathInteraction.vue?4550","webpack://vue-flatsurf/./demo/BottomNavigation.vue?6826","webpack://vue-flatsurf/./demo/BottomNavigation.vue","webpack://vue-flatsurf/./demo/BottomNavigation.vue?dcb8","webpack://vue-flatsurf/./demo/BottomNavigation.vue?3de9","webpack://vue-flatsurf/./demo/App.vue","webpack://vue-flatsurf/./demo/App.vue?2c48","webpack://vue-flatsurf/./demo/App.vue?7ebf","webpack://vue-flatsurf/./demo/Viewer.vue?021b","webpack://vue-flatsurf/./src/components/interactions/TriangulationInteraction.ts","webpack://vue-flatsurf/./src/components/interactions/LabelInteraction.ts","webpack://vue-flatsurf/./src/layout/CellLayout.ts","webpack://vue-flatsurf/./src/layout/Layout.ts","webpack://vue-flatsurf/./src/components/Layouter.ts","webpack://vue-flatsurf/./demo/Viewer.vue","webpack://vue-flatsurf/./demo/Viewer.vue?5218","webpack://vue-flatsurf/./demo/Viewer.vue?8cd9","webpack://vue-flatsurf/./demo/ViewerMenu.vue?74ef","webpack://vue-flatsurf/./demo/ViewerMenu.vue","webpack://vue-flatsurf/./demo/ViewerMenu.vue?2ab3","webpack://vue-flatsurf/./demo/ViewerMenu.vue?7341","webpack://vue-flatsurf/./demo/Editor.vue?7119","webpack://vue-flatsurf/./demo/Editor.vue","webpack://vue-flatsurf/./demo/Editor.vue?3298","webpack://vue-flatsurf/./demo/Editor.vue?7024","webpack://vue-flatsurf/./demo/EditorMenu.vue?1999","webpack://vue-flatsurf/./demo/torus.txt","webpack://vue-flatsurf/./demo/1-1-1.txt","webpack://vue-flatsurf/./demo/1-1-3.txt","webpack://vue-flatsurf/./demo/1-1-3-without-marked-point.txt","webpack://vue-flatsurf/./demo/1-2-2.txt","webpack://vue-flatsurf/./demo/1-2-2-without-marked-point.txt","webpack://vue-flatsurf/./demo/1-2-5.txt","webpack://vue-flatsurf/./demo/2-3-4.txt","webpack://vue-flatsurf/./demo/EditorMenu.vue","webpack://vue-flatsurf/./demo/EditorMenu.vue?cd6b","webpack://vue-flatsurf/./demo/EditorMenu.vue?1482","webpack://vue-flatsurf/./demo/Export.vue?04e5","webpack://vue-flatsurf/./demo/Export.vue","webpack://vue-flatsurf/./demo/Export.vue?7756","webpack://vue-flatsurf/./demo/Export.vue?c861","webpack://vue-flatsurf/./demo/Widget.vue?2af5","webpack://vue-flatsurf/./src/components/Widget.vue?d800","webpack://vue-flatsurf/./src/flatsurf/Permutation.ts","webpack://vue-flatsurf/./src/flatsurf/Vertex.ts","webpack://vue-flatsurf/./src/flatsurf/FlatTriangulation.ts","webpack://vue-flatsurf/./src/flatsurf/SaddleConnection.ts","webpack://vue-flatsurf/./src/flatsurf/FlowConnection.ts","webpack://vue-flatsurf/./src/flatsurf/FlowComponent.ts","webpack://vue-flatsurf/./src/flatsurf/Vertical.ts","webpack://vue-flatsurf/./src/components/Widget.vue","webpack://vue-flatsurf/./src/components/Widget.vue?9a6f","webpack://vue-flatsurf/./src/components/Widget.vue?9405","webpack://vue-flatsurf/./demo/Widget.vue","webpack://vue-flatsurf/./demo/Widget.vue?60eb","webpack://vue-flatsurf/./demo/Widget.vue?095f","webpack://vue-flatsurf/./demo/routes.ts","webpack://vue-flatsurf/./src/flatsurf/Automorphism.ts","webpack://vue-flatsurf/./demo/store.ts","webpack://vue-flatsurf/./demo/main.ts","webpack://vue-flatsurf/webpack/bootstrap","webpack://vue-flatsurf/webpack/runtime/chunk loaded","webpack://vue-flatsurf/webpack/runtime/compat get default export","webpack://vue-flatsurf/webpack/runtime/define property getters","webpack://vue-flatsurf/webpack/runtime/global","webpack://vue-flatsurf/webpack/runtime/hasOwnProperty shorthand","webpack://vue-flatsurf/webpack/runtime/make namespace object","webpack://vue-flatsurf/webpack/runtime/jsonp chunk loading","webpack://vue-flatsurf/webpack/startup"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","overlay","progress","staticRenderFns","ref","class","pan","on","$event","viewport","_t","_e","Point","parent","x","y","value","equalTo","rhs","epsilon","Math","abs","embed","toString","shape","translate","vector","Box","xy0","xy1","clone","console","assert","Array","min","max","shapes","length","Error","boxes","map","box","reduce","a","b","merge","contain","aspectRatio","xmin","height","width","ymin","xmax","ymax","other","xy","toPoints","point","low","high","Polygon","face","addFace","convexHull","vertices","points","coordinateSystem","p","some","hull","q","last","next","leftTo","push","error","pop","polygon","minArea","minAreaRect","edge","edges","segment","direction","tangentInStart","theta","angleTo","rotation","cos","sin","aligned","transform","area","inverse","vertex","faces","start","lfaces","rfaces","lface","rface","rot","keys","every","i","rindex","findIndex","splice","positive","reverse","Vector","yaml","rotate90CW","rotate90CCW","normalize","multiply","scalar","ccw","invert","add","v","Segment","end","CoordinateSystem","undefined","middle","tangentInEnd","at","relative","delta","intersect","intersections","intersects","relativize","e","toPoint","dot","touch","Line","pt","norm","intersection","A","a00","a01","a02","a10","a11","a12","a20","a21","a22","c","tx","d","ty","adj","det","inv","affine","embedInto","into","embedding","token","JSON","stringify","existing","lookup","warn","insert","update","reset","from","registered","get","codomain","invalidate","delete","size","discovered","discover","origin","Map","has","set","Object","freeze","dependents","domain","reachable","Set","path","search","definition","dependency","follow","to","Viewport","ideal","idealCoordinateSystem","viewportCoordinateSystem","dimensions","visible","focused","resize","focus","zoom","factor","center","centerBefore","centerAfter","destroy","PanZoom","observer","ResizeObserver","unpanzoom","container","redimension","refocus","changed","$emit","onCoordinateSystemChange","cleanup","initialize","mounted","$el","panzoom","observe","beforeDestroy","unobserve","clientWidth","window","innerWidth","clientHeight","innerHeight","dz","exp","dx","dy","required","type","default","component","scopedSlots","_u","key","fn","layout","triangulation","visualizationOptions","visibleFlowComponents","model","callback","$$v","expression","Edge","halfEdge","negative","VisualizationOptions","ensure","halfEdges","indicator","selected","label","icon","indicate","select","show","async","wait","vm","Promise","resolve","unwatches","castArray","$watch","unwatch","_g","$listeners","svgCoordinateSystem","_l","palette","color","Palette","constructor","colors","space","seed","colorSpace","SVGExporter","svg","cloneNode","styles","getElementsByTagName","computedStyle","tagName","document","createElement","appendChild","unshift","setAttribute","element","style","getComputedStyle","computed","getPropertyValue","index","children","dropClasses","child","removeAttribute","dropPrefixedStyles","fromEntries","entries","filter","_value","startsWith","dropInvisible","trash","addToTrash","forEach","_style","values","parentNode","removeChild","dropRedundantStyles","dropCustomAttributes","attributes","attribute","name","includes","dropNonStandardStyles","standard","usePresentationAttributes","makePresentation","hasAttribute","simplifyColors","simplify","okey","getAttribute","opacity","String","Number","dropTrivialStyles","dropNonInkscapeStyles","dropInteractiveStyles","inlineStyles","join","svgo","outerHTML","data","sourceIndicators","options","Ngon","Face","components","_v","_s","indicatorPosition","source","coords","embedded","transformation","HalfEdgeLabel","midpoint","normal","position","x1","y1","x2","y2","atEnd","Arrow","endWithoutHead","PI","SegmentIcon","Icon","HalfEdgeComponent","sourceIndicator","Boolean","SegmentComponent","SegmentLabel","EdgeComponent","FlatTriangulation","cycles","he","primary","s","t","w","angle","degree","connection","SaddleConnection","segments","crossings","target","crossing","shift","inner","line","crossingEdge","crossingLine","alongHalfEdge","FlowComponent","surface","ats","touches","perimeter","cylinder","vertical","boundary","resetCaches","ensureCaches","floor","patch","isHalfEdge","B","C","scenario","atouches","btouches","patchHalfEdge","image","preimage","triangles","inside","patches","glue","ngon","triangle","step","n","nn","immediate","SaddleConnectionComponent","Flatsurf","flowComponents","$nextTick","exporter","FlatTriangulationComponent","FlowComponentComponent","Viewer","onCoordinateSystemChanged","onLayoutChanged","$refs","flatsurf","OperationAborted","CancellationToken","cancellationRequested","reject","aborted","setTimeout","cancelled","cancel","abort","Progress","steps","task","cancellation","Overlay","onCancellation","stats","VBtn","hover","unhover","LayoutOptions","automorphisms","glued","orbit","automorphism","halfEdgeMap","GlueInteraction","relayout","events","kind","ev","id","random","previousStart","previousFocus","reglue","onEvent","mdi","clamp","parentElement","clientX","getBoundingClientRect","left","clientY","top","when","Function","indexOf","_k","keyCode","edit","fromPathPoint","append","cross","nextSegment","radius","PathInteraction","editable","item","toPathPoint","previous","toSegment","sector","noop","present","controlPoints","PointComponent","$route","$router","query","BottomNavigation","$store","state","VBadge","App","VApp","layoutChanged","action","TriangulationInteraction","outer","resetVisiblity","nextLabel","chars","split","charCodeAt","code","fromCharCode","TriangulationVisibilityInteraction","numeric","alpha","CellLayout","cell","boundingRectArea","boundingRect","before","glues","otherPolygon","touchConsistent","boundaries","side","pending","cells","cache","_progress","scores","find","score","best","minBy","ca","cb","dc","x00","x01","x02","x10","x11","x12","x20","x21","x22","delaunay","ungluedArea","gluedArea","isArray","hasOwnProperty","packed","cell_","halfEdge_","packable","segment_","screen","Layout","recompute","_","pack","assign","flat","log","bbox","runSilently","Layouter","effectiveLayout","run","$scopedSlots","pendingRelayout","layoutOptions","onSurfaceChanged","commit","ViewerComponent","LabelInteraction","showActions","actions","proxy","goto","showParts","parts","part","ViewerMenu","replace","raw","Editor","dispatch","VCard","predefined","domProps","EditorMenu","VList","l","tab","base64","staticStyle","Export","ready","btoa","unescape","encodeURIComponent","onTriangulationChange","showInnerEdges","showOuterHalfEdges","showNumericLabels","showOuterLabels","showFlowComponents","applyVertical","queries","info","parameters","performQuery","parsedTriangulation","parsedFlowComponents","parsedVertical","Permutation","mapping","cycle","fromMapping","entry","xor","Vertex","fromCycles","vectors","parse","vertexes","fromPermutation","sum","FlowConnection","Vertical","rotated","rotate","Widget","viewer","layouter","glueInteraction","force","pathInteraction","text","schema","onQueryChanged","widget","result","message","WidgetComponent","viewerProps","route","exportProps","routes","redirect","menu","props","Automorphism","store","payload","parsed","mutations","h","vuetify","router","created","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","r","getter","__esModule","o","defineProperty","enumerable","g","globalThis","obj","prop","prototype","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"mappings":"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","file":"js/app-legacy.b860b568.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('v-main',[_c('v-container',{staticClass:\"container\",attrs:{\"fluid\":\"\"}},[_c('router-view')],1),_c('overlay',{attrs:{\"cancellation\":_vm.overlay,\"progress\":_vm.progress}})],1),_c('router-view',{attrs:{\"name\":\"menu\"}}),_c('bottom-navigation')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",class:{ pan: _vm.pan },on:{\"mousedown\":function($event){_vm.pan = true},\"mouseup\":function($event){_vm.pan = false}}},[(_vm.viewport != null)?_vm._t(\"default\",null,{\"viewport\":_vm.viewport}):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* ******************************************************************************\n * Copyright (c) 2020 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Flatten from \"@flatten-js/core\";\n\nimport CoordinateSystem, { Coordinate } from \"./CoordinateSystem\";\nimport Vector from './Vector';\nimport Polygon from './Polygon';\nimport Segment from './Segment';\n\nexport default class Point {\n  public constructor(parent: CoordinateSystem, x: Coordinate, y: Coordinate);\n  public constructor(parent: CoordinateSystem, p: Flatten.Point);\n  public constructor(parent: CoordinateSystem, x: Coordinate | Flatten.Point, y?: Coordinate) {\n    this.parent = parent;\n    if (typeof(x) === \"number\")\n      this.value = new Flatten.Point(x, y);\n    else\n      this.value = x;\n  }\n  \n  public get x() { return this.value.x; }\n  public get y() { return this.value.y; }\n  public get xy() : [Coordinate, Coordinate] { return [this.x, this.y]; }\n\n  public equalTo(rhs: Point, epsilon: number = 0): boolean {\n    if (this.parent === rhs.parent)\n      return Math.abs(this.x - rhs.x) <= epsilon && Math.abs(this.y - rhs.y) <= epsilon;\n    return this.parent.embed(rhs).equalTo(this);\n  }\n\n  public toString(): string {\n    return `(${this.x}, ${this.y})`;\n  }\n\n  public on(shape: Polygon): boolean;\n  public on(shape: Segment): boolean;\n  public on(shape: Polygon | Segment): boolean {\n    return shape.parent.embed(this).value.on(shape.value);\n  }\n\n  public translate(vector: Vector): Point {\n    return new Point(this.parent, this.value.translate(this.parent.embed(vector).value));\n  }\n\n  public readonly parent: CoordinateSystem;\n  public readonly value: Flatten.Point;\n}\n","/* ******************************************************************************\n * Copyright (c) 2020 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Flatten from \"@flatten-js/core\";\n\nimport CoordinateSystem, { Coordinate } from \"./CoordinateSystem\";\nimport Point from \"./Point\";\nimport Segment from './Segment';\nimport Vector from \"./Vector\";\n\nexport default class Box {\n  public constructor(parent: CoordinateSystem, box: Flatten.Box);\n  public constructor(parent: CoordinateSystem, xy0: [Coordinate, Coordinate], xy1: [Coordinate, Coordinate]);\n  public constructor(parent: CoordinateSystem, xy0: [Coordinate, Coordinate] | Flatten.Box, xy1?: [Coordinate, Coordinate]) {\n    this.parent = parent;\n\n    if (xy0 instanceof Flatten.Box) {\n      this.value = xy0.clone();\n    } else {\n      console.assert(xy1 instanceof Array);\n      this.value = new Flatten.Box(Math.min(xy0[0], xy1![0]), Math.min(xy0[1], xy1![1]), Math.max(xy0[0], xy1![0]), Math.max(xy0[1], xy1![1]));\n    }\n  }\n\n  public static bbox(shapes: Array<Point|Segment>): Box {\n    if (shapes.length === 0)\n      throw Error(\"cannot create bounding box of nothing\");\n\n    const boxes = shapes.map((shape) => {\n      if (shape instanceof Point)\n        return new Box(shape.parent, [shape.value.x, shape.value.y], [shape.value.x, shape.value.y]);\n      else\n        return new Box(shape.parent, shape.value.box);\n    });\n    return boxes.reduce((a: Box, b: Box) => a.merge(b));\n  }\n\n  // Return an enlargened version of this box that has the prescribed aspect\n  // ratio (leaving one of its dimensions untouched and centering it in the\n  // other dimension.)\n  public contain(aspectRatio: number) {\n    if (this.aspectRatio < aspectRatio)\n      return new Box(this.parent, [this.value.xmin - (this.height * aspectRatio - this.width) / 2, this.value.ymin], [this.value.xmax + (this.height * aspectRatio - this.width) / 2, this.value.ymax]);\n    else\n      return new Box(this.parent, [this.value.xmin, this.value.ymin - (this.width / aspectRatio - this.height) / 2], [this.value.xmax, this.value.ymax + (this.width / aspectRatio - this.height) / 2]);\n  }\n\n  public merge(other: Box): Box {\n    return new Box(this.parent, this.value.merge(this.parent.embed(other).value.box));\n  }\n\n  public translate(xy: Vector) {\n    xy = this.parent.embed(xy);\n    const x = xy.value.x;\n    const y = xy.value.y;\n    return new Box(this.parent, [this.value.xmin + x, this.value.ymin + y], [this.value.xmax + x, this.value.ymax + y]);\n  }\n\n  public get low() {\n    return new Point(this.parent, this.value.xmin, this.value.ymin);\n  }\n\n  public get high() {\n    return new Point(this.parent, this.value.xmax, this.value.ymax);\n  }\n\n  public get aspectRatio() {\n    return this.width / this.height;\n  }\n\n  public get width() {\n    return this.value.xmax - this.value.xmin;\n  }\n\n  public get center() {\n    return new Point(this.parent, (this.value.xmin + this.value.xmax) / 2, (this.value.ymin + this.value.ymax) / 2);\n  }\n\n  public get height() {\n    return this.value.ymax - this.value.ymin;\n  }\n\n  public toPoints() {\n    return this.value.toPoints().map((point) => new Point(this.parent, point));\n  }\n\n  public equalTo(rhs: Box, epsilon: number = 0): boolean {\n    if (this.parent === rhs.parent)\n      return this.low.equalTo(rhs.low, epsilon) && this.high.equalTo(rhs.high, epsilon);\n    return this.parent.embed(rhs).box.equalTo(this);\n  }\n\n  public readonly parent: CoordinateSystem;\n  public readonly value: Flatten.Box;\n}\n","/* ******************************************************************************\n * Copyright (c) 2020-2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Flatten from \"@flatten-js/core\";\n\nimport findIndex from \"lodash-es/findIndex\";\n\nimport CoordinateSystem, { inverse } from \"./CoordinateSystem\";\nimport Point from \"./Point\";\nimport Box from \"./Box\";\nimport Vector from \"./Vector\";\n\nexport default class Polygon {\n  public constructor(parent: CoordinateSystem, value: Point[][]);\n  public constructor(parent: CoordinateSystem, value: Flatten.Polygon);\n  public constructor(parent: CoordinateSystem, value: Flatten.Polygon | Point[][]) {\n    this.parent = parent;\n    if (value instanceof Flatten.Polygon) {\n      this.value = value;\n    } else if (value instanceof Array) {\n      this.value = new Flatten.Polygon();\n      for (const face of value) {\n        this.value.addFace(face.map((point) => parent.embed(point).value));\n      }\n    } else {\n      throw Error(\"Cannot create polygon from this data.\");\n    }\n  }\n\n  public translate(xy: Vector): Polygon {\n    return new Polygon(this.parent, this.value.translate(this.parent.embed(xy).value));\n  }\n\n  public get convexHull(): Polygon {\n    return Polygon.convexHull(this.vertices);\n  }\n\n  // Compute the convex hull of the points (using the slow Jarvis march\n  // algorithm.)\n  public static convexHull(points: Point[]): Polygon {\n    console.assert(points.length !== 0);\n\n    const coordinateSystem = points[0].parent;\n\n    const vertices = points.map((p) => coordinateSystem.embed(p).value);\n\n    console.assert(vertices.some((p) => !p.equalTo(vertices[0])));\n\n    const hull = [vertices.reduce((p, q) => {\n      if (p.x < q.x)\n        return p;\n      if (p.x > q.x)\n        return q\n      if (p.y < q.y)\n        return p;\n      return q;\n    })];\n\n    do {\n      const last = hull[hull.length - 1];\n      let next = vertices[0].equalTo(last) ? vertices[1] : vertices[0];\n      for (let p of vertices) {\n        if (p.leftTo(new Flatten.Line(last, next)))\n          next = p;\n      }\n      hull.push(next);\n      // TODO: This is numerically too unstable (and hangs sometimes.) See https://github.com/flatsurf/vue-flatsurf/issues/40.\n      if (hull.length > vertices.length + 1) {\n        console.error(\"Convex Hull incorrect\");\n        break;\n      }\n    } while(!hull[hull.length - 1].equalTo(hull[0]));\n\n    hull.pop();\n\n    const polygon = new Flatten.Polygon();\n    polygon.addFace(hull);\n    return new Polygon(coordinateSystem, polygon);\n  }\n\n  // Return a bounding rectangle of minimal area. (The rectangle might not be\n  // axis-aligned.)\n  public get boundingRect(): Polygon {\n    const hull = this.convexHull;\n\n    let minArea = 1./0.;\n    let minAreaRect = null;\n\n    // Algorithm: The minimal bounding rect of a convex polygon must be aligned to one of its sides.\n    for (const edge of hull.value.edges) {\n      // Rotate such that the edge is horizontal.\n      const segment: Flatten.Segment = edge.shape;\n      const direction = segment.tangentInStart();\n      const theta = new Flatten.Vector(1, 0).angleTo(direction);\n      const rotation = new Flatten.Matrix(\n        Math.cos(-theta), -Math.sin(-theta),\n        Math.sin(-theta), Math.cos(-theta),\n      );\n      const aligned = hull.value.transform(rotation);\n\n      // Compute the area of this bounding box.\n      const area = aligned.area();\n\n      if (area < minArea) {\n        minArea = area;\n\n        // Rotate the box back.\n        minAreaRect = new Polygon(this.parent, new Flatten.Polygon(aligned.box.toPoints()).transform(inverse(rotation)));\n      }\n    }\n\n    return minAreaRect!;\n  }\n\n  // Return a bounding box of this polygon in its parent's coordinate system.\n  public get box(): Box {\n    return new Box(this.parent, this.value.box);\n  }\n\n  public get vertices(): Point[] {\n    return this.value.vertices.map((vertex) => new Point(this.parent, vertex));\n  }\n\n  public get faces(): Point[][] {\n    const faces = [...this.value.faces] as Flatten.Face[];\n    return faces.map((face) => face.edges.map((edge) => new Point(this.parent, edge.start)));\n  }\n\n  public equalTo(rhs: Box, epsilon?: number): boolean;\n  public equalTo(rhs: Polygon, epsilon?: number): boolean;\n  public equalTo(rhs: Box | Polygon, epsilon: number = 0): boolean {\n    if (rhs instanceof Polygon) {\n      const lfaces = this.faces;\n      const rfaces = rhs.faces;\n\n      if (lfaces.length !== rfaces.length)\n        return false;\n\n      const equalTo = (lface: Point[], rface: Point[]) => {\n        if (lface.length !== rface.length)\n          return false;\n        for (let rot = 0; rot < lface.length; rot++) {\n          if ([...lface.keys()].every((i) => lface[i].equalTo(rface[(i + rot) % rface.length], epsilon)))\n            return true;\n        }\n        return false;\n      };\n\n      for (const lface of lfaces) {\n        const rindex = findIndex(rfaces, (rface) => equalTo(lface, rface));\n        if (rindex === -1)\n          return false;\n        rfaces.splice(rindex, 1);\n      }\n\n      return true;\n    } else {\n      const points = rhs.toPoints();\n      if (this.parent.positive === rhs.parent.positive)\n        points.reverse();\n      return this.equalTo(new Polygon(this.parent, [points]), epsilon);\n    }\n  }\n\n  public area(): number {\n    return this.value.area();\n  }\n  \n  public readonly parent: CoordinateSystem;\n  public readonly value: Flatten.Polygon;\n}\n","/* ******************************************************************************\n * Copyright (c) 2020 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Flatten from \"@flatten-js/core\";\n\nimport CoordinateSystem, { Coordinate } from \"./CoordinateSystem\";\nimport Point from './Point';\n\nexport interface VectorSchema {\n  x: number,\n  y: number,\n};\n\nexport default class Vector {\n  public constructor(parent: CoordinateSystem, x: Coordinate, y: Coordinate);\n  public constructor(parent: CoordinateSystem, p: Flatten.Vector);\n  public constructor(parent: CoordinateSystem, a: Point, b: Point);\n  public constructor(parent: CoordinateSystem, x: Coordinate | Flatten.Vector | Point, y?: Coordinate | Point) {\n    this.parent = parent;\n    if (typeof(x) === \"number\" && typeof(y) === \"number\") {\n      this.value = new Flatten.Vector(x, y);\n    } else if (x instanceof Flatten.Vector && y == null) {\n      this.value = x;\n    } else if (x instanceof Point && y instanceof Point) {\n      const a = parent.embed(x);\n      const b = parent.embed(y);\n      this.value = new Flatten.Vector(a.value, b.value);\n    } else\n      throw Error(`Cannot initialize Vector from this data: parent=${parent}, x=${x}, y=${y}`);\n  }\n\n  public static parse(yaml: VectorSchema, coordinateSystem: CoordinateSystem): Vector {\n    return new Vector(coordinateSystem, yaml.x, yaml.y);\n  }\n  \n  public get x() { return this.value.x; }\n  public get y() { return this.value.y; }\n  public get xy() : [Coordinate, Coordinate] { return [this.x, this.y]; }\n\n  public rotate90CW() {\n    return new Vector(this.parent, this.parent.positive ? this.value.rotate90CW(): this.value.rotate90CCW());\n  }\n\n  public rotate90CCW() {\n    return new Vector(this.parent, this.parent.positive ? this.value.rotate90CCW(): this.value.rotate90CW());\n  }\n\n  public normalize() {\n    return new Vector(this.parent, this.value.normalize());\n  }\n\n  public multiply(scalar: number) {\n    return new Vector(this.parent, this.value.multiply(scalar));\n  }\n\n  public angleTo(ccw: Vector) {\n    return this.parent.positive ? this.parent.embed(ccw).value.angleTo(this.value) : this.value.angleTo(this.parent.embed(ccw).value);\n  }\n\n  public invert() {\n    return new Vector(this.parent, this.value.invert());\n  }\n\n  public add(v: Vector) {\n    return new Vector(this.parent, this.value.add(this.parent.embed(v).value));\n  }\n\n  public equalTo(rhs: Vector, epsilon: number = 0): boolean {\n    if (this.parent === rhs.parent)\n      return Math.abs(this.x - rhs.x) <= epsilon && Math.abs(this.y - rhs.y) <= epsilon;\n    return this.parent.embed(rhs).equalTo(this);\n  }\n\n  public readonly parent: CoordinateSystem;\n  public readonly value: Flatten.Vector;\n}\n","/* ******************************************************************************\n * Copyright (c) 2020 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Flatten from \"@flatten-js/core\";\n\nimport CoordinateSystem from \"./CoordinateSystem\";\nimport Point from \"./Point\";\nimport Polygon from './Polygon';\nimport Vector from './Vector';\n\nexport default class Segment {\n  public constructor(start: Point, end: Point);\n  public constructor(parent: CoordinateSystem, value: Flatten.Segment);\n  public constructor(parent: CoordinateSystem, start: Flatten.Point, end: Flatten.Point);\n  public constructor(parent: CoordinateSystem | Point, value: Point | Flatten.Point | Flatten.Segment, end?: Flatten.Point){\n    if (!(parent instanceof CoordinateSystem)) {\n      console.assert(value instanceof Point, value);\n      ({parent, value, end} = {\n        parent: parent.parent,\n        value: parent.value,\n        end: parent.parent.embed(value as Point).value,\n      });\n    }\n\n    this.parent = parent;\n    if (end !== undefined) {\n      const start = value as Flatten.Point;\n      this.value = new Flatten.Segment(start, end);\n    } else {\n      this.value = value as Flatten.Segment;\n    }\n  }\n  \n  public get start() { return new Point(this.parent, this.value.start); }\n  public get middle() { return new Point(this.parent, this.value.middle()); }\n  public get end() { return new Point(this.parent, this.value.end); }\n  public get tangentInStart() { return new Vector(this.parent, this.value.tangentInStart()); }\n  public get tangentInEnd() { return new Vector(this.parent, this.value.tangentInEnd()); }\n\n  public at(relative: number) {\n    return this.start.translate(new Vector(this.parent, this.start, this.end).multiply(relative));\n  }\n\n  public translate(delta: Vector): Segment {\n    delta = this.parent.embed(delta);\n    return new Segment(this.parent, this.value.translate(delta.value));\n  }\n\n  // Return the points of intersection between this segment and the segments\n  // forming the boundary of the polygon. If this segment overlaps with one of\n  // the boundary segments, the end points of the overlap are included. If it\n  // touches, the point of touching is included.\n  public intersect(shape: Polygon): Point[] {\n    const intersections = shape.parent.embed(this).value.intersect(shape.value).map(value => new Point(shape.parent, value));\n    if(this.start.on(shape))\n      // TODO: Bug in flatten. See https://github.com/flatsurf/vue-flatsurf/issues/41.\n      intersections.push(this.start);\n    if (this.end.on(shape))\n      // TODO: Bug in flatten. See https://github.com/flatsurf/vue-flatsurf/issues/41.\n      intersections.push(this.end);\n    return intersections;\n  }\n\n  // Return whether this segment and the (filled) shape have at least one point\n  // in common.\n  public intersects(shape: Polygon | Segment): boolean {\n    if (shape instanceof Polygon)\n      return Flatten.Relations.intersect(shape.parent.embed(this).value, shape.value);\n    else\n      return this.intersects(new Polygon(shape.parent, [[shape.start, shape.end]]));\n  }\n\n  // Return the relative coordinate of the point projected onto the segment,\n  // i.e., return a value in [0, 1] if the point projects onto the segment.\n  public relativize(point: Point): number {\n    const e = this.value.tangentInStart();\n    const toPoint = new Vector(this.parent, this.start, point).value;\n    return e.dot(toPoint) / this.value.length;\n  }\n\n  public touch(shape: Polygon): boolean {\n    return Flatten.Relations.touch(shape.parent.embed(this).value, shape.value);\n  }\n\n  public toString(): string {\n    return `((${this.value.start.x}, ${this.value.start.y}), (${this.value.end.x}, ${this.value.end.y}))`;\n  }\n\n  public get length() {\n    return this.value.length;\n  }\n\n  public equalTo(rhs: Segment, epsilon: number = 0): boolean {\n    return this.start.equalTo(rhs.start, epsilon) && this.end.equalTo(rhs.end, epsilon);\n  }\n\n  public reverse(): Segment {\n    return new Segment(this.parent, this.value.reverse());\n  }\n\n  public readonly parent: CoordinateSystem;\n  public readonly value: Flatten.Segment;\n}\n","/* ******************************************************************************\n * Copyright (c) 2020 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Flatten from \"@flatten-js/core\";\n\nimport Point from \"./Point\";\nimport Vector from \"./Vector\";\nimport CoordinateSystem from \"./CoordinateSystem\";\n\nexport default class Line {\n  constructor(pt: Point, norm: Vector);\n  constructor(a: Point, b: Point);\n  public constructor(pt: Point, norm: Point | Vector) {\n    this.parent = pt.parent;\n    if (norm instanceof Point)\n      this.value = new Flatten.Line(pt.value, this.parent.embed(norm).value);\n    else\n      this.value = new Flatten.Line(pt.value, this.parent.embed(norm).value);\n  }\n\n  public intersect(other: Line): Point | null {\n    const intersections = other.parent.embed(this).value.intersect(other.value).map((intersection) => new Point(other.parent, intersection));\n    if (intersections.length === 0) return null;\n    if (intersections.length !== 1) throw Error(\"not implemented: Line.intersection()\");\n    return intersections[0];\n  }\n\n  public get pt() { return new Point(this.parent, this.value.pt); }\n  public get norm() { return new Vector(this.parent, this.value.norm); }\n\n  public readonly parent: CoordinateSystem;\n  public readonly value: Flatten.Line;\n}\n","/* ******************************************************************************\n * Copyright (c) 2020-2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Vue from \"vue\";\n\nimport Flatten from \"@flatten-js/core\";\n\nimport Point from \"./Point\";\nimport Polygon from \"./Polygon\";\nimport Box from \"./Box\";\nimport Vector from \"./Vector\";\nimport Segment from \"./Segment\";\nimport Line from \"./Line\";\n\nexport type Coordinate = number;\n\n// A registered or discovered embedding between two coordinate systems.\nexport type Embedding = {\n  // The embedding as an invertible matrix; null if the embedding is not valid\n  // anymore.\n  embedding: Readonly<Flatten.Matrix> | null,\n}\n\n// Internal structure to keep track of explicitl registered embeddings between\n// coordinate systems.\ntype RegisteredEmbedding = {\n  embedding: Embedding;\n  dependents: Array<{\n    domain: CoordinateSystem,\n    codomain: CoordinateSystem,\n  }>;\n}\n\n// Return the inverse of the invertible matrix A.\n// Naturally, this is not very stable numerically. Probably we shuold solve\n// linear equations instead of holding on to an explicit inverse.\nexport function inverse(A: Flatten.Matrix) {\n  const [a00, a01, a02, a10, a11, a12, a20, a21, a22] = [A.a, A.c, A.tx, A.b, A.d, A.ty, 0, 0, 1];\n  const adj = [a11*a22 - a21*a12, a10*a22 - a20*a12, a10*a21 - a20*a11, a01*a22 - a21*a02, a00*a22 - a20*a02, a00*a21 - a20*a01, a01*a12 - a11*a02, a00*a12 - a10*a02, a00*a11 - a10*a01];\n  const det = a00*adj[0] - a01*adj[1] + a02*adj[2];\n  const inv = [adj[0], -adj[3], adj[6], -adj[1], adj[4], -adj[7], adj[2], -adj[5], adj[8]].map(a => a / det);\n  const affine = inv.map(a => a / inv[8]);\n  console.assert(affine.every((a) => a != null), `Matrix ${A} must be invertible.`);\n  return new Flatten.Matrix(affine[0], affine[3], affine[1], affine[4], affine[2], affine[5]);\n}\n\nexport default class CoordinateSystem {\n  public constructor(positive: boolean) {\n    this.positive = positive;\n  }\n\n  public readonly positive: boolean;\n\n  // Register an embedding from this coordinate system into `into`.\n  // The returned embedding is a token that can be used to `reset()` the\n  // embedding later or `embedInto()` differently.\n  public embedInto(into: CoordinateSystem, token?: Embedding): Embedding;\n  public embedInto(into: CoordinateSystem, embedding: Flatten.Matrix, token?: Embedding): Embedding;\n  public embedInto(into: CoordinateSystem, embedding?: Embedding | Flatten.Matrix, token?: Embedding): Embedding {\n    if (embedding !== undefined) {\n      if (\"embedding\" in embedding) {\n        console.assert(token === undefined);\n        token = embedding;\n        embedding = undefined;\n      }\n    }\n\n    if (embedding === undefined) {\n      console.assert(token === undefined);\n      embedding = new Flatten.Matrix();\n      if (this.positive !== into.positive)\n        embedding = new Flatten.Matrix(1, 0, 0, -1);\n      return this.embedInto(into, embedding, token);\n    }\n\n    console.assert(embedding instanceof Flatten.Matrix);\n    if (embedding.tx == null || embedding.ty == null || !(embedding.a * embedding.d - embedding.b * embedding.c))\n      throw Error(`Embedding matrix is not invertible: ${JSON.stringify(embedding)}`);\n\n    let existing = this.lookup(into);\n\n    if (existing == null) {\n      if (token !== undefined)\n        console.warn(\"No token expected when resetting embedding of coordinate systems. No embedding between these coordinate systems could be found.\");\n    } else {\n      if (token === undefined)\n        console.warn(\"Expected a token when resetting embedding of coordinate systems but no token found.\");\n      else if (token !== existing.embedding)\n        console.warn(\"Expected correct token when resetting embedding of coordinate systems but the token was not the one last returned when the embedding was established.\");\n    }\n\n    if (existing == null) {\n      this.insert(into, embedding);\n      existing = this.lookup(into)!;\n    }\n\n    console.assert(existing != null);\n    console.assert(existing.embedding.embedding != null, \"Invalidated embedding found in registered embeddings.\");\n\n    CoordinateSystem.update(existing!, embedding as Flatten.Matrix);\n\n    return existing.embedding;\n  }\n\n  public reset(token: Embedding) {\n    const from = CoordinateSystem.registered.get(this);\n    if (from === undefined)\n      throw Error(\"Cannot reset embedding of this coordinate systems as none is registered anymore.\");\n    for (const codomain of from.keys()) {\n      const registered = from.get(codomain)!;\n      if (registered.embedding == token) {\n        CoordinateSystem.invalidate(registered);\n        from.delete(codomain);\n        if (from.size === 0)\n          CoordinateSystem.registered.delete(this);\n        return;\n      }\n    }\n\n    throw Error(\"Cannot reset embedding. No embedding registered for this token.\");\n  }\n\n  public embed(point: Point): Point;\n  public embed(vector: Vector): Vector;\n  public embed(segment: Segment): Segment;\n  public embed(line: Line): Line;\n  public embed(polygon: Box | Polygon): Polygon;\n  public embed(value: Box | Point | Vector | Segment | Line | Polygon) : Point | Vector | Segment | Line | Polygon {\n    const discovered = this === value.parent ? new Flatten.Matrix() : value.parent.discover(this);\n\n    console.assert(discovered.tx != null && discovered.ty != null && discovered.a * discovered.d - discovered.b * discovered.c, \"Discovered an embedding that is not invertible.\", discovered);\n\n    if (value instanceof Box) {\n      const polygon = new Flatten.Polygon();\n      polygon.addFace(value.toPoints().map((point) => this.embed(point).value));\n      return new Polygon(this, polygon);\n    } else if (value instanceof Point) {\n      return new Point(this, value.value.transform(discovered));\n    } else if (value instanceof Vector) {\n      const point = this.embed(new Point(value.parent, value.x, value.y));\n      const origin = this.embed(new Point(value.parent, 0, 0));\n      return new Vector(this, point.x - origin.x, point.y - origin.y);\n    } else if (value instanceof Segment) {\n      return new Segment(this, this.embed(value.start).value, this.embed(value.end).value);\n    } else if (value instanceof Line) {\n      return new Line(this.embed(value.pt), this.embed(value.norm));\n    } else if (value instanceof Polygon) {\n      return new Polygon(this, new Flatten.Polygon(([...value.value.faces] as Flatten.Face[]).map((face) => (face.edges as Flatten.Edge[]).map((edge) => this.embed(new Point(value.parent, edge.start)).value))));\n    }\n\n    throw Error(`cannot embed this type of object into coordinate system yet`);\n  }\n\n  // The registered embeddings between coordinate systems.\n  // Maps domain  codomain  embedding.\n  private static registered: Map<CoordinateSystem, Map<CoordinateSystem, RegisteredEmbedding>> = new Map();\n\n  // The discovered embeddings between coordinate systems.\n  // Maps domain  codomain  embedding.\n  private static discovered: Map<CoordinateSystem, Map<CoordinateSystem, Embedding>> = new Map();\n\n  private lookup(into: CoordinateSystem): RegisteredEmbedding | null {\n    return CoordinateSystem.registered.get(this)?.get(into) || null;\n  }\n\n  private insert(into: CoordinateSystem, embedding: Flatten.Matrix) {\n    if (!CoordinateSystem.registered.has(this))\n      CoordinateSystem.registered.set(this, new Map());\n    console.assert(!CoordinateSystem.registered.get(this)!.has(into));\n    CoordinateSystem.registered.get(this)!.set(into, {\n      embedding: Vue.observable({\n        embedding: Object.freeze(embedding),\n      }),\n      dependents: [],\n    });\n  }\n\n  private static update(registered: RegisteredEmbedding, embedding: Flatten.Matrix) {\n    if (registered.embedding.embedding === null)\n      throw Error(\"Cannot update existing embedding if it is already invalidated.\");\n\n    if (registered.embedding.embedding.equalTo(embedding))\n      return;\n\n    CoordinateSystem.invalidate(registered);\n\n    registered.embedding.embedding = Object.freeze(embedding);\n  }\n\n  private static invalidate(registered: RegisteredEmbedding) {\n    if (registered.embedding.embedding === null)\n      throw Error(\"Cannot invalidate embedding if it is already invalidated.\");\n\n    registered.embedding.embedding = null;\n\n    for (const {domain, codomain} of registered.dependents) {\n      if (!CoordinateSystem.discovered.has(domain))\n        continue;\n      if (!CoordinateSystem.discovered.get(domain)!.has(codomain))\n        continue;\n      \n      const discovered = CoordinateSystem.discovered.get(domain)!.get(codomain)!;\n      discovered.embedding = null;\n\n      CoordinateSystem.discovered.get(domain)!.delete(codomain);\n      if (CoordinateSystem.discovered.get(domain)!.size === 0)\n        CoordinateSystem.discovered.delete(domain);\n    }\n\n    registered.dependents = [];\n  }\n\n  // The returned embedding is Vue.observable() so that users will notice when\n  // its embedding is set to null or otherwise modified.\n  private discover(into: CoordinateSystem): Flatten.Matrix {\n    let discovered = undefined;\n\n    console.assert(this !== into);\n\n    if (CoordinateSystem.registered.has(this) && CoordinateSystem.registered.get(this)!.has(into))\n      discovered = CoordinateSystem.registered.get(this)!.get(into)!.embedding;\n    else if (CoordinateSystem.discovered.has(this) && CoordinateSystem.discovered.get(this)!.has(into))\n      discovered = CoordinateSystem.discovered.get(this)!.get(into)!;\n    else {\n      const reachable = new Set<CoordinateSystem>();\n      const path: Array<{\n        definition: { embedding: Embedding } | { inverse: Embedding },\n        dependency: RegisteredEmbedding,\n      }> = [];\n\n      const search = (from: CoordinateSystem): Embedding | null => {\n        if (from === into) {\n          let map = new Flatten.Matrix();\n          for (const {definition, dependency} of path) {\n            if (\"embedding\" in definition) {\n              console.assert(definition.embedding.embedding);\n              map = definition.embedding.embedding!.multiply(map);\n            } else {\n              console.assert(definition.inverse.embedding);\n              map = map.multiply(inverse(definition.inverse.embedding!));\n            }\n            dependency.dependents.push({ domain: this, codomain: into }); \n          }\n          const discovered = Vue.observable({\n            embedding: Object.freeze(map)\n          });\n\n          if (!CoordinateSystem.discovered.has(this))\n            CoordinateSystem.discovered.set(this, new Map());\n\n          CoordinateSystem.discovered.get(this)!.set(into, discovered);\n\n          return discovered;\n        }\n\n        const follow = (to: CoordinateSystem, definition: { embedding: Embedding } | { inverse: Embedding }, dependency: RegisteredEmbedding): Embedding | null => {\n          if (reachable.has(to))\n            return null;\n\n          path.push({\n            definition,\n            dependency,\n          });\n          try {\n            reachable.add(to);\n            return search(to);\n          } finally {\n            path.pop();\n          }\n        };\n\n\n        if (CoordinateSystem.registered.has(from)) {\n          for (const to of CoordinateSystem.registered.get(from)!.keys()) {\n            const dependency = CoordinateSystem.registered.get(from)!.get(to)!;\n            const embedding = follow(to, { embedding: dependency.embedding }, dependency);\n            if (embedding !== null)\n              return embedding;\n          }\n        }\n\n        // TODO: This is quite inefficient. See https://github.com/flatsurf/vue-flatsurf/issues/39.\n        for (const to of CoordinateSystem.registered.keys()) {\n          if (CoordinateSystem.registered.get(to)!.has(from)) {\n            const dependency = CoordinateSystem.registered.get(to)!.get(from)!;\n            const embedding = follow(to, { inverse: dependency.embedding }, dependency);\n            if (embedding !== null)\n              return embedding;\n          }\n        }\n\n        return null;\n      }\n\n      const embedding = search(this);\n\n      if (embedding === null)\n        throw Error(\"No embedding could be constructed between these coordinate systems.\");\n\n      console.assert(embedding.embedding !== null);\n\n      return embedding.embedding!;\n    }\n\n    console.assert(discovered.embedding !== null);\n\n    return discovered.embedding!;\n  }\n}\n\n","/* ******************************************************************************\n * Copyright (c) 2020 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Flatten from \"@flatten-js/core\";\n\nimport CoordinateSystem, {Embedding} from \"./CoordinateSystem\";\nimport Box from \"./Box\";\nimport Polygon from \"./Polygon\";\nimport Point from \"./Point\";\nimport Vector from \"./Vector\";\n\nexport default class Viewport {\n  public constructor(ideal?: CoordinateSystem, width: number = 640, height: number = 640) {\n    this.idealCoordinateSystem = ideal || new CoordinateSystem(true);\n    if (!this.idealCoordinateSystem.positive)\n      throw new Error(\"ideal coordinate system must be positive\");\n    if (width === 0 || height === 0)\n      throw new Error(\"cannot initialize viewport to be an empty box\");\n    this.viewportCoordinateSystem = new CoordinateSystem(false);\n    this.dimensions = { width, height };\n    this.visible = new Box(this.viewportCoordinateSystem, [0, 0], [width, height]);\n    this.focused = this.visible;\n  }\n\n  // Resize the viewport while keeping the currently focused box unchanged.\n  public resize(width: number, height: number) {\n    if (width === 0 || width === 0)\n      throw Error(\"Cannot resize viewport to an empty box.\");\n\n    this.dimensions = { width, height };\n\n    this.focus(this.focused);\n  }\n\n  public focus(focus: Box | Polygon) {\n    if (this.token === undefined)\n      this.token = this.idealCoordinateSystem.embedInto(this.viewportCoordinateSystem);\n    if (this.token === null)\n      throw Error(\"Cannot change focus on a viewport that has already been destroyed.\");\n\n    const focused = this.idealCoordinateSystem.embed(focus).box;\n\n    console.assert(focused.low.x != null && this.focused.low.y != null && this.focused.high.x != null && this.focused.high.y != null, \"Focus not well-formed.\");\n\n    this.focused = focused;\n\n    this.visible = this.focused.contain(this.width / this.height);\n    // We now need to embed the \"ideal\" coordinate system into the actual\n    // \"viewport\" coordinate system so that the \"visible\" box fills the (0,\n    // 0), (width, height) box.\n    this.token = Object.freeze(this.idealCoordinateSystem.embedInto(this.viewportCoordinateSystem, new Flatten.Matrix(\n      this.width / this.visible.width, 0,\n      0, -this.height / this.visible.height,\n      -this.visible.low.x * this.width / this.visible.width,\n      this.visible.high.y * this.height / this.visible.height,\n    ), this.token));\n  }\n\n  public zoom(factor: number, center?: Point) {\n    if (center === undefined) {\n      center = this.viewport.center;\n      center = this.focused.parent.embed(center);\n\n      const width = this.focused.width / factor;\n      const height = this.focused.height / factor;\n\n      this.focus(new Box(this.focused.parent,\n        [center.x - width / 2, center.y - height / 2],\n        [center.x + width / 2, center.y + height / 2]));\n    } else {\n      center = this.idealCoordinateSystem.embed(center);\n      const centerBefore = this.viewportCoordinateSystem.embed(center);\n      this.zoom(factor);\n      const centerAfter = this.viewportCoordinateSystem.embed(center);\n      \n      this.focus(this.viewport.translate(new Vector(\n        this.viewportCoordinateSystem,\n        centerBefore,\n        centerAfter)));\n    }\n  }\n\n  public destroy() {\n    if (this.token != null)\n      this.idealCoordinateSystem.reset(this.token);\n    this.token = null;\n  }\n\n  public embed(point: Point) : Point;\n  public embed(box: Box) : Polygon;\n  public embed(value: Point | Box) : Point | Polygon {\n    return this.viewportCoordinateSystem.embed(value as any);\n  }\n\n  public get viewport() : Box {\n    return this.viewportCoordinateSystem.embed(this.visible).box;\n  }\n\n  public get width() { return this.dimensions.width; }\n  public get height() { return this.dimensions.height; }\n\n  private dimensions: { width: number, height: number };\n  // The underlying ideal coordinate system that is stable under resizing the\n  // viewport, translating it and such.\n  public readonly idealCoordinateSystem: CoordinateSystem;\n  // Coordinates on screen, i.e., inside the viewport starting at (0, 0) in\n  // the top-left corner.\n  public readonly viewportCoordinateSystem: CoordinateSystem;\n  // The currently focused rectangle, centered in the viewport.\n  private focused: Box;\n  // The currently visible rectangle.\n  private visible: Box;\n\n  private token?: Embedding | null;\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Ref, Watch } from \"vue-property-decorator\";\nimport Viewport from \"@/geometry/Viewport\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Point from \"@/geometry/Point\";\nimport Box from \"@/geometry/Box\";\nimport Vector from \"@/geometry/Vector\";\nimport Polygon from \"@/geometry/Polygon\";\nimport panzoom from \"pan-zoom/index.js\";\n\n// See https://github.com/flatsurf/vue-flatsurf/issues/31 for issues with this component.\n@Component\nexport default class PanZoom extends Vue {\n  @Prop({required: true, type: CoordinateSystem}) coordinateSystem!: CoordinateSystem;\n  @Prop({required: false, default: null, type: Object}) value!: Box | Polygon | null;\n\n  private observer = new ResizeObserver(this.resize);\n  private unpanzoom = () => {};\n  protected pan = false;\n  private viewport: Viewport | null = null;;\n\n  @Ref()\n  private readonly container!: HTMLElement;\n\n  private dimensions : null | { width: number, height: number } = null;\n\n  private resize() {\n    const dimensions = this.redimension();\n\n    if (this.viewport == null)\n      throw Error(\"Cannot resize viewport before PanZoom has been mounted.\");\n\n    this.viewport.resize(dimensions.width, dimensions.height);\n    this.refocus(this.viewport.viewport);\n  }\n\n  @Watch(\"value\")\n  refocus(focus: Box | Polygon | null) {\n    if (this.viewport == null)\n      throw Error(\"Cannot change focus in PanZoom before it has been mounted.\");\n  \n    if (focus == null)\n      return;\n\n    const changed = () => {\n      if (focus instanceof Box) {\n        try {\n          return !focus.equalTo(this.viewport!.viewport);\n        } catch {\n          return true;\n        }\n      }\n      return true;\n    };\n\n    if (changed()) {\n      this.viewport.focus(focus);\n      console.assert(JSON.stringify(focus) !== JSON.stringify(this.viewport.viewport), \"Changing focus to %s did not modify viewport.\", JSON.stringify(focus))\n    }\n\n    if (this.value == null || changed()) {\n      this.$emit('input', this.viewport.viewport);\n    }\n  }\n\n  @Watch(\"coordinateSystem\")\n  onCoordinateSystemChange() {\n    const focus = this.value == null ? null : this.coordinateSystem.embed(this.value);\n    this.cleanup();\n    this.initialize();\n    this.refocus(focus);\n  }\n\n  mounted() {\n    this.unpanzoom = panzoom(this.$el, this.panzoom);\n    this.observer.observe(this.container);\n    this.initialize();\n    this.refocus(this.value);\n  }\n\n  initialize() {\n    const dimensions = this.redimension();\n    this.viewport = new Viewport(this.coordinateSystem, dimensions.width, dimensions.height);\n  }\n\n  beforeDestroy() {\n    this.unpanzoom();\n    this.observer.unobserve(this.container);\n    this.cleanup();\n  }\n\n  cleanup() {\n    if (this.viewport != null)\n      this.viewport.destroy();\n    this.viewport = null;\n  }\n\n  private redimension() {\n    if (this.container == null)\n      throw Error(\"Cannot determine dimensions of PanZoom before it has been mounted.\");\n\n    this.dimensions = {\n      width: Math.min(this.container.clientWidth, window.innerWidth),\n      height: Math.min(this.container.clientHeight, window.innerHeight),\n    };\n\n    if (this.dimensions.width === 0)\n      throw Error(\"PanZoom must explicitly have non-zero width.\");\n\n    if (this.dimensions.height === 0)\n      throw Error(\"PanZoom must explicitly have non-zero height.\");\n    \n    return this.dimensions;\n  }\n\n  private panzoom(e: any) {\n    console.assert(this.viewport != null, \"PanZoom cannot receive events before it has been mounted.\");\n\n    // We either zoom or pan; mixing this is probably confusing.\n    if (e.dz !== 0) {\n      this.viewport!.zoom(Math.exp(-e.dz/96), new Point(this.viewport!.viewportCoordinateSystem, e.x, e.y));\n    } else {\n      this.viewport!.focus(this.viewport!.viewport.translate(new Vector(\n        this.viewport!.viewportCoordinateSystem,\n        -e.dx,\n        -e.dy)));\n    }\n    this.$emit('input', this.viewport!.viewport);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PanZoom.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PanZoom.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PanZoom.vue?vue&type=template&id=559ec5d4&scoped=true&\"\nimport script from \"./PanZoom.vue?vue&type=script&lang=ts&\"\nexport * from \"./PanZoom.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PanZoom.vue?vue&type=style&index=0&id=559ec5d4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"559ec5d4\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('pan-zoom',{attrs:{\"coordinate-system\":_vm.idealCoordinateSystem},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar viewport = ref.viewport;\nreturn [(_vm.layout != null)?_c('flatsurf',{ref:\"flatsurf\",attrs:{\"width\":viewport.width,\"height\":viewport.height,\"triangulation\":_vm.triangulation,\"layout\":_vm.layout,\"viewport-coordinate-system\":viewport.viewportCoordinateSystem,\"visualization-options\":_vm.visualizationOptions,\"flow-components\":_vm.visibleFlowComponents},on:{\"dblclick\":function($event){_vm.focus = _vm.layout.hull}}},[_vm._t(\"interaction\",null,{\"layout\":_vm.layout,\"svg\":viewport.viewportCoordinateSystem,\"triangulation\":_vm.triangulation,\"options\":_vm.visualizationOptions,\"focus\":_vm.focus,\"refocus\":_vm.refocus})],2):_vm._e()]}}],null,true),model:{value:(_vm.focus),callback:function ($$v) {_vm.focus=$$v},expression:\"focus\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport HalfEdge from \"./HalfEdge\";\n\nexport default class Edge {\n  public constructor(halfEdge: HalfEdge) {\n    this.positive = Math.abs(halfEdge);\n    this.negative = -this.positive;\n  }\n\n  public toString() {\n    return this.positive.toString();\n  }\n\n  public readonly positive: HalfEdge;\n  public readonly negative: HalfEdge;\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Vue from \"vue\";\n\nimport HalfEdge from \"@/flatsurf/HalfEdge\";\nimport Edge from \"@/flatsurf/Edge\";\nimport IHalfEdgeOptions from \"./IHalfEdgeOptions\";\nimport IFlatTriangulationOptions from \"./IFlatTriangulationOptions\";\n\nexport default class VisualizationOptions implements IFlatTriangulationOptions {\n  public get(edge: Edge): IHalfEdgeOptions;\n  public get(edge: HalfEdge): IHalfEdgeOptions;\n  public get(halfEdge: Edge | HalfEdge): IHalfEdgeOptions {\n    this.ensure(halfEdge);\n    if (halfEdge instanceof Edge) {\n      const edge = halfEdge;\n      return this.edges[edge.positive];\n    } else {\n      return this.halfEdges[halfEdge];\n    }\n  }\n\n  private ensure(halfEdge: Edge | HalfEdge) {\n    if (halfEdge instanceof Edge) {\n      const edge = halfEdge;\n      if (this.edges[edge.positive] === undefined) {\n        Vue.set(this.edges, edge.positive, {\n          indicator: null,\n          selected: false,\n          visible: true,\n          label: null,\n          icon: null,\n        } as IHalfEdgeOptions);\n      }\n    } else {\n      if (this.halfEdges[halfEdge] === undefined) {\n        Vue.set(this.halfEdges, halfEdge, {\n          indicator: null,\n          selected: false,\n          visible: false,\n          label: null,\n          icon: null,\n        } as IHalfEdgeOptions);\n      }\n    }\n  }\n\n  public indicate(edge: Edge, at: number | null): void;\n  public indicate(edge: HalfEdge, at: number | null): void;\n  public indicate(halfEdge: Edge | HalfEdge, at: number | null) {\n    this.ensure(halfEdge);\n    if (halfEdge instanceof Edge) {\n      const edge = halfEdge;\n      this.edges[edge.positive].indicator = at;\n    } else {\n      this.halfEdges[halfEdge].indicator = at;\n    }\n  }\n\n  public select(edge: Edge, selected: boolean): void;\n  public select(edge: HalfEdge, selected: boolean): void;\n  public select(halfEdge: Edge | HalfEdge, selected: boolean) {\n    this.ensure(halfEdge);\n    if (halfEdge instanceof Edge) {\n      const edge = halfEdge;\n      this.edges[edge.positive].selected = selected;\n    } else {\n      this.halfEdges[halfEdge].selected = selected;\n    }\n  }\n\n  public show(edge: Edge, visible: boolean): void;\n  public show(halfEdge: HalfEdge, visible: boolean): void;\n  public show(halfEdge: Edge | HalfEdge, visible: boolean) {\n    this.ensure(halfEdge);\n    if (halfEdge instanceof Edge) {\n      const edge = halfEdge;\n      this.edges[edge.positive].visible = visible;\n    } else {\n      this.halfEdges[halfEdge].visible = visible;\n    }\n  }\n\n  public label(edge: Edge, label: string | null): void;\n  public label(halfEdge: HalfEdge, label: string | null): void;\n  public label(halfEdge: Edge | HalfEdge, label: string | null) {\n    this.ensure(halfEdge);\n    if (halfEdge instanceof Edge) {\n      const edge = halfEdge;\n      this.edges[edge.positive].label = label;\n    } else {\n      this.halfEdges[halfEdge].label = label;\n    }\n  }\n\n  public icon(edge: Edge, icon: string | null): void;\n  public icon(halfEdge: HalfEdge, icon: string | null): void;\n  public icon(halfEdge: Edge | HalfEdge, icon: string | null) {\n    this.ensure(halfEdge);\n    if (halfEdge instanceof Edge) {\n      const edge = halfEdge;\n      this.edges[edge.positive].icon = icon;\n    } else {\n      this.halfEdges[halfEdge].icon = icon;\n    }\n  }\n\n  private halfEdges: {\n    [halfEdge: number]: {\n      indicator: number | null,\n      selected: boolean,\n      visible: boolean,\n      label: string | null,\n      icon: string | null,\n    },\n  } = {};\n\n  private edges: {\n    [positive: number]: {\n      indicator: number | null,\n      selected: boolean,\n      visible: boolean,\n      label: string | null,\n      icon: string | null,\n    },\n  } = {};\n};\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Vue from \"vue\";\n\nimport castArray from \"lodash-es/castArray\";\n\n// Watch all expressions on vm and return once one of them changes.\nexport default async function wait(vm: Vue, expression: string | string[]) {\n  await new Promise<void>((resolve) => {\n    const unwatches = castArray(expression).map((e) => {\n      return vm.$watch(e, () => {\n        for (const unwatch of unwatches) unwatch();\n        resolve();\n      });\n    });\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',_vm._g({},_vm.$listeners),[_vm._t(\"background\"),_vm._t(\"triangulation\",function(){return [(_vm.layout != null)?_c('flat-triangulation-component',{attrs:{\"layout\":_vm.layout,\"svg\":_vm.svgCoordinateSystem,\"options\":_vm.visualizationOptions}},[_vm._t(\"components\",function(){return _vm._l((_vm.flowComponents),function(component,i){return _c('flow-component-component',{key:i,attrs:{\"color\":_vm.palette.color(i),\"component\":component,\"layout\":_vm.layout,\"surface\":_vm.triangulation,\"svg\":_vm.svgCoordinateSystem}})})})],2):_vm._e()]}),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport iwanthue, { ColorSpacePreset } from \"iwanthue\";\n\nexport default class Palette {\n  constructor(colors: number = 2, space: ColorSpacePreset = \"fancy-light\") {\n    // TODO: Typings in iwanthue are wrong, see https://github.com/medialab/iwanthue/pull/50\n    this.palette = iwanthue(colors >= 2 ? colors : 2, { seed: 1337 as any, colorSpace: space });\n  }\n\n  color(i: number) {\n    if (i >= this.palette.length)\n      console.warn(\"Color outside of palette bounds requested.\");\n    return this.palette[i % this.palette.length];\n  }\n\n  private readonly palette;\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport { optimize } from \"svgo/dist/svgo.browser.js\";\nimport rgba from \"color-normalize\";\n\n/*\n * Turns an <svg> in an HTML document into a standalone svg.\n */\nexport default class SVGExporter {\n  constructor(svg: Element) {\n    this.svg = svg.cloneNode(true) as Element;\n    this.styles = [svg, ...svg.getElementsByTagName(\"*\")].map(this.computedStyle);\n\n    if (this.svg.tagName !== 'svg') {\n      svg = document.createElement('svg');\n      svg.appendChild(this.svg);\n      this.svg = svg;\n\n      this.styles.unshift({});\n    }\n\n    this.svg.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n    this.svg.setAttribute(\"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\n  }\n\n  private get children() {\n    return [this.svg, ...this.svg.getElementsByTagName(\"*\")];\n  }\n\n  private computedStyle(element: Element) {\n    const style = window.getComputedStyle(element);\n    const computed = {} as { [key: string]: string };\n    for (let i = 0; i < style.length; i++)\n      computed[style[i]] = style.getPropertyValue(style[i]);\n    return computed;\n  }\n\n  /*\n   * Return the index of `e` in `styles`.\n   */\n  private index(e: Element) {\n    const children = this.children;\n    console.assert(children.length == this.styles.length);\n\n    for (let index = 0; index < children.length; index++) {\n      if (children[index] === e)\n        return index;\n    }\n\n    throw Error(\"Element not found in DOM tree.\")\n  }\n\n  /*\n   * Drop all class=\"\" attributes from all elements.\n   */\n  public dropClasses() {\n    for (const child of this.children) {\n      child.removeAttribute('class');\n    }\n  }\n\n  /*\n   * Drop all prefixed styles from all elements, i.e., things such as\n   * `-webkit-...` and `--variable`.\n   */\n  public dropPrefixedStyles() {\n    this.styles = this.styles.map((styles) => {\n      return Object.fromEntries(\n        Object.entries(styles).filter(([key, _value]) => !key.startsWith('-'))\n      );\n    });\n  }\n\n  /*\n   * Drop all elements that are not visible from the element tree.\n   */\n  public dropInvisible() {\n    const children = this.children;\n    console.assert(children.length === this.styles.length);\n\n    const trash = {} as {[index: number]: Element};\n\n    const addToTrash = (element: Element) => {\n      const index = this.index(element);\n\n      if (index in trash)\n        return;\n      trash[index] = element;\n\n      [...element.children].forEach(addToTrash);\n    };\n\n    for (let index = 1; index < children.length; index++) {\n      const child = children[index];\n      const style = this.styles[index];\n      if (style[\"visibility\"] === \"hidden\" || style[\"display\"] === \"none\")\n        addToTrash(child);\n    }\n\n    this.styles = this.styles.filter((_style, i) => !(i in trash));\n\n    for (const element of Object.values(trash)) {\n      if (element.parentNode != null) {\n        element.parentNode.removeChild(element);\n      }\n    }\n\n    console.assert(this.children.length === this.styles.length);\n\n    // Now we can drop all \"visibility: visible\" and \"display: \" which has no\n    // effect in SVG anymore.\n    this.styles = this.styles.map((styles) => {\n      return Object.fromEntries(\n        Object.entries(styles).filter(([key, _value]) => key !== \"visibility\" && key !== \"display\")\n      );\n    });\n  }\n\n  /*\n   * Drop styling that is already equally set on the parent node.\n   */\n  public dropRedundantStyles() {\n    const children = this.children;\n    console.assert(children.length === this.styles.length);\n\n    for (let index = children.length; index--;) {\n      const child = children[index];\n      const parent = child.parentNode as Element;\n\n      if (parent == null) continue;\n\n      const style = this.styles[this.index(parent)];\n      this.styles[index] = Object.fromEntries(\n        Object.entries(this.styles[index]).filter(([key, value]) => style[key] != value)\n      );\n    }\n  }\n\n  /*\n   * Drop custom attributes such as `data-attribute=\"\"`.\n   */\n  public dropCustomAttributes() {\n    for (const child of this.children) {\n      [...child.attributes].forEach((attribute) => {\n        if (attribute.name.includes('-'))\n          child.removeAttribute(attribute.name);\n      });\n    }\n  }\n\n  private static readonly standard = [ \"cx\", \"cy\", \"height\", \"width\", \"x\", \"y\", \"r\", \"rx\", \"ry\", \"d\", \"fill\", \"transform\", \"alignment-baseline\", \"baseline-shift\", \"clip-path\", \"clip-rule\", \"color\", \"color-interpolation\", \"color-interpolation-filters\", \"color-rendering\", \"cursor\", \"direction\", \"display\", \"dominant-baseline\", \"fill-opacity\", \"fill-rule\", \"filter\", \"flood-color\", \"flood-opacity\", \"font-family\", \"font-size\", \"font-size-adjust\", \"font-stretch\", \"font-style\", \"font-variant\", \"font-weight\", \"glyph-orientation-horizontal\", \"glyph-orientation-vertical\", \"image-rendering\", \"letter-spacing\", \"lighting-color\", \"marker-end\", \"marker-mid\", \"marker-start\", \"mask\", \"opacity\", \"overflow\", \"paint-order\", \"pointer-events\", \"shape-rendering\", \"stop-color\", \"stop-opacity\", \"stroke\", \"stroke-dasharray\", \"stroke-dashoffset\", \"stroke-linecap\", \"stroke-linejoin\", \"stroke-miterlimit\", \"stroke-opacity\", \"stroke-width\", \"text-anchor\", \"text-decoration\", \"text-overflow\", \"text-rendering\", \"unicode-bidi\", \"vector-effect\", \"visibility\", \"white-space\", \"word-spacing\", \"writing-mode\", \"display\", \"overflow\", \"visibility\", \"text-overflow\", \"clip-path\", \"clip-rule\", \"mask\", \"color\", \"opacity\", \"color-interpolation-filters\", \"filter\", \"flood-color\", \"flood-opacity\", \"lighting-color\", \"isolation\", \"transform\", \"transform-box\", \"transform-origin\", \"letter-spacing\", \"text-align\", \"text-align-last\", \"text-indent\", \"word-spacing\", \"white-space\", \"vertical-align\", \"dominant-baseline\", \"alignment-baseline\", \"baseline-shift\", \"direction\", \"text-orientation\", \"writing-mode\", \"font\", \"text-decoration\", \"text-decoration-line\", \"text-decoration-style\", \"text-decoration-color\"];\n\n  /*\n   * Drop styles that are not explititly supported by SVG 2, see\n   * https://www.w3.org/TR/SVG/styling.html#RequiredProperties\n   */\n  public dropNonStandardStyles() {\n    this.styles = this.styles.map((styles) => {\n      return Object.fromEntries(\n        Object.entries(styles).filter(([key, _value]) => {\n          if (SVGExporter.standard.includes(key))\n            return true;\n          if (key.startsWith(\"font-\"))\n            return true;\n        })\n      )\n    });\n  }\n\n  /*\n   * Rewrite style as presentation attributes.\n   * Drop all styles that can be presentation attributes from elements where they are not allowed.\n   * This helps some SVG readers and also svgo to optimize the output.\n   */\n  public usePresentationAttributes() {\n    const children = this.children;\n    console.assert(children.length === this.styles.length);\n\n    for (let index = children.length; index--;) {\n      const child = children[index];\n\n      const makePresentation = (key: string, value: string) => {\n        if (!child.hasAttribute(key))\n          child.setAttribute(key, value);\n      };\n\n      this.styles[index] = Object.fromEntries(\n        Object.entries(this.styles[index]).filter(([key, value]) => {\n          if ([\"cx\", \"cy\"].includes(key)) {\n            if ([\"circle\", \"ellipse\"].includes(child.tagName))\n              return makePresentation(key, value);\n            return false;\n          } else if ([\"height\", \"width\", \"x\", \"y\"].includes(key)) {\n            if ([\"foreignObject\", \"image\", \"rect\", \"svg\", \"symbol\", \"use\"].includes(child.tagName))\n              return makePresentation(key, value);\n            return false;\n          } else if ([\"r\"].includes(key)) {\n            if ([\"circle\"].includes(child.tagName))\n              return makePresentation(key, value);\n            return false;\n          } else if ([\"rx\", \"ry\"].includes(key)) {\n            if ([\"ellipse\", \"rect\"].includes(child.tagName))\n              return makePresentation(key, value);\n            return false;\n          } else if ([\"d\"].includes(key)) {\n            if ([\"path\"].includes(child.tagName))\n              makePresentation(key, value);\n            return false;\n          } else if ([\"fill\"].includes(key)) {\n            if (![\"animate\", \"set\", \"animateMotion\"].includes(child.tagName))\n              makePresentation(key, value);\n            return false;\n          } else if ([\"transform\"].includes(key) && value != \"none\") {\n            if (![\"pattern\", \"linearGradien\", \"radialGradient\"].includes(child.tagName))\n              makePresentation(key, value);\n            else if ([\"pattern\"].includes(child.tagName))\n              makePresentation(\"patternTransform\", value);\n            else if ([\"linearGradient\", \"radialGradient\"].includes(child.tagName))\n              makePresentation(\"gradientTransform\", value);\n            return false;\n          } else if ([\"alignment-baseline\", \"baseline-shift\", \"clip-path\", \"clip-rule\", \"color\", \"color-interpolation\", \"color-interpolation-filters\", \"color-rendering\", \"cursor\", \"direction\", \"display\", \"dominant-baseline\", \"fill-opacity\", \"fill-rule\", \"filter\", \"flood-color\", \"flood-opacity\", \"font-family\", \"font-size\", \"font-size-adjust\", \"font-stretch\", \"font-style\", \"font-variant\", \"font-weight\", \"glyph-orientation-horizontal\", \"glyph-orientation-vertical\", \"image-rendering\", \"letter-spacing\", \"lighting-color\", \"marker-end\", \"marker-mid\", \"marker-start\", \"mask\", \"opacity\", \"overflow\", \"paint-order\", \"pointer-events\", \"shape-rendering\", \"stop-color\", \"stop-opacity\", \"stroke\", \"stroke-dasharray\", \"stroke-dashoffset\", \"stroke-linecap\", \"stroke-linejoin\", \"stroke-miterlimit\", \"stroke-opacity\", \"stroke-width\", \"text-anchor\", \"text-decoration\", \"text-overflow\", \"text-rendering\", \"unicode-bidi\", \"vector-effect\", \"visibility\", \"white-space\", \"word-spacing\", \"writing-mode\"].includes(key)) {\n            makePresentation(key, value);\n            return false;\n          }\n          return true;\n        })\n      );\n    }\n  }\n  public simplifyColors() {\n    const children = this.children;\n    console.assert(children.length === this.styles.length);\n\n    const simplify = (child: Element, style: {[key: string]: string}, key: string, okey: string | null = null) => {\n      if (child.getAttribute(key))\n        delete style[key];\n      if (okey != null && child.getAttribute(okey))\n        delete style[okey];\n\n      const value = style[key];\n      if (value == null || value == \"none\")\n        return;\n\n      const color = rgba(value);\n      const opacity = color[3];\n      if (okey != null) {\n        style[okey] = String(Number(child.getAttribute(okey) || style[okey] || 1) * opacity);\n        child.removeAttribute(okey);\n      }\n\n      style[key] = `rgb(${color[0]*255}, ${color[1]*255}, ${color[2]*255})`;\n    };\n\n    for (let index = children.length; index--;) {\n      const child = children[index];\n      const style = this.styles[index];\n\n      simplify(child, style, \"fill\", \"fill-opacity\");\n      simplify(child, style, \"stroke\", \"stroke-opacity\");\n      simplify(child, style, \"color\");\n      simplify(child, style, \"text-decoration\");\n      simplify(child, style, \"text-decoration-color\");\n\n      this.styles[index] = style;\n    }\n  }\n\n  /*\n   * Drop trivial styles.\n   */\n  public dropTrivialStyles() {\n    this.styles = this.styles.map((styles) => {\n      return Object.fromEntries(\n        Object.entries(styles).filter(([key, value]) => {\n          if (key == \"transform\" && value == \"none\")\n            return false;\n          if (key == \"filter\" && value == \"none\")\n            return false;\n\n          return true;\n        })\n      )\n    });\n  }\n\n  /*\n   * Drop styles that confuse inkscape (as of 1.1)\n   */\n  public dropNonInkscapeStyles() {\n    this.styles = this.styles.map((styles) => {\n      return Object.fromEntries(\n        Object.entries(styles).filter(([key, value]) => {\n          if (key == \"font-synthesis\")\n            return false;\n          if (key == \"vertical-align\")\n            return false;\n          if (key == \"transform-origin\")\n            return false;\n          if (key == \"transform-box\")\n            return false;\n          if (key == \"text-overflow\")\n            return false;\n          if (key == \"text-align-last\")\n            return false;\n          if (key == \"mask\")\n            return false;\n          if (key == \"font-optical-sizing\")\n            return false;\n          if (key == \"font-language-override\")\n            return false;\n          if (key == \"font-kerning\")\n            return false;\n          if (key == \"clip-path\")\n            return false;\n          if (key == \"transform\" && value == \"none\")\n            return false;\n\n          if (SVGExporter.standard.includes(key))\n            return true;\n          if (key.startsWith(\"font-\"))\n            return true;\n        })\n      )\n    });\n  }\n\n  public dropInteractiveStyles() {\n    this.styles = this.styles.map((styles) => {\n      return Object.fromEntries(\n        Object.entries(styles).filter(([key, _value]) => {\n          if (key == \"cursor\")\n            return false;\n          if (key == \"pointer-events\")\n            return false;\n\n          return true;\n        })\n      )\n    });\n  }\n\n  /*\n   * Inline all styling into the elements `style` attribute.\n   * This is usually the last method to call before `toString()`.\n   */\n  public inlineStyles() {\n    const children = this.children;\n    console.assert(children.length == this.styles.length);\n\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      const style = Object.entries(this.styles[i]).map(([key, value]) => {\n        return `${key}: ${value};`\n      }).join(\" \");\n      if (style)\n        child.setAttribute('style', style);\n      else\n        child.removeAttribute('style');\n    }\n  }\n\n  /*\n   * Return the extracted SVG as a string.\n   */\n  public toString(svgo: boolean = true) {\n    let svg = this.svg.outerHTML;\n    if (svgo)\n      svg = optimize(svg).data;\n    return svg;\n  }\n\n  // A clone of the original SVG node from the DOM.\n  private svg: Element;\n\n  // The computed style of each node in the original SVG node in traversal order.\n  private styles: Array<{ [key: string]: string }> = [];\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"FlatTriangulation\"},[_vm._t(\"faces\",function(){return [_c('g',_vm._l((_vm.faces),function(face,i){return _c('face',{key:i,attrs:{\"vertices\":face,\"svg\":_vm.svg}})}),1)]}),_vm._t(\"default\"),_vm._t(\"edges\",function(){return [_c('g',_vm._l((_vm.halfEdges),function(halfEdge){return _c('half-edge-component',{key:halfEdge,attrs:{\"layout\":_vm.layout,\"half-edge\":halfEdge,\"source-indicator\":_vm.sourceIndicators.includes(halfEdge),\"options\":_vm.options.get(halfEdge),\"svg\":_vm.svg}})}),1),_c('g',_vm._l((_vm.edges),function(edge){return _c('edge-component',{key:edge.positive,attrs:{\"layout\":_vm.layout,\"edge\":edge,\"svg\":_vm.svg,\"options\":_vm.options.get(edge)}})}),1)]}),_vm._t(\"overlay\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ngon',{attrs:{\"vertices\":_vm.vertices,\"svg\":_vm.svg}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('polygon',{attrs:{\"points\":_vm.points}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\n\nimport Point from \"@/geometry/Point\";\n\n@Component\nexport default class Ngon extends Vue {\n  @Prop({ required: true, type: Array }) vertices!: Point[];\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n\n  get points() {\n    return this.vertices.map((xy) => {\n      xy = this.svg.embed(xy); \n      return `${xy.x},${xy.y}`;\n    }).join(\",\");\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Ngon.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Ngon.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Ngon.vue?vue&type=template&id=f4604b2c&\"\nimport script from \"./Ngon.vue?vue&type=script&lang=ts&\"\nexport * from \"./Ngon.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport Point from \"@/geometry/Point\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Ngon from \"@/components/svg/Ngon.vue\";\n\n@Component({\n  components: { Ngon }\n})\nexport default class Face extends Vue {\n  @Prop({ required: true, type: Array }) vertices!: Point[];\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Face.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Face.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Face.vue?vue&type=template&id=0ce8ccfc&scoped=true&\"\nimport script from \"./Face.vue?vue&type=script&lang=ts&\"\nexport * from \"./Face.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Face.vue?vue&type=style&index=0&id=0ce8ccfc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ce8ccfc\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"HalfEdge\"},[(_vm.options.label)?_c('g',{staticClass:\"label\"},[_c('segment-label',{attrs:{\"at\":_vm.segment,\"svg\":_vm.svg}},[_vm._v(_vm._s(_vm.options.label))])],1):_vm._e(),(_vm.options.indicator != null)?_c('arrow',{staticClass:\"indicator\",attrs:{\"segment\":_vm.indicatorPosition(_vm.halfEdge),\"svg\":_vm.svg}}):_vm._e(),(_vm.sourceIndicator)?_c('arrow',{staticClass:\"source\",attrs:{\"segment\":_vm.source,\"svg\":_vm.svg}}):_vm._e(),_c('segment-component',{class:{ selected: _vm.options.selected },attrs:{\"segment\":_vm.segment,\"svg\":_vm.svg}}),(_vm.options.icon)?_c('segment-icon',{attrs:{\"segment\":_vm.segment,\"svg\":_vm.svg,\"icon\":_vm.options.icon}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('line',{staticClass:\"segment\",attrs:{\"x1\":_vm.coords[0],\"y1\":_vm.coords[1],\"x2\":_vm.coords[2],\"y2\":_vm.coords[3]}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport Segmnt from \"@/geometry/Segment\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\n\n@Component\nexport default class Segment extends Vue {\n  @Prop({ required: true, type: Object }) segment!: Segmnt;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n\n  // For performance reasons we compute all coordinates at once since this\n  // gets called a lot.\n  get coords() {\n    const embedded = this.svg.embed(this.segment);\n    return [embedded.start.x, embedded.start.y, embedded.end.x, embedded.end.y];\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Segment.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Segment.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Segment.vue?vue&type=template&id=ecc26de4&\"\nimport script from \"./Segment.vue?vue&type=script&lang=ts&\"\nexport * from \"./Segment.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{attrs:{\"transform\":_vm.transformation}},[_c('text',[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Component, Prop } from \"vue-property-decorator\";\nimport Segment from \"@/geometry/Segment\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\n\n@Component\nexport default class HalfEdgeLabel extends Vue {\n\t@Prop({required: true, type: Object}) at!: Segment;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n\n\tget position() {\n\t\tconst midpoint = this.at.middle;\n\t\tlet normal = this.svg.embed(this.at.tangentInStart.rotate90CCW()).normalize();\n\t\treturn this.svg.embed(midpoint).translate(normal.multiply(12));\n\t}\n\n\tget transformation() {\n\t\treturn `translate(${this.position.x} ${this.position.y}) translate(6 4)`;\n\t}\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SegmentLabel.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SegmentLabel.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SegmentLabel.vue?vue&type=template&id=8a8e0b64&scoped=true&\"\nimport script from \"./SegmentLabel.vue?vue&type=script&lang=ts&\"\nexport * from \"./SegmentLabel.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./SegmentLabel.vue?vue&type=style&index=0&id=8a8e0b64&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8a8e0b64\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"arrow\"},[_c('line',{attrs:{\"x1\":_vm.x1,\"y1\":_vm.y1,\"x2\":_vm.x2,\"y2\":_vm.y2}}),_c('path',{attrs:{\"d\":\"M 0 -3 L 12 0 L 0 3 z\",\"transform\":_vm.atEnd,\"stroke-width\":\"0\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Prop, Vue, Component } from \"vue-property-decorator\";\nimport Segment from \"@/geometry/Segment\";\nimport Vector from \"@/geometry/Vector\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\n\n@Component\nexport default class Arrow extends Vue {\n\t@Prop({required: true, type: Object}) segment!: Segment;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n\n  get x1() {\n    return this.svg.embed(this.segment.start).x;\n  }\n\n  get y1() {\n    return this.svg.embed(this.segment.start).y;\n  }\n\n  get endWithoutHead() {\n    return this.svg.embed(this.segment.end).translate(this.svg.embed(this.segment.tangentInEnd).normalize().multiply(12));\n  }\n\n  get x2() {\n    return this.svg.embed(this.endWithoutHead).x;\n  }\n\n  get y2() {\n    return this.svg.embed(this.endWithoutHead).y;\n  }\n\n\tget atEnd() {\n    return `translate(${this.x2} ${this.y2}) rotate(${-this.svg.embed(this.segment).tangentInStart.angleTo(new Vector(this.svg.embed(this.segment).parent, 1, 0))*360 / (2*Math.PI)} 0 0)`;\n\t}\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Arrow.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Arrow.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Arrow.vue?vue&type=template&id=9de7aa18&scoped=true&\"\nimport script from \"./Arrow.vue?vue&type=script&lang=ts&\"\nexport * from \"./Arrow.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Arrow.vue?vue&type=style&index=0&id=9de7aa18&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9de7aa18\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('icon',{attrs:{\"icon\":_vm.icon,\"point\":_vm.center,\"svg\":_vm.svg}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('path',{staticClass:\"icon\",attrs:{\"d\":_vm.icon,\"transform\":_vm.transform}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport Point from \"@/geometry/Point\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\n\n@Component\nexport default class Segment extends Vue {\n  @Prop({ required: true, type: Object }) point!: Point;\n  @Prop({ required: true, type: String }) icon!: string;\n  @Prop({ required: true, type: Object }) svg!: CoordinateSystem;\n\n  // For performance reasons we compute all coordinates at once since this\n  // gets called a lot.\n  get coords() {\n    const embedded = this.svg.embed(this.point);\n    return [embedded.x, embedded.y];\n  }\n\n  get transform() {\n    const width = 20;\n    const height = 20;\n    return `translate(${this.coords[0] - width / 2} ${this.coords[1] - height / 2})`;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Icon.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Icon.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Icon.vue?vue&type=template&id=a9d4a62c&scoped=true&\"\nimport script from \"./Icon.vue?vue&type=script&lang=ts&\"\nexport * from \"./Icon.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Icon.vue?vue&type=style&index=0&id=a9d4a62c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a9d4a62c\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport Segment from \"@/geometry/Segment\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Icon from \"@/components/svg/Icon.vue\";\n\n@Component({\n  components: { Icon },\n})\nexport default class SegmentIcon extends Vue {\n  @Prop({ required: true, type: Object }) segment!: Segment;\n  @Prop({ required: true, type: String }) icon!: string;\n  @Prop({ required: true, type: Object }) svg!: CoordinateSystem;\n\n  get center() {\n    return this.segment.middle;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SegmentIcon.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SegmentIcon.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SegmentIcon.vue?vue&type=template&id=f62cce04&\"\nimport script from \"./SegmentIcon.vue?vue&type=script&lang=ts&\"\nexport * from \"./SegmentIcon.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport Layout from \"@/layout/Layout\";\nimport Segment from \"@/geometry/Segment\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport SegmentComponent from \"@/components/svg/Segment.vue\";\nimport HalfEdge from \"@/flatsurf/HalfEdge\";\nimport SegmentLabel from \"@/components/svg/SegmentLabel.vue\";\nimport Arrow from \"@/components/svg/Arrow.vue\";\nimport IHalfEdgeOptions from \"@/components/flatsurf/options/IHalfEdgeOptions\";\nimport VisualizationOptions from \"@/components/flatsurf/options/VisualizationOptions\";\nimport SegmentIcon from \"@/components/svg/SegmentIcon.vue\";\n\n@Component({\n  components: { Arrow, SegmentComponent, SegmentLabel, SegmentIcon },\n})\nexport default class HalfEdgeComponent extends Vue {\n  @Prop({required: true, type: Object}) layout!: Layout;\n  @Prop({required: true, type: Number}) halfEdge!: HalfEdge;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n  @Prop({required: false, type: Boolean, default: false}) sourceIndicator!: boolean;\n  @Prop({required: false, type: Object, default: () => new VisualizationOptions().get(1) }) options!: IHalfEdgeOptions; \n\n  get segment() {\n    return this.layout.layout(this.halfEdge).segment;\n  }\n\n  indicatorPosition(halfEdge: HalfEdge) {\n    const segment = this.layout.layout(halfEdge).segment;\n    let indicator = halfEdge === this.halfEdge ? this.options.indicator! : 1-this.options.indicator!;\n    if (indicator != null) {\n\t\t  const end = segment.at(indicator);\n\t\t  const start = end.translate(this.svg.embed(segment.tangentInStart.rotate90CCW()).normalize().multiply(10));\n      return new Segment(start, end);\n    }\n\t}\n\n  get source() {\n    const segment = this.segment;\n\t\tconst end = segment.at(0);\n\t\tconst start = end.translate(this.svg.embed(segment.tangentInStart.rotate90CCW()).normalize().multiply(10));\n    return new Segment(start, end);\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HalfEdge.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HalfEdge.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./HalfEdge.vue?vue&type=template&id=467e815b&\"\nimport script from \"./HalfEdge.vue?vue&type=script&lang=ts&\"\nexport * from \"./HalfEdge.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./HalfEdge.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"Edge\"},[(_vm.options.label)?_c('g',{staticClass:\"label\"},[_c('segment-label',{attrs:{\"at\":_vm.segment,\"svg\":_vm.svg}},[_vm._v(_vm._s(_vm.options.label))])],1):_vm._e(),_c('segment-component',{class:{ selected: _vm.options.selected },attrs:{\"segment\":_vm.segment,\"svg\":_vm.svg}}),(_vm.options.icon)?_c('segment-icon',{attrs:{\"segment\":_vm.segment,\"svg\":_vm.svg,\"icon\":_vm.options.icon}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport Layout from \"@/layout/Layout\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport SegmentComponent from \"@/components/svg/Segment.vue\";\nimport Edge from \"@/flatsurf/Edge\";\nimport SegmentLabel from \"@/components/svg/SegmentLabel.vue\";\nimport IHalfEdgeOptions from \"@/components/flatsurf/options/IHalfEdgeOptions\";\nimport VisualizationOptions from \"@/components/flatsurf/options/VisualizationOptions\";\nimport SegmentIcon from \"@/components/svg/SegmentIcon.vue\";\n\n@Component({\n  components: { SegmentComponent, SegmentLabel, SegmentIcon },\n})\nexport default class EdgeComponent extends Vue {\n  @Prop({required: true, type: Object}) layout!: Layout;\n  @Prop({required: true, type: Object}) edge!: Edge;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n  @Prop({required: false, type: Object, default: () => new VisualizationOptions().get(new Edge(1)) }) options!: IHalfEdgeOptions; \n\n  get segment() {\n    return this.layout.layout(this.edge.positive).segment;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Edge.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Edge.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Edge.vue?vue&type=template&id=686ed6c1&\"\nimport script from \"./Edge.vue?vue&type=script&lang=ts&\"\nexport * from \"./Edge.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Edge.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Component, Prop } from \"vue-property-decorator\";\nimport Face from \"./Face.vue\";\nimport HalfEdgeComponent from \"./HalfEdge.vue\";\nimport EdgeComponent from \"./Edge.vue\";\nimport Layout from \"@/layout/Layout\";\nimport VisualizationOptions from \"@/components/flatsurf/options/VisualizationOptions\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport IFlatTriangulationOptions from \"./options/IFlatTriangulationOptions\";\n\n@Component({\n  components: {\n    Face,\n    EdgeComponent,\n    HalfEdgeComponent,\n  }\n})\nexport default class FlatTriangulation extends Vue {\n  @Prop({required: true, type: Object}) layout!: Layout;\n  @Prop({required: false, default: () => new VisualizationOptions(), type: Object}) options!: IFlatTriangulationOptions;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n\n  get faces() {\n    let faces = this.layout.triangulation.faces.cycles;\n    faces = faces.filter((face) => face.every((he) => this.layout.primary.includes(he)));\n    return faces.map((face) => face.map((he) => this.layout.layout(he).segment.end));\n  }\n\n  get halfEdges() {\n    return this.layout.triangulation.halfEdges.filter((halfEdge) => this.options.get(halfEdge).visible);\n  }\n\n  get edges() {\n    return this.layout.triangulation.edges.filter((edge) => this.options.get(edge).visible);\n  }\n\n  // Return a list of vertex indicators where half edges meet that are almost collinear.\n  // TODO: Only show indicators when inner edges are not rendered, see https://github.com/flatsurf/vue-flatsurf/issues/32\n  get sourceIndicators() {\n    return this.halfEdges.filter((a) => {\n      const s = this.layout.layout(a).segment;\n      const v = s.tangentInStart;\n      return this.halfEdges.some((b) => {\n        if (b === a) return false;\n\n        const t = this.layout.layout(b).segment;\n\n        if (!s.start.on(t)) return false;\n\n        const w = t.tangentInStart;\n        const angle = v.angleTo(w);\n        const degree = Math.PI / 180;\n        return angle < degree || angle > 359 * degree;\n      })\n    });\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FlatTriangulation.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FlatTriangulation.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FlatTriangulation.vue?vue&type=template&id=2fd31484&\"\nimport script from \"./FlatTriangulation.vue?vue&type=script&lang=ts&\"\nexport * from \"./FlatTriangulation.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FlatTriangulation.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"FlowComponent\"},[_c('g',{style:({ '--color': _vm.color })},_vm._l((_vm.patches),function(vertices,i){return _c('ngon',{key:i,attrs:{\"vertices\":vertices,\"svg\":_vm.svg}})}),1),_c('g',{staticClass:\"boundary\"},_vm._l((_vm.perimeter),function(connection,i){return _c('saddle-connection-component',{key:i,attrs:{\"connection\":connection,\"layout\":_vm.layout,\"color\":_vm.color,\"svg\":_vm.svg}})}),1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"SaddleConnection\"},_vm._l((_vm.segments),function(segment,i){return _c('segment-component',{key:i,attrs:{\"segment\":segment,\"svg\":_vm.svg}})}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Layout from '@/layout/Layout';\nimport  { Vue, Component, Prop } from \"vue-property-decorator\";\nimport SaddleConnectionData from \"@/flatsurf/SaddleConnection\";\nimport SegmentComponent from \"@/components/svg/Segment.vue\";\nimport Segment from \"@/geometry/Segment\";\nimport Point from \"@/geometry/Point\";\nimport Line from \"@/geometry/Line\";\nimport Vector from \"@/geometry/Vector\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\n\n@Component({\n  components: {\n    SegmentComponent,\n  }\n})\nexport default class SaddleConnection extends Vue {\n  @Prop({ required: true }) connection!: SaddleConnectionData;\n  @Prop({ required: true }) layout!: Layout;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n\n  get segments(): Segment[] {\n    const segments = [];\n\n    const vector = this.connection.vector;\n    const crossings = [...this.connection.crossings];\n\n    let start = this.layout.layout(this.connection.source).segment.start;\n    const end = crossings.length > 0 ? this.layout.layout(this.connection.target).segment.start : this.layout.layout(this.connection.source).segment.end;\n\n    // TODO: Use at() instead of halfEdge() to construct the point of intersection. See https://github.com/flatsurf/vue-flatsurf/issues/35.\n    while(crossings.length) {\n\t\t  const crossing = crossings.shift()!;\n      if (this.layout.layout(crossing.halfEdge).inner)\n        continue;\n\n      // Since we are crossing an outer half edge, we compute the intersection\n      // of the saddle connection ray with it and add it to segments.\n      const line = new Line(start, start.translate(vector));\n      const crossingEdge = this.layout.layout(crossing.halfEdge).segment;\n      const crossingLine = new Line(crossingEdge.start, crossingEdge.end);\n      const intersection = line.intersect(crossingLine);\n      if (intersection === null) {\n        throw Error(\"saddle connection must intersect every crossing\");\n      }\n      segments.push(new Segment(start, intersection));\n\t\t  \n      // Now, we move the intersection point to the corresponding half-edge\n      // and repeat.\n      const alongHalfEdge = new Vector(intersection.parent, this.layout.layout(crossing.halfEdge).segment.start, intersection as Point);\n      start = this.layout.layout(-crossing.halfEdge).segment.end.translate(alongHalfEdge);\n    }\n\n    segments.push(new Segment(start, end));\n    \n    return segments;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SaddleConnection.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SaddleConnection.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SaddleConnection.vue?vue&type=template&id=70439efb&\"\nimport script from \"./SaddleConnection.vue?vue&type=script&lang=ts&\"\nexport * from \"./SaddleConnection.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Flatten from \"@flatten-js/core\";\nimport  { Vue, Component, Prop, Watch } from \"vue-property-decorator\";\nimport FlowComponentData from \"@/flatsurf/FlowComponent\";\nimport { Touch } from \"@/flatsurf/FlowConnection\";\nimport SaddleConnectionComponent from \"./SaddleConnection.vue\";\nimport Layout from \"@/layout/Layout\";\nimport Ngon from \"@/components/svg/Ngon.vue\";\nimport HalfEdge from \"@/flatsurf/HalfEdge\";\nimport Point from \"@/geometry/Point\";\nimport FlatTriangulation from \"@/flatsurf/FlatTriangulation\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\n\n@Component({\n  components: {\n    SaddleConnectionComponent,\n    Ngon,\n  },\n})\nexport default class FlowComponent extends Vue {\n  @Prop({ required: true }) component!: FlowComponentData;\n  @Prop({ required: true }) layout!: Layout;\n  @Prop({ required: true }) surface!: FlatTriangulation;\n  @Prop({ required: false, type: String, default:\"orange\" }) color!: string;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n\n  ats!: {[key: number]: number[]};\n  // Maps a half edge to the touches on that half edge in order.\n  touches!: {[key: number]: Touch[]};\n\n  get perimeter() {\n    let perimeter = this.component.perimeter;\n    if (this.component.cylinder)\n      // For cylinders do not show the connections at the top & bottom of the cylinder.\n      perimeter = perimeter.filter((connection) => connection.vertical);\n    else\n      // For minimal/undetermined components, do not show the inner structure of the component.\n      perimeter = perimeter.filter((connection) => connection.boundary);\n\n    return perimeter.map((connection) => connection.connection);\n  }\n\n  @Watch(\"layout\", { immediate: true })\n  resetCaches() {\n    this.ats = undefined as any;\n    this.touches = undefined as any;\n    this.ensureCaches();\n  }\n\n  ensureCaches() {\n    if (this.touches == null) {\n      this.touches = {};\n      for (const halfEdge of this.surface.halfEdges)\n        this.touches[halfEdge] = [];\n\n      for (const connection of this.component.perimeter) {\n        for (const touch of connection.touches) {\n          this.touches[touch.halfEdge][touch.index] = touch;\n        }\n      }\n    }\n    if (this.ats == null) {\n      this.ats = {};\n      for (const connection of this.component.perimeter) {\n        for (let i = 0; i < connection.touches.length; i++) {\n          const touch = connection.touches[i];\n          let at = 0;\n          if (i != 0 && i != connection.touches.length - 1) {\n            at = connection.connection.crossings[Math.floor((i - 1) / 2)].at;\n            if (i % 2 == 0)\n              at = 1 - at;\n          }\n          if (this.ats[touch.halfEdge] === undefined) this.ats[touch.halfEdge] = [];\n          this.ats[touch.halfEdge][touch.index] = at;\n        }\n      }\n    }\n  }\n\n  // Return the relative length in [0, 1] where `touch` intersects its half edge.\n  private at(touch: Touch): number {\n    console.assert(this.ats != null);\n    return this.ats[touch.halfEdge][touch.index];\n  }\n\n  // Return the triangle [A, B, C] completing the two touches `a`, `b`.\n  private patch(a: Touch, b: Touch): Point[] | null {\n    // Given `at` in [0, 1] returns the actual point on `halfEdge` that is that far on `halfEdge`.\n    const layout = (halfEdge: HalfEdge, at: number) => this.layout.layout(halfEdge).segment.at(at);\n\n    const isHalfEdge = a.halfEdge === -b.halfEdge;\n\n    const A = layout(a.halfEdge, this.at(a));\n    let B = isHalfEdge ? layout(a.halfEdge, 1) : layout(b.halfEdge, this.at(b));\n    let C = B;\n\n    let scenario = \"undefined\";\n\n    if (isHalfEdge) {\n      console.assert(this.at(a) === 0, \"Edge-parallel connection must start at vertex.\")\n      console.assert(this.at(b) === 0, \"Edge-parallel connection must end at vertex.\");\n    } else {\n      console.assert(a.halfEdge !== b.halfEdge, \"Saddle Connection cannot cross the half edge %s twice in a row.\", a.halfEdge);\n    }\n\n    const atouches = this.touches[a.halfEdge];\n    const btouches = this.touches[b.halfEdge];\n\n    if (isHalfEdge) {\n      return null;\n    } else {\n      if (b.index === btouches.length - 1) {\n        if (this.at(b) === 1) {\n          // The vertex B of the patch is an actual vertex of the triangulation. We will search for C on A's half edge.\n\n          // Search for C on A's half edge.\n          console.assert(this.at(a) !== 0);\n          if (a.index === 0) {\n            // Everything next to A is part of this patch.\n            console.assert(this.at(a) !== 0);\n            C = layout(a.halfEdge, 0);\n          } else {\n            C = layout(a.halfEdge, this.at(atouches[a.index - 1]));\n          }\n        } else {\n          // Everything next to B is part of this patch.\n          scenario = \"remaining face\";\n          C = layout(b.halfEdge, 1);\n          if (this.at(b) === 0)\n            return null;\n        }\n      } else {\n        if (this.at(b) === this.at(btouches[b.index + 1])) {\n          // The vertex B of this patch is a vertex of the component.\n          console.assert(this.at(b) === 0 || this.at(b) === 1, \"Vertices of components must be aligned with the vertices of the triangulation.\");\n\n          // Search for C on A's half edge.\n          console.assert(this.at(a) !== 0);\n          if (a.index === 0) {\n            // Everything next to A is part of this patch.\n            console.assert(this.at(a) !== 0);\n            // TODO: Is this always taken care of by something else? See https://github.com/flatsurf/vue-flatsurf/issues/34.\n            C = layout(a.halfEdge, 0);\n            return null;\n          } else {\n            // TODO: Is this always taken care of by something else? See https://github.com/flatsurf/vue-flatsurf/issues/34.\n            C = layout(a.halfEdge, this.at(atouches[a.index - 1]));\n            return null;\n          }\n        } else {\n          console.assert(this.at(btouches[b.index + 1]) > this.at(b), \"Touches are not ordered correctly on half edge %s. The %sth touch at %s should not be after the %sth touch at %s.\", b.halfEdge, btouches[b.index + 1].index, this.at(btouches[b.index + 1]), b.index, this.at(b));\n          C = layout(b.halfEdge, this.at(btouches[b.index + 1]));\n        }\n      }\n    }\n\n    console.assert(!A.equalTo(B), \"Patch of kind '%s' coming from the touches (%s, %s) at %s and (%s, %s) at %s has the same point twice A == B, i.e., %s == %s.\", scenario, a.halfEdge, a.index, this.at(a), b.halfEdge, b.index, this.at(b), A.toString(), B.toString());\n    console.assert(!A.equalTo(C), `Patch of kind '%s' coming from the touches (%s, %s) at %s and (%s, %s) at %s has the same point twice A == C, i.e., %s == %s.`, scenario, a.halfEdge, a.index, this.at(a), b.halfEdge, b.index, this.at(b), A.toString(), C.toString());\n    console.assert(!B.equalTo(C), `Patch of kind '%s' coming from the touches (%s, %s) at %s and (%s, %s) at %s has the same point twice B == C, i.e., %s == %s.`, scenario, a.halfEdge, a.index, this.at(a), b.halfEdge, b.index, this.at(b), B.toString(), C.toString());\n\n    return [A, B, C];\n  }\n\n  private patchHalfEdge(halfEdge: HalfEdge): Point[] | null {\n    // Given `at` in [0, 1] returns the actual point on `halfEdge` that is that far on `halfEdge`.\n    const layout = (halfEdge: HalfEdge, at: number) => this.layout.layout(halfEdge).segment.at(at);\n\n    const face = [halfEdge, this.surface.faces.image(halfEdge), this.surface.faces.preimage(halfEdge)];\n\n    const A = layout(halfEdge, 0);\n    const B = layout(halfEdge, 1);\n    let C = B;\n    let scenario = \"undefined\";\n\n    // Search for the third point of the patch on the following half edge in the face.\n    let touches = this.touches[face[1]]\n    if (touches.length === 0) {\n      // Since nothing intersects the following half edge in this face, this\n      // patch is the entire face.\n      scenario = \"entire face\";\n      C = layout(face[1], 1);\n      if (face[0] !== Math.min(...face))\n        return null;\n    } else if (this.at(touches[0]) === 0) {\n      // Something starts at the vertex joining this half edge with the\n      // following half edge...\n      touches = this.touches[-face[2]];\n      if (touches.every((touch) => this.at(touch) === 0 || this.at(touch) === 1)) {\n        // ...it is just the following half edge itself.\n        scenario = \"entire face 2\";\n        // TODO: Is this always taken care of by something else? See https://github.com/flatsurf/vue-flatsurf/issues/34.\n        C = layout(face[1], 1);\n        if (face[0] !== Math.min(...face))\n          return null;\n      } else {\n        // It's another connection. So the patch ends at the beginning of the\n        // next half edge, none of that half edge is in the patch, i.e., the\n        // third point of the patch must be on the other half edge of this\n        // face.\n        scenario = \"on previous half edge\";\n        for (const touch of touches) {\n          if (this.at(touch) !== 0) {\n            // TODO: Is this always taken care of by something else? See https://github.com/flatsurf/vue-flatsurf/issues/34.\n            C = layout(face[2], 1 - this.at(touch));\n            return null;\n          }\n        }\n      }\n    } else {\n      scenario = \"on following half edge\";\n      C = layout(face[1], this.at(touches[0]));\n    }\n\n    console.assert(!A.equalTo(B), `Patch of kind '%s' coming from the half edge %s has the same point twice A == B, i.e., %s == %s.`, scenario, halfEdge, A.toString(), B.toString());\n    console.assert(!A.equalTo(C), `Patch of kind '%s' coming from the half edge %s has the same point twice A == C, i.e., %s == %s.`, scenario, halfEdge, A.toString(), C.toString());\n    console.assert(!B.equalTo(C), `Patch of kind '%s' coming from the half edge %s has the same point twice B == C, i.e., %s == %s.`, scenario, halfEdge, B.toString(), C.toString());\n\n    return [A, B, C];\n  }\n\n  get triangles(): Point[][] {\n    const triangles = [];\n\n    for (const connection of this.component.perimeter) {\n      for (let i = 0; i < connection.touches.length; i+=2) {\n        const patch = this.patch(connection.touches[i], connection.touches[i + 1])\n        if (patch !== null)\n          triangles.push(patch);\n      }\n    }\n\n    for (const inside of this.component.inside) {\n      const patch = this.patchHalfEdge(inside);\n      if (patch != null)\n        triangles.push(patch);\n    }\n\n    return triangles;\n  }\n\n  get patches(): Point[][] {\n    const patches = [];\n    const triangles = [...this.triangles];\n\n    const epsilon = (Flatten.Utils as any).getTolerance();\n\n    // Glue triangle to ngon if possible.\n    const glue = (ngon: Point[], triangle: Point[]) => {\n      console.assert(triangle.length === 3);\n      for (const step of [1, 2]) {\n        for (const t of [0, 1, 2]) {\n          for (let n = 0; n < ngon.length; n++) {\n            if (triangle[t].equalTo(ngon[n], epsilon) && triangle[(t + step) % 3].equalTo(ngon[(n + 1) % ngon.length], epsilon)) {\n              // Add the third point of the triangle that gets glued to the ngon.\n              ngon.splice(n + 1, 0, triangle[(t + 2*step) % 3]);\n\n              // Simplify the ngon if it contains the same point twice.\n              for (let nn = 0; nn < ngon.length; nn++) {\n                if (ngon[nn].equalTo(ngon[(nn + 2) % ngon.length], epsilon)) {\n                  if (nn + 1 == ngon.length) {\n                    ngon.splice(0, 2);\n                  } else if (nn + 2 == ngon.length) {\n                    ngon.splice(0, 1);\n                    ngon.pop();\n                  } else\n                    ngon.splice(nn, 2);\n                  break;\n                }\n              }\n\n              return true;\n            }\n          }\n        }\n      }\n\n      return false;\n    };\n\n    while(triangles.length) {\n      // Create an ngon by gluing triangles that share two points.\n      let patch = triangles.pop()!;\n      for (let t = triangles.length; t--;) {\n        if (glue(patch, triangles[t])) {\n          triangles[t] = triangles[triangles.length - 1];\n          triangles.pop();\n          t = triangles.length;\n        }\n      }\n\n      patches.push(patch);\n    }\n\n    return patches;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FlowComponent.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FlowComponent.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FlowComponent.vue?vue&type=template&id=6e0e20fe&scoped=true&\"\nimport script from \"./FlowComponent.vue?vue&type=script&lang=ts&\"\nexport * from \"./FlowComponent.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FlowComponent.vue?vue&type=style&index=0&id=6e0e20fe&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6e0e20fe\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport FlatTriangulation from \"@/flatsurf/FlatTriangulation\";\nimport FlowComponent from \"@/flatsurf/FlowComponent\"\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Layout from \"@/layout/Layout\";\nimport VisualizationOptions from \"./options/VisualizationOptions\";\nimport Palette from \"@/Palette\";\nimport SVGExporter from \"@/export/SVGExporter\";\n\nimport FlatTriangulationComponent from \"@/components/flatsurf/FlatTriangulation.vue\";\nimport FlowComponentComponent from \"@/components/flatsurf/FlowComponent.vue\";\n\n@Component({\n  components: {\n    FlatTriangulationComponent,\n    FlowComponentComponent,\n  }\n})\nexport default class Flatsurf extends Vue {\n  @Prop({ required: true, type: Object }) triangulation!: FlatTriangulation;\n  @Prop({ required: true, type: Object }) layout!: Layout;\n  @Prop({ required: false, type: Object, default: null }) viewportCoordinateSystem!: CoordinateSystem | null;\n  @Prop({ required: false, type: Object, default: new VisualizationOptions() }) visualizationOptions!: VisualizationOptions;\n  // TODO: Filter depending on automorphisms, see https://github.com/flatsurf/vue-flatsurf/issues/33\n  @Prop({ required: false, default: () => [], type: Array }) flowComponents!: FlowComponent[];\n\n  get palette() {\n    return new Palette(this.flowComponents.length);\n  }\n\n  get svgCoordinateSystem() {\n    return this.viewportCoordinateSystem || this.triangulation.coordinateSystem;\n  }\n\n  async svg() {\n    await this.$nextTick();\n\n    const exporter = new SVGExporter(this.$el);\n    exporter.simplifyColors();\n    exporter.dropNonStandardStyles();\n    exporter.dropNonInkscapeStyles();\n    exporter.dropTrivialStyles();\n    exporter.dropRedundantStyles();\n    exporter.dropClasses();\n    exporter.dropPrefixedStyles();\n    exporter.dropInvisible();\n    exporter.dropInteractiveStyles();\n    exporter.dropCustomAttributes();\n    exporter.usePresentationAttributes();\n    exporter.inlineStyles();\n    return exporter.toString();\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Flatsurf.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Flatsurf.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Flatsurf.vue?vue&type=template&id=09451fa8&\"\nimport script from \"./Flatsurf.vue?vue&type=script&lang=ts&\"\nexport * from \"./Flatsurf.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\n\nimport Layout from \"@/layout/Layout\";\nimport Polygon from \"@/geometry/Polygon\";\nimport FlowComponent from \"@/flatsurf/FlowComponent\"\nimport FlatTriangulation from \"@/flatsurf/FlatTriangulation\";\nimport FlowConnection from \"@/flatsurf/FlowConnection\";\nimport VisualizationOptions from \"@/components/flatsurf/options/VisualizationOptions\";\nimport Vertical from \"@/flatsurf/Vertical\";\n\nimport wait from \"@/wait\";\n\nimport PanZoom from \"./PanZoom.vue\";\nimport Flatsurf from \"./flatsurf/Flatsurf.vue\";\nimport IViewer from \"./IViewer\";\n\n@Component({\n  components: {\n    PanZoom,\n    Flatsurf,\n  }\n})\nexport default class Viewer extends Vue implements IViewer {\n  @Prop({ required: true, type: Object }) triangulation!: FlatTriangulation;\n  @Prop({ required: false, default: null, type: Object }) vertical!: Vertical | null;\n  @Prop({ required: false, default: () => [], type: Array }) flowComponents!: FlowComponent[];\n  @Prop({ required: true, type: Object }) layout!: Layout;\n\n  protected visualizationOptions = new VisualizationOptions();\n\n  private focus: Polygon | null = null;\n\n  get idealCoordinateSystem() {\n    return this.vertical?.coordinateSystem || this.triangulation.coordinateSystem;\n  }\n\n  // TODO: This works around a flakiness of pan-zoom. Without this the focus is sometimes not recomputed correctly, see https://github.com/flatsurf/vue-flatsurf/issues/31\n  @Watch(\"idealCoordinateSystem\")\n  onCoordinateSystemChanged() {\n    this.$nextTick(() => {\n      this.focus = this.layout.hull;\n    });\n  }\n\n  public refocus(focus?: Polygon) {\n    if (focus == null)\n      focus = this.layout.hull;\n    if (this.focus == null || !this.focus.equalTo(focus))\n      this.focus = focus;\n  }\n\n  get visibleFlowComponents() {\n    return this.flowComponents.filter((component) =>\n      !component.perimeter.some((connection: FlowConnection) =>\n        ! this.layout.primary.includes(connection.connection.source) && !this.layout.primary.includes(connection.connection.target)\n    ))\n  }\n\n  @Watch(\"layout\", { immediate: true })\n  onLayoutChanged() {\n    if (this.focus == null)\n      this.refocus();\n  }\n\n  async svg() {\n    while (this.layout == null)\n      await wait(this, \"layout\");\n\n    await this.$nextTick();\n\n    return await (this.$refs.flatsurf as any).svg();\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Viewer.vue?vue&type=template&id=181b81ba&\"\nimport script from \"./Viewer.vue?vue&type=script&lang=ts&\"\nexport * from \"./Viewer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nexport class OperationAborted extends Error {}\n\nexport default class CancellationToken {\n  public cancellationRequested() {\n    return new Promise<boolean>((resolve, reject) => {\n      if (this.aborted) reject(new OperationAborted());\n      setTimeout(() => resolve(this.cancelled), 0);\n    });\n  }\n\n  public cancel() {\n    this.cancelled = true;\n  }\n\n  public abort() {\n    this.aborted = true;\n  }\n\n  private cancelled = false;\n  private aborted = false;\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nexport default class Progress {\n  constructor(name: string = \"\", steps: number = 0) {\n    this.name = name;\n    this.steps = steps;\n  }\n\n  public task(name: string, steps: number) {\n    this.steps += steps;\n    this.name = name;\n  }\n\n  public progress() {\n    this.step++;\n  }\n\n  public get stats(): { name: string, step?: number, steps?: number } {\n    return {\n      name: this.name,\n      step: (this.steps != null && this.step < this.steps) ? this.step : undefined,\n      steps: this.steps,\n    }\n  }\n\n  private step = 0;\n  private steps = 0;\n  private name: string;\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.cancellation != null && _vm.visible)?_c('v-overlay',{staticClass:\"loading-overlay\",attrs:{\"opacity\":.2,\"z-index\":0}},[_c('v-container',[_c('v-row',[_c('v-col',[_vm._v(\" \"+_vm._s(_vm.name)+\" \"),_c('v-progress-circular',{attrs:{\"indeterminate\":_vm.value == null,\"value\":_vm.value}})],1)],1),_c('v-row',[_c('v-col',[_c('v-btn',{attrs:{\"color\":\"error\",\"dark\":\"\",\"disabled\":_vm.cancellation.cancelled},on:{\"click\":function () { return _vm.cancellation.cancel(); }}},[_vm._v(\"Cancel\")])],1)],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport CancellationToken from \"../src/CancellationToken\";\nimport Progress from \"../src/Progress\";\n\n@Component\nexport default class Overlay extends Vue {\n  @Prop({required: true}) cancellation!: CancellationToken | null;\n  @Prop({required: true}) progress!: Progress | null;\n\n  visible = false;\n\n  @Watch(\"cancellation\", {immediate: true})\n  onCancellation(value: CancellationToken) {\n    if (value == null)\n      this.visible = false;\n    else\n      setTimeout(() => {\n        if (this.cancellation === value)\n          this.visible = true\n      }, 150);\n  }\n\n  get name() {\n    return this.progress!.stats.name;\n  }\n\n  get value() : number | null {\n    if (this.progress!.stats.step == null || this.progress!.stats.steps == null)\n      return null;\n    return this.progress!.stats.step / this.progress!.stats.steps * 100;\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Overlay.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Overlay.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Overlay.vue?vue&type=template&id=69084d4e&scoped=true&\"\nimport script from \"./Overlay.vue?vue&type=script&lang=ts&\"\nexport * from \"./Overlay.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Overlay.vue?vue&type=style&index=0&id=69084d4e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"69084d4e\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCol,VContainer,VOverlay,VProgressCircular,VRow})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.layout != null)?_c('g',[_vm._l((_vm.halfEdges),function(halfEdge){return _c('g',{key:halfEdge,staticClass:\"click-area\",on:{\"mousemove\":function (e) { return _vm.hover(halfEdge, e); },\"mouseleave\":function($event){return _vm.unhover(halfEdge)},\"click\":function($event){return _vm.glue(halfEdge)}}},[_c('segment-component',{attrs:{\"segment\":_vm.segment(halfEdge),\"svg\":_vm.svg}})],1)}),_vm._l((_vm.edges),function(edge){return _c('g',{key:edge.positive,staticClass:\"click-area\",on:{\"mousemove\":function (e) { return _vm.hover(edge, e); },\"mouseleave\":function($event){return _vm.unhover(edge)},\"click\":function($event){return _vm.glue(edge)}}},[_c('segment-component',{attrs:{\"segment\":_vm.segment(edge),\"svg\":_vm.svg}})],1)})],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport HalfEdge from \"@/flatsurf/HalfEdge\";\nimport Edge from \"@/flatsurf/Edge\";\nimport Automorphism from \"@/flatsurf/Automorphism\";\n\nexport default class LayoutOptions {\n  public constructor(glue?: (edge: Edge) => boolean | null, automorphisms?: Automorphism[]) {\n    this.glued = glue || (() => null);\n    this.automorphisms = automorphisms || [];\n  }\n\n  // Whether an HalfEdge should be visually glued (true), unglued (false) or\n  // whether this sholud be left to the implementation (null).\n  public glue(halfEdge: HalfEdge): boolean | null {\n    return this.glued(new Edge(halfEdge));\n  }\n\n  public orbit(halfEdge: HalfEdge): HalfEdge[] {\n    const orbit = [halfEdge];\n\n    for (let i = 0; i < orbit.length; i++) {\n      const preimage = orbit[i];\n      for (const automorphism of this.automorphisms) {\n        const image = automorphism.halfEdgeMap[preimage];\n        if (image != null && !orbit.includes(image))\n          orbit.push(image);\n      }\n    }\n\n    return orbit;\n  }\n\n  private readonly glued: (edge: Edge) => boolean | null;\n  private readonly automorphisms: Automorphism[];\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\n\nimport { mdiLinkOff, mdiLink, mdiAlert } from \"@mdi/js\";\n\nimport nop from \"lodash-es/noop\";\nimport clamp from \"lodash-es/clamp\";\nimport wait from \"@/wait\";\n\nimport SegmentComponent from \"@/components/svg/Segment.vue\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Layout from \"@/layout/Layout\";\nimport LayoutOptions from \"@/layout/LayoutOptions\";\nimport HalfEdge from \"@/flatsurf/HalfEdge\";\nimport VisualizationOptions from \"@/components/flatsurf/options/VisualizationOptions\";\nimport Point from \"@/geometry/Point\";\nimport Segment from \"@/geometry/Segment\";\nimport Polygon from \"@/geometry/Polygon\";\nimport Vector from \"@/geometry/Vector\";\nimport Edge from \"@/flatsurf/Edge\";\nimport IGlueInteraction, { GlueSelection } from \"@/components/interactions/IGlueInteraction\";\n\n@Component({\n  components: { SegmentComponent },\n})\nexport default class GlueInteraction extends Vue implements IGlueInteraction {\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n  @Prop({ required: true, type: Object }) layout!: Layout;\n  @Prop({required: true, type: Function}) relayout!: (layoutOptions?: LayoutOptions) => Promise<Layout>;\n  @Prop({required: true, type: Object }) options!: VisualizationOptions;\n  @Prop({required: false, default: () => null, type: Object}) focus!: Polygon | null;\n  @Prop({required: false, default: () => nop, type: Function}) refocus!: (focus: Polygon) => void;\n\n  glued: GlueSelection = {}\n\n  events: Array<{\n    kind: \"HOVER\",\n    id: number,\n    halfEdge: HalfEdge,\n    at: number\n  } | {\n    kind: \"GLUE\",\n    id: number,\n    edge: Edge\n  }> = [];\n\n  async glue(edge: Edge): Promise<void>;\n  async glue(edge: HalfEdge): Promise<void>;\n  async glue(halfEdge: Edge | HalfEdge) {\n    if (halfEdge instanceof Edge)\n      return await this.glue(halfEdge.positive);\n\n    const edge = new Edge(halfEdge);\n\n    const glued = {...this.glued};\n    if (glued[edge.positive] === undefined)\n      glued[edge.positive] = true;\n    else if (glued[edge.positive] === true)\n      glued[edge.positive] = false;\n    else\n      delete glued[edge.positive];\n\n    this.glued = glued;\n\n    console.assert(this.events.every((e) => e.kind !== \"GLUE\"), \"Overlapping glue events.\");\n\n    const ev = {\n      kind: \"GLUE\" as \"GLUE\",\n      id: Math.random(),\n      edge,\n    };\n\n    this.events = [...this.events];\n\n    if (this.glued[edge.positive] === true && this.layout.layout(edge.positive).inner)\n      return;\n    if (this.glued[edge.positive] === false && !this.layout.layout(edge.positive).inner)\n      return;\n\n    this.events.push(ev);\n\n    try {\n      const previousStart = this.svg.embed(this.layout.layout(halfEdge).segment.start);\n      const previousFocus = this.focus;\n\n      const layout = await this.reglue();\n\n      // TODO: Also don't do this if we cannot relate the coordinate systems before and after. We could possibly relate everything in the viewport coordinate system anyway. See https://github.com/flatsurf/vue-flatsurf/issues/36.\n      if (previousStart != null && previousFocus != null) {\n        // Move the viewport such that the selected half edge does not seem to move.\n        const shift = new Vector(\n            this.svg,\n            new Point(this.svg, previousStart.value),\n            layout.layout(halfEdge).segment.start);\n        this.refocus(previousFocus.translate(shift));\n      }\n    } finally {\n      setTimeout(() => {\n        this.events = this.events.filter((e) => e.id != ev.id);\n      }, 800);\n    }\n  }\n\n  async reglue() {\n    return this.relayout(new LayoutOptions(\n      (e: Edge) => this.glued[e.positive] === undefined ? null : this.glued[e.positive],\n      // TODO: Pass automorphisms here somehow. See https://github.com/flatsurf/vue-flatsurf/issues/33.\n      []));\n  }\n\n  get halfEdges() {\n    return this.layout.triangulation.halfEdges.filter((halfEdge) => !this.layout.layout(halfEdge).inner);\n  }\n\n  get edges() {\n    return this.layout.triangulation.edges.filter((edge) => this.layout.layout(edge.positive).inner);\n  }\n\n  segment(halfEdge: HalfEdge): Segment {\n    return this.layout!.layout(halfEdge).segment;\n  }\n\n  hover(halfEdge: Edge | HalfEdge, e: MouseEvent): void {\n    if (halfEdge instanceof Edge)\n      return this.hover(halfEdge.positive, e);\n\n    this.unhover();\n\n    this.events.push({\n      kind: \"HOVER\",\n      id: Math.random(),\n      halfEdge,\n      at: this.segment(halfEdge).relativize(this.toPoint(e)),\n    });\n  }\n\n  unhover(): void {\n    this.events = this.events.filter((e) => e.kind !== \"HOVER\");\n  }\n\n  @Watch(\"events\")\n  @Watch(\"layout\")\n  onEvent() {\n    const hover = this.events.some((e) => e.kind === \"HOVER\");\n    const glue = this.events.some((e) => e.kind === \"GLUE\");\n\n    for (const edge of this.layout.triangulation.edges) {\n      const icon = (() => {\n        if (hover || glue) {\n          if (this.glued[edge.positive] === undefined)\n            return null;\n          const glue = this.glued[edge.positive];\n          if (glue != this.layout.layout(edge.positive).inner)\n            return mdiAlert;\n          return glue ? mdiLink : mdiLinkOff;\n        } else {\n          return null;\n        }\n      })();\n\n      this.options.icon(edge.positive, icon);\n      this.options.icon(edge.negative, icon);\n      this.options.icon(edge, icon);\n\n      const indicator = (() => {\n        for (const e of this.events) {\n          if (e.kind === \"HOVER\") {\n            const at = clamp(e.at, 0, 1);\n            if (e.halfEdge === edge.positive)\n              return at;\n            if (e.halfEdge === edge.negative)\n              return 1 - at;\n          }\n        }\n        return null;\n      })();\n      this.options.indicate(edge.positive, indicator);\n      this.options.indicate(edge.negative, indicator == null ? null : 1 - indicator);\n\n      const selected = this.events.some((e) => e.kind === \"GLUE\" && e.edge.positive === edge.positive);\n\n      this.options.select(edge, selected);\n      this.options.select(edge.positive, selected);\n      this.options.select(edge.negative, selected);\n    }\n  }\n\n  toPoint(e: MouseEvent): Point {\n    let svg = this.$el;\n    while (svg.tagName !== \"svg\")\n      svg = svg.parentElement!;\n    return new Point(this.svg, e.clientX - svg.getBoundingClientRect().left, e.clientY - svg.getBoundingClientRect().top);\n  }\n\n  async query(when: \"now\" | \"changed\") {\n    if (when === \"changed\")\n      await wait(this, \"glued\");\n    return this.glued;\n  }\n\n  async force(glued: GlueSelection) {\n    this.glued = glued;\n    return await this.reglue();\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GlueInteraction.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GlueInteraction.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./GlueInteraction.vue?vue&type=template&id=b20b3038&scoped=true&\"\nimport script from \"./GlueInteraction.vue?vue&type=script&lang=ts&\"\nexport * from \"./GlueInteraction.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./GlueInteraction.vue?vue&type=style&index=0&id=b20b3038&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b20b3038\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.layout != null)?_c('g',{attrs:{\"tabindex\":\"0\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.edit(false)}}},[_c('g',{staticClass:\"path\"},[_c('g',_vm._l((_vm.controlPoints),function(point,i){return _c('point-component',{key:i,attrs:{\"svg\":_vm.svg,\"point\":_vm.fromPathPoint(point),\"radius\":3}})}),1),_c('g',_vm._l((_vm.path),function(segment,i){return _c('segment-component',{key:i,attrs:{\"svg\":_vm.svg,\"segment\":segment}})}),1)]),(_vm.editable)?_c('g',{on:{\"click\":function($event){return _vm.append()}}},[_c('g',{staticClass:\"preview\"},[(_vm.points.length !== 0)?_c('point-component',{attrs:{\"point\":_vm.fromPathPoint(_vm.cross(_vm.points[_vm.points.length - 1])),\"radius\":5,\"svg\":_vm.svg}}):_vm._e(),(_vm.nextSegment != null)?_c('segment-component',{attrs:{\"svg\":_vm.svg,\"segment\":_vm.nextSegment}}):_vm._e()],1),_c('g',{staticClass:\"select-half-edge\"},_vm._l((_vm.triangulation.halfEdges),function(halfEdge){return _c('g',{key:halfEdge,on:{\"mousemove\":function (e) { return _vm.hover(halfEdge, e); },\"mouseout\":_vm.unhover}},[_c('segment-component',{attrs:{\"svg\":_vm.svg,\"segment\":_vm.layout.layout(halfEdge).segment}})],1)}),0),_c('g',{staticClass:\"select-vertex\"},_vm._l((_vm.vertices),function(vertex,i){return _c('g',{key:i,on:{\"mousemove\":function (e) { return _vm.hover(vertex); },\"mouseout\":_vm.unhover}},[_c('point-component',{attrs:{\"point\":_vm.layout.layout(vertex[0]).segment.start,\"svg\":_vm.svg,\"radius\":20}})],1)}),0),_c('g',{staticClass:\"select-vertex\"},_vm._l((_vm.controlPoints),function(point,i){return _c('g',{key:i,on:{\"mousemove\":function (e) { return _vm.hover(point); },\"mouseout\":_vm.unhover}},[_c('point-component',{attrs:{\"svg\":_vm.svg,\"point\":_vm.fromPathPoint(point),\"radius\":20}})],1)}),0)]):_vm._e()]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('circle',{staticClass:\"point\",attrs:{\"cx\":_vm.coords[0],\"cy\":_vm.coords[1],\"r\":_vm.radius || 30}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport Pont from \"@/geometry/Point\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\n\n@Component\nexport default class Point extends Vue {\n  @Prop({ required: true, type: Object }) point!: Pont;\n  @Prop({required: false, type: Number, default: null}) radius!: number | null;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n\n  // For performance reasons we compute all coordinates at once since this\n  // gets called a lot.\n  get coords() {\n    const embedded = this.svg.embed(this.point);\n    return [embedded.x, embedded.y];\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Point.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Point.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Point.vue?vue&type=template&id=5fe1a75e&\"\nimport script from \"./Point.vue?vue&type=script&lang=ts&\"\nexport * from \"./Point.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* ******************************************************************************\n * Copyright (c) 2020-2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\n// Currently, HalfEdge is just a plain number since wrapping it into an object\n// makes our live much harder in several places, e.g., it cannot be used as a\n// key in an object anymore.\n\ntype HalfEdge = number;\n\nexport type HalfEdgeSchema = number;\n\nexport default HalfEdge;\n\nexport function isHalfEdge(x: any): x is HalfEdge {\n  return typeof(x) === \"number\";\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport noop from \"lodash-es/noop\";\nimport wait from \"@/wait\";\n\nimport PointComponent from \"@/components/svg/Point.vue\";\nimport SegmentComponent from \"@/components/svg/Segment.vue\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Layout from \"@/layout/Layout\";\nimport FlatTriangulation from \"@/flatsurf/FlatTriangulation\";\nimport VisualizationOptions from \"@/components/flatsurf/options/VisualizationOptions\";\nimport Point from \"@/geometry/Point\";\nimport Segment from \"@/geometry/Segment\";\nimport HalfEdge, { isHalfEdge } from \"@/flatsurf/HalfEdge\";\nimport IPathInteraction, { PathPoint } from \"@/components/interactions/IPathInteraction\";\n\n\n@Component({\n  components: { PointComponent, SegmentComponent },\n})\nexport default class PathInteraction extends Vue implements IPathInteraction {\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n  @Prop({ required: true, type: Object }) layout!: Layout;\n  @Prop({ required: true, type: Object }) triangulation!: FlatTriangulation;\n  @Prop({required: true, type: Object }) options!: VisualizationOptions;\n\n  // The path constructed so far, given by the points on the path.\n  public points: PathPoint[] = [];\n\n  // The point to be added to the path.\n  // For the purpose of previewing.\n  next: PathPoint | null = null;\n\n  editable: boolean = true;\n\n  // Make path editable.\n  edit(editable: boolean): void {\n    this.editable = editable;\n    this.next = null;\n  }\n\n  // Append a point to the path.\n  append(): void {\n    if (this.next !== null) {\n      this.points.push(this.next);\n      this.next = null;\n    }\n  }\n\n  // Preview the effect of adding item to the path.\n  hover(vertex: HalfEdge[]): void;\n  hover(halfEdge: HalfEdge, e: MouseEvent): void;\n  hover(face: HalfEdge[], e: MouseEvent): void;\n  hover(point: PathPoint): void;\n  hover(item: HalfEdge | HalfEdge[] | PathPoint, e?: MouseEvent): void {\n    if (!this.editable)\n      return;\n    \n    const next = this.toPathPoint(item, e);\n\n    this.next = null;\n\n    if (this.points.length === 0) {\n      this.next = this.cross(next);\n      return;\n    }\n\n    const previous = this.cross(this.points[this.points.length - 1]);\n    const segment = this.toSegment(this.cross(previous), next);\n\n    const sector = (vertex: HalfEdge[]) => [vertex[0], this.triangulation.vertices.image(vertex[vertex.length - 1])];\n\n    // Determine intersections of this segment with all outer half edges.\n    let intersections = this.triangulation.halfEdges\n      .filter((halfEdge) => !this.layout!.layout(halfEdge).inner)\n      .filter((halfEdge) => this.layout!.layout(halfEdge).segment.intersects(segment));\n\n    // Ignore half edges that we intersect at the starting point.\n    if (\"halfEdge\" in previous) {\n      intersections = intersections.filter((halfEdge) => halfEdge !== previous.halfEdge); \n    } else if (\"face\" in previous) {\n    } else {\n      const boundary = [sector(previous.vertex)[0], -sector(previous.vertex)[1]]\n      intersections = intersections.filter((halfEdge) => !boundary.includes(halfEdge));\n    }\n\n    // Ignore half edges that we intersect at the end point.\n    if (\"halfEdge\" in next) {\n      intersections = intersections.filter((halfEdge) => halfEdge !== next.halfEdge); \n    } else if (\"face\" in next) {\n    } else {\n      const boundary = [sector(next.vertex)[0], -sector(next.vertex)[1]]\n      intersections = intersections.filter((halfEdge) => !boundary.includes(halfEdge));\n    }\n\n    if (intersections.length !== 0) {\n      return;\n    }\n\n    if (segment.length < 1e-3) {\n      return;\n    }\n\n    // Check that the segment is on the interior of the polygon.\n    if (\"halfEdge\" in previous) {\n      if (this.layout!.layout(previous.halfEdge).inner)\n        noop();\n      else if (\"halfEdge\" in next && next.halfEdge === previous.halfEdge)\n        noop();\n      else if (\"vertex\" in next && sector(next.vertex)[0] === previous.halfEdge)\n        noop();\n      else if (\"vertex\" in next && sector(next.vertex)[1] === -previous.halfEdge)\n        noop();\n      else {\n        if (this.triangulation.vector(previous.halfEdge).angleTo(segment.tangentInStart) <= Math.PI) {\n          return;\n        }\n      }\n    } else if (\"face\" in previous) {\n    } else {\n      if (this.layout!.layout(previous.vertex[0]).inner)\n        noop();\n      else if (\"halfEdge\" in next && next.halfEdge === sector(previous.vertex)[0])\n        noop();\n      else if (\"halfEdge\" in next && next.halfEdge === -sector(previous.vertex)[1])\n        noop();\n      else if (\"vertex\" in next && sector(next.vertex)[0] == -sector(previous.vertex)[1])\n        noop();\n      else if (\"vertex\" in next && sector(next.vertex)[1] == -sector(previous.vertex)[0])\n        noop();\n      else {\n        const boundary = sector(previous.vertex).map((halfEdge) => this.triangulation.vector(halfEdge));\n        if (boundary[0].angleTo(boundary[1]) > boundary[0].angleTo(segment.tangentInStart)) {\n          return;\n        }\n      }\n    }\n\n    this.next = next;\n  }\n\n  // Clear path preview created by hover().\n  unhover(): void {\n    this.next = null;\n  }\n\n  // Return the segment to be added to the path.\n  get nextSegment(): Segment | null {\n    if (this.points.length === 0)\n      return null;\n    if (this.next == null)\n      return null;\n\n    return this.toSegment(this.points[this.points.length - 1], this.next);\n  }\n\n  // Return the visible vertices, represented by their outgoing half edges.\n  get vertices(): HalfEdge[][] {\n    const vertices: HalfEdge[][] = [];\n\n    const present = (source: HalfEdge) => vertices.filter((vertex) => vertex.includes(source)).length !== 0;\n    const vertex = (source: HalfEdge) => {\n      const vertex = [source];\n      while (true) {\n        const next = this.triangulation.vertices.image(vertex[vertex.length - 1]);\n        if (!this.layout!.layout(next).inner)\n          break;\n        if (next === source)\n          break;\n        vertex.push(next);\n      }\n      return vertex;\n    };\n\n    for (const source of this.triangulation.halfEdges) {\n      if (this.layout!.layout(source).inner)\n        continue;\n      if (present(source))\n        continue;\n      vertices.push(vertex(source));\n    }\n\n    for (const source of this.triangulation.halfEdges) {\n      if (present(source))\n        continue;\n      vertices.push(vertex(source));\n    }\n\n    return vertices;\n  }\n\n  // Return the visible half edges.\n  get halfEdges(): HalfEdge[] {\n    // TODO: Drop duplicates. See https://github.com/flatsurf/vue-flatsurf/issues/37.\n    return this.triangulation.halfEdges;\n  }\n\n  // Return the visible faces, represented by the half edges on their boundary.\n  get faces(): HalfEdge[][] {\n    return this.triangulation.faces.cycles;\n  }\n\n  // Return the line segments that make up this path.\n  get path(): Segment[] {\n    const path: Segment[] = [];\n\n    let previous: PathPoint | null = null;\n\n    for (let point of this.points) {\n      if (previous != null)\n        path.push(this.toSegment(previous, point));\n      previous = point;\n    }\n\n    return path;\n  }\n\n  // Return the end points that make up this path.\n  get controlPoints(): PathPoint[] {\n    const controlPoints: PathPoint[] = [];\n\n    for (let i = 0; i < this.points.length; i++) {\n      const point = this.points[i];\n      if (i === 0) {\n        controlPoints.push(this.cross(point)); \n      } else if (i === this.points.length - 1) {\n        controlPoints.push(point); \n      } else {\n        controlPoints.push(point);\n        if (this.cross(point) !== point)\n        controlPoints.push(this.cross(point)); \n      }\n    }\n\n    return controlPoints;\n  }\n\n  // Return the segment connection two poinst on the path.\n  toSegment(a: PathPoint, b: PathPoint) {\n    return new Segment(this.fromPathPoint(this.cross(a)), this.fromPathPoint(b));\n  }\n\n  // Return the location of the mouse pointer in SVG coordinates.\n  toPoint(e: MouseEvent): Point {\n    let svg = this.$el;\n    while (svg.tagName !== \"svg\")\n      svg = svg.parentElement!;\n    return new Point(this.svg, e.clientX - svg.getBoundingClientRect().left, e.clientY - svg.getBoundingClientRect().top);\n  }\n\n  // Return the location of the mouse pointer as a new point to append to the path.\n  toPathPoint(item: HalfEdge | HalfEdge[] | PathPoint, e?: MouseEvent): PathPoint {\n    if (isHalfEdge(item)) {\n      const halfEdge = item as HalfEdge;\n      const at = this.layout!.layout(halfEdge).segment.relativize(this.toPoint(e!));\n      return {halfEdge, at};\n    } else if (\"halfEdge\" in item || \"vertex\" in item || \"face\" in item) {\n      return item;\n    } else if (e === undefined) {\n      const vertex = item as HalfEdge[];\n      return { vertex };\n    } else {\n      const face = item as HalfEdge[];\n      console.assert(face.length >= 2);\n\n      const point = this.toPoint(e);\n      const segments = [\n        this.layout!.layout(face[0]).segment,\n        this.layout!.layout(face[1]).segment,\n      ];\n\n      return { face, at: [\n        segments[0].relativize(point),\n        segments[1].relativize(point),\n      ]};\n    }\n  }\n\n  // Return a point on the path as a location in the SVG coordinate system.\n  fromPathPoint(point: PathPoint): Point {\n    if (\"face\" in point) {\n      const boundary = point.face;\n      const at = point.at;\n      return this.layout!.layout(boundary[0]).segment.start\n        .translate(this.layout!.layout(boundary[0]).segment.tangentInStart.multiply(at[0]))\n        .translate(this.layout!.layout(boundary[1]).segment.tangentInStart.multiply(at[1]));\n    } else if (\"halfEdge\" in point) {\n      return this.layout!.layout(point.halfEdge).segment.at(point.at);\n    } else {\n      return this.layout!.layout(point.vertex[0]).segment.start;\n    }\n  }\n\n  cross(point: PathPoint): PathPoint {\n    if (\"halfEdge\" in point)\n      return {\n        halfEdge: -point.halfEdge,\n        at: 1 - point.at,\n      };\n    else\n      return point;\n  }\n\n  public async query(when: \"now\" | \"completed\" | \"changed\") {\n    if (when === \"completed\") {\n      while (this.editable === true)\n        await wait(this, \"editable\");\n    } else if (when === \"changed\") {\n      if (this.editable === false)\n        this.editable = true;\n      await wait(this, [\"editable\", \"path\"]);\n    }\n    return this.points;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PathInteraction.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PathInteraction.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PathInteraction.vue?vue&type=template&id=69dee478&scoped=true&\"\nimport script from \"./PathInteraction.vue?vue&type=script&lang=ts&\"\nexport * from \"./PathInteraction.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PathInteraction.vue?vue&type=style&index=0&id=69dee478&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"69dee478\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-bottom-navigation',{attrs:{\"color\":\"primary\",\"value\":_vm.$route.path,\"fixed\":\"\",\"app\":\"\"},on:{\"change\":function (path) { return _vm.$router.push({ path: path, query: _vm.$route.query }); }}},[_c('v-btn',{attrs:{\"value\":\"/edit\"}},[_c('span',[_vm._v(\"Surface\")]),_c('v-badge',{attrs:{\"value\":_vm.error != null,\"color\":\"error\",\"icon\":\"mdi-error\",\"overlap\":\"\"}},[_c('v-icon',[_vm._v(\"mdi-layers\")])],1)],1),_c('v-btn',{attrs:{\"value\":\"/view\"}},[_c('span',[_vm._v(\"Visualization\")]),_c('v-icon',[_vm._v(\"mdi-eye\")])],1),_c('v-btn',{attrs:{\"value\":\"/svg\"}},[_c('span',[_vm._v(\"SVG\")]),_c('v-icon',[_vm._v(\"mdi-svg\")])],1),_c('v-btn',{attrs:{\"value\":\"/widget\"}},[_c('span',[_vm._v(\"Widget\")]),_c('v-icon',[_vm._v(\"mdi-widgets\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\n\n@Component\nexport default class BottomNavigation extends Vue {\n  get error() {\n    return this.$store.state.error;\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BottomNavigation.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BottomNavigation.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./BottomNavigation.vue?vue&type=template&id=389f93e3&\"\nimport script from \"./BottomNavigation.vue?vue&type=script&lang=ts&\"\nexport * from \"./BottomNavigation.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBadge } from 'vuetify/lib/components/VBadge';\nimport { VBottomNavigation } from 'vuetify/lib/components/VBottomNavigation';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBadge,VBottomNavigation,VBtn,VIcon})\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Provide, Vue } from \"vue-property-decorator\";\n\nimport PanZoom from \"@/components/PanZoom.vue\";\nimport Viewer from \"@/components/Viewer.vue\";\nimport CancellationToken from \"@/CancellationToken\";\nimport Progress from \"@/Progress\";\nimport Overlay from \"./Overlay.vue\";\nimport GlueInteraction from \"@/components/interactions/GlueInteraction.vue\";\nimport PathInteraction from \"@/components/interactions/PathInteraction.vue\";\nimport BottomNavigation from \"./BottomNavigation.vue\";\n\n@Component({\n  components: {\n    BottomNavigation,\n    Overlay,\n    PanZoom,\n    Viewer,\n    GlueInteraction,\n    PathInteraction\n  }\n})\nexport default class App extends Vue {\n  overlay = null as CancellationToken | null;\n  progress = null as Progress | null;\n\n  @Provide()\n  async run(callback: (cancellation: CancellationToken, progress: Progress) => Promise<void>) {\n    // Any previous run is supposedly cancelled already so we can safely throw\n    // away its cancellation and progress tokens.\n    const cancellation = new CancellationToken();\n    this.overlay = cancellation;\n    this.progress = new Progress();\n    try {\n      await callback(this.overlay, this.progress);\n    } finally {\n      if (this.overlay === cancellation)\n        // We came here because this process completed. Remove the overlay.\n        this.overlay = null;\n    }\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=e8df219a&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=e8df219a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e8df219a\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VMain } from 'vuetify/lib/components/VMain';\ninstallComponents(component, {VApp,VContainer,VMain})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$store.state.triangulation != null)?_c('layouter',{attrs:{\"triangulation\":_vm.$store.state.triangulation,\"layout\":_vm.$store.state.layout},on:{\"layout\":_vm.layoutChanged},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar layout = ref.layout;\nvar relayout = ref.relayout;\nreturn [_c('viewer-component',{staticClass:\"surface\",attrs:{\"triangulation\":_vm.$store.state.triangulation,\"flow-components\":_vm.flowComponents,\"layout\":layout,\"vertical\":_vm.$store.state.vertical},scopedSlots:_vm._u([{key:\"interaction\",fn:function(ref){\nvar svg = ref.svg;\nvar triangulation = ref.triangulation;\nvar options = ref.options;\nvar refocus = ref.refocus;\nvar focus = ref.focus;\nreturn [_c('triangulation-interaction',{attrs:{\"layout\":layout,\"options\":options,\"outer\":_vm.show.includes('outer'),\"inner\":_vm.show.includes('triangulation')}}),_c('label-interaction',{attrs:{\"layout\":layout,\"options\":options,\"outer\":_vm.show.includes('outer-labels'),\"numeric\":_vm.show.includes('numeric-labels')}}),(_vm.action == 'path')?_c('path-interaction',{attrs:{\"layout\":layout,\"svg\":svg,\"triangulation\":triangulation,\"options\":options}}):(_vm.action == 'glue')?_c('glue-interaction',{attrs:{\"relayout\":relayout,\"svg\":svg,\"options\":options,\"focus\":focus,\"refocus\":refocus,\"layout\":layout}}):_vm._e()]}}],null,true)})]}}],null,false,374882210)}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport VisualizationOptions from \"../flatsurf/options/VisualizationOptions\";\nimport Layout from \"@/layout/Layout\";\n\n@Component\nexport default class TriangulationInteraction extends Vue {\n  @Prop({ required: true, type: Object }) options!: VisualizationOptions;\n  @Prop({ required: true, type: Object }) layout!: Layout;\n  @Prop({ required: false, default: true, type: Boolean }) outer!: boolean;\n  @Prop({ required: false, default: false, type: Boolean }) inner!: boolean;\n\n  @Watch(\"layout\", {immediate: true})\n  @Watch(\"outer\")\n  @Watch(\"inner\")\n  @Watch(\"options\")\n  resetVisiblity() {\n    for (const halfEdge of this.layout.triangulation.halfEdges)\n      this.options.show(halfEdge, this.layout.layout(halfEdge).inner ? false : this.outer);\n\n    for (const edge of this.layout.triangulation.edges)\n      this.options.show(edge, this.layout.layout(edge.positive).inner ? this.inner : false);\n  }\n\n  render() {}\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport VisualizationOptions from \"../flatsurf/options/VisualizationOptions\";\nimport Layout from \"@/layout/Layout\";\nimport Edge from \"@/flatsurf/Edge\";\n\nfunction nextLabel(label: string) {\n  let chars = label.split('').map((c) => c.charCodeAt(0) - 65);\n  chars[chars.length - 1]++;\n  for (let i = chars.length; i--;) {\n    if (chars[i] == 25) {\n      chars[i] = 0;\n      if (i == 0)\n        chars = [0, ...chars];\n      else\n        chars[i - 1]++;\n    }\n  }\n\n  return chars.map((code) => String.fromCharCode(65 + code)).join('');\n}\n\n@Component\nexport default class TriangulationVisibilityInteraction extends Vue {\n  @Prop({ required: true, type: Object }) options!: VisualizationOptions;\n  @Prop({ required: true, type: Object }) layout!: Layout;\n  @Prop({ required: false, default: false, type: Boolean }) outer!: boolean;\n  @Prop({ required: false, default: false, type: Boolean }) numeric!: boolean;\n\n  @Watch(\"layout\", {immediate: true})\n  @Watch(\"outer\")\n  @Watch(\"numeric\")\n  @Watch(\"options\")\n  resetVisiblity() {\n    let alpha = \"A\";\n\n    for (const halfEdge of this.layout.triangulation.halfEdges) {\n      if (halfEdge < 0)\n        continue;\n\n      const edge = new Edge(halfEdge);\n\n      if (this.outer) {\n        if (!this.layout.layout(halfEdge).inner) {\n          // TODO: Do not give labels to invisible components. See https://github.com/flatsurf/vue-flatsurf/issues/36.\n          this.options.label(halfEdge, alpha);\n          this.options.label(-halfEdge, alpha);\n          this.options.label(edge, null);\n          alpha = nextLabel(alpha);\n          continue;\n        }\n      }\n      if (this.numeric) {\n        this.options.label(halfEdge, String(halfEdge));\n        this.options.label(-halfEdge, this.layout.layout(halfEdge).inner ? null : String(-halfEdge));\n        this.options.label(edge, String(edge.positive));\n        continue;\n      }\n\n      this.options.label(halfEdge, null);\n      this.options.label(-halfEdge, null);\n      this.options.label(edge, null);\n    }\n  }\n\n  render() {}\n}\n\n","/* ******************************************************************************\n * Copyright (c) 2020-2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport minBy from \"lodash-es/minBy\";\nimport Flatten from \"@flatten-js/core\";\n\nimport Vector from \"@/geometry/Vector\";\nimport HalfEdge from \"@/flatsurf/HalfEdge\";\nimport HalfEdgeLayout from './HalfEdgeLayout';\nimport Point from '@/geometry/Point';\nimport Segment from '@/geometry/Segment';\nimport Polygon from '@/geometry/Polygon';\nimport FlatTriangulation from '@/flatsurf/FlatTriangulation';\nimport Progress from \"@/Progress\";\nimport CancellationToken from \"@/CancellationToken\";\nimport LayoutOptions from \"./LayoutOptions\";\n\nexport default class CellLayout {\n  // Create a layout by walking the boundary of the cell in counter-clockwise\n  // order on the inside and summing up the associated vectors to determine the\n  // segment corresponding to each half edge.\n  public constructor(surface: FlatTriangulation, cell: HalfEdge[], origin: Point);\n  public constructor(surface: FlatTriangulation, layout: Record<HalfEdge, HalfEdgeLayout>);\n  public constructor(surface: FlatTriangulation, cell: HalfEdge[] | Record<HalfEdge, HalfEdgeLayout>, origin?: Point) {\n    this.surface = surface;\n\n    if (cell instanceof Array) {\n      console.assert(origin);\n      let end = origin!;\n      this.layout = Object.fromEntries(cell.map((he: HalfEdge) => {\n        const start = end;\n        end = end.translate(surface.vector(he));\n        return [he, {\n          segment: new Segment(origin!.parent, start.value, end.value),\n          inner: false,\n        }];\n      }));\n    } else {\n      this.layout = cell;\n    }\n\n    this.boundingRectArea = this.polygon.boundingRect.area();\n  }\n\n  // Translate this cell so that half edge coincides with segment.\n  translate(delta: Vector): void;\n  translate(halfEdge: HalfEdge, segment: Segment): void;\n  translate(halfEdge: HalfEdge | Vector, segment?: Segment) {\n    if (halfEdge instanceof Vector) {\n      const delta = halfEdge as Vector;\n      this.halfEdges.map((halfEdge) => {\n        this.layout[halfEdge].segment = this.layout[halfEdge].segment.translate(delta);\n      });\n    } else {\n      const before = this.layout[halfEdge].segment;\n      const delta = new Vector(before.parent, before.start, segment!.start);\n      \n      // https://github.com/alexbol99/flatten-js/pull/75\n      console.assert(before.translate(delta).equalTo(segment!, (Flatten.Utils as any).getTolerance()));\n\n      this.translate(delta);\n    }\n  }\n\n  // Return the HalfEdges that glue correctly between this layout and `other`\n  // currently or return an empty array if something overlaps or touches\n  // incorrectly.\n  glues(other: CellLayout): HalfEdge[] {\n    const otherPolygon = other.polygon;\n\n    const glued = [];\n\n    for (const halfEdge of this.halfEdges) {\n      if (this.layout[halfEdge].segment.intersects(otherPolygon)) {\n        // This half edge and the other cell have at least a point in common.\n\n        if (this.layout[halfEdge].segment.middle.on(otherPolygon)) {\n          if (other.halfEdges.includes(-halfEdge)) {\n            // If this half edge has its counterpart in the other cell, then we\n            // want them to be glued correctly.\n            if (this.layout[halfEdge].segment.equalTo(other.layout[-halfEdge].segment.reverse(), Flatten.Utils.getTolerance())) {\n              glued.push(halfEdge);\n              continue;\n            } else {\n              return [];\n            }\n          } else {\n            return [];\n          }\n        }\n\n        const intersections = this.layout[halfEdge].segment.intersect(otherPolygon);\n        if (intersections.length === 0) {\n          // This half edge is completely inside the other cell.\n          return [];\n        }\n\n        // Check whether the intersection points are consistently glued.\n        for (const intersection of intersections) {\n          const touchConsistent = (source: HalfEdge) => {\n              for (const vertex of this.surface.vertices.cycles) {\n                if (!vertex.includes(source)) continue;\n\n                for (const touch of vertex) {\n                  if (!other.halfEdges.includes(touch)) continue;\n\n                  if (intersection.equalTo(other.layout[touch].segment.start, Flatten.Utils.getTolerance()))\n                    return true;\n              }\n            };\n            // Not touching at a vertex or not touching at this vertex.\n            return false;\n          }\n\n          if (intersection.equalTo(this.layout[halfEdge].segment.start, Flatten.Utils.getTolerance())) {\n            // The cells touch at the starting point of this half edge. We\n            // check whether what it touches is the same vertex in the other\n            // cell.\n            if (!touchConsistent(halfEdge)) {\n              return [];\n            }\n          }\n          else if (intersection.equalTo(this.layout[halfEdge].segment.end, Flatten.Utils.getTolerance())) {\n            // The cells touch at the end point of this half edge. We\n            // check whether what it touches is the same vertex in the other\n            // cell.\n            if (!touchConsistent(-halfEdge)) {\n              return [];\n            }\n          } else {\n            // The cells touch not at the end point of a half edge.\n            return [];\n          }\n        }\n      }\n    }\n\n    console.assert(glued.length !== 0);\n    return glued;\n  }\n\n  touches(other: CellLayout): HalfEdge[] {\n    const otherPolygon = other.polygon;\n    return this.halfEdges.filter((halfEdge) => {\n      return !this.layout[halfEdge].inner && this.layout[halfEdge].segment.intersects(otherPolygon) || this.layout[halfEdge].segment.touch(otherPolygon);\n    });\n  }\n\n  // Return the boundary polygon of this cell (might not be connected.)\n  get polygon(): Polygon {\n    const polygon = new Flatten.Polygon();\n    this.boundaries.map((boundary) => {\n      polygon.addFace(boundary.map((side) => this.parent.embed(this.layout[side].segment).value));\n    });\n    return new Polygon(this.parent, polygon);\n  }\n\n  // Return the boundary polygons of this cell.\n  get boundaries() : HalfEdge[][] {\n    let pending = new Set(this.halfEdges.filter((he) => !this.layout[he].inner));\n    const boundaries = [] as HalfEdge[][];\n\n    while(pending.size) {\n      let start!: number;\n      for (start of pending) break;\n\n      const boundary = [] as HalfEdge[];\n      let next = start;\n      do {\n        next = -next;\n\n        do {\n          next = this.surface.vertices.preimage(next);\n        } while(this.layout[next].inner);\n\n        boundary.push(next);\n        pending.delete(next);\n      } while (next !== start);\n\n      boundaries.push(boundary);\n    }\n\n    return boundaries;\n  }\n\n  private get parent() {\n    return this.layout[this.halfEdges[0]].segment.parent;\n  }\n\n  public toString(): string {\n    return \"{\" + this.halfEdges.map((he) => `${he}: ${this.layout[he].segment}`).join(\", \") + \"}\";\n  }\n\n  get halfEdges(): HalfEdge[] {\n    return Object.keys(this.layout).map((halfEdge) => Number(halfEdge));\n  }\n\n  // Merge two of the cells by identifying two opposite half edges.\n  static async merge(cells: CellLayout[], options: LayoutOptions, cache: Record<HalfEdge, number | null> = {}, cancellation = new CancellationToken(), _progress = new Progress()): Promise<CellLayout[]> {\n    if (cells.length === 1)\n      return cells;\n\n    let scores = [] as {\n      glue: HalfEdge;\n      cell: CellLayout;\n      other: CellLayout;\n      score: number;\n    }[];\n\n    for (const cell of cells) {\n      if (await cancellation.cancellationRequested())\n        break;\n\n      for (const glue of cell.halfEdges) {\n        if (glue < 0) continue;\n        const other = cells.find((other) => other.halfEdges.includes(-glue))!;\n        if (cell === other) continue;\n\n        if (cache[glue] === undefined) {\n          cache[glue] = CellLayout.score(glue, cell, other, cells, options);\n        }\n\n        const score = cache[glue];\n\n        if (score === null)\n          continue;\n\n        scores.push({ glue, cell, other, score });\n      }\n    }\n\n    if (scores.length === 0)\n      return cells;\n\n    const best = minBy(scores, 'score')!;\n\n    for (const glue of options.orbit(best.glue)) {\n      const cell = cells.find((cell) => cell.halfEdges.includes(glue))!;\n      const other = cells.find((other) => other.halfEdges.includes(-glue))!;\n\n      console.assert(cell !== other);\n\n      const glued = CellLayout.glue(glue, cell, other);\n      glued.primary = best.glue === glue;\n\n      for (let halfEdge of glued.halfEdges) {\n        delete cache[halfEdge];\n        delete cache[-halfEdge];\n      }\n\n      cells = [glued, ...cells.filter((c) => c !== cell && c !== other)];\n    }\n\n    return cells;\n  }\n\n  // Return the score (lower is better) to the visual glueing of glue of\n  // parent and -glue of other; or return null if the two cannot be glued\n  // without overlaps in the resulting picture.\n  private static score(glue: HalfEdge, parent: CellLayout, other: CellLayout, cells: CellLayout[], options: LayoutOptions): number | null {\n    console.assert(parent.halfEdges.includes(glue) && other.halfEdges.includes(-glue));\n    console.assert(!parent.layout[glue].inner)\n    console.assert(!other.layout[-glue].inner);\n\n    if (!parent.primary)\n      return null;\n\n    other.translate(-glue, parent.layout[glue].segment.reverse());\n    const glues = parent.glues(other);\n    if (glues.length === 0) {\n      return null;\n    }\n\n    // Forbid gluing cells that contain identified edges.\n    for (const preimage of parent.halfEdges)\n      for (const image of options.orbit(preimage))\n        if (other.halfEdges.includes(image))\n          return null;\n\n    // Prefer edges that have been explicitly selected.\n    if (options.glue(glue) === true)\n      return -1;\n    if (options.glue(glue) === false)\n      return null;\n\n    // Prefer edges that keep Delaunay cells intact.\n    {\n      const ca = parent.surface.vector(glue);\n      const cb = parent.surface.vector(parent.surface.vertices.image(glue));\n      const dc = parent.surface.vector(-parent.surface.faces.image(-glue));\n\n      const a = dc.add(ca);\n      const b = dc.add(cb);\n      const c = dc;\n\n      const det = (x00: number, x01: number, x02: number, x10: number, x11: number, x12: number, x20: number, x21: number, x22: number) => x00 * (x11 * x22 - x12 * x21) - x10 * (x01 * x22 - x21 * x02) + x20 * (x01 * x12 - x11 * x02);\n\n      const delaunay = det(a.x, a.y, a.x * a.x + a.y * a.y, b.x, b.y, b.x * b.x + b.y * b.y, c.x, c.y, c.x * c.x + c.y * c.y);\n\n      if (Math.abs(delaunay) < (Flatten.Utils as any).getTolerance())\n        return 0;\n    }\n\n    // Prefer edges that minimize the area of a bounding rectangle of the glued area.\n    {\n      const ungluedArea = cells.map((cell) => cell.boundingRectArea).reduce((a, b) => a+b);\n\n      const gluedArea = cells.filter((cell) => cell !== parent && cell !== other).map((cell) => cell.boundingRectArea).reduce((a, b) => a + b, 0)\n        + CellLayout.glue(glues, parent, other).boundingRectArea;\n\n      return gluedArea / ungluedArea;\n    }\n  }\n\n  // Glue parent and other along glue and return the resulting cell.\n  private static glue(glues: HalfEdge[], parent: CellLayout, other: CellLayout): CellLayout;\n  private static glue(glue: HalfEdge, parent: CellLayout, other: CellLayout): CellLayout;\n  private static glue(glues: HalfEdge | HalfEdge[], parent: CellLayout, other: CellLayout): CellLayout {\n    if (!Array.isArray(glues)) {\n      other.translate(-glues, parent.layout[glues].segment.reverse());\n      return CellLayout.glue(parent.glues(other), parent, other);\n    } else {\n      console.assert(glues.length !== 0)\n      other.translate(-glues[0], parent.layout[glues[0]].segment.reverse());\n\n      // https://github.com/alexbol99/flatten-js/pull/75\n      for (const glue of glues)\n        console.assert(parent.layout[glue].segment.equalTo(other.layout[-glue].segment.reverse(), (Flatten.Utils as any).getTolerance()));\n\n      console.assert(Object.keys(parent.layout).every((he) => !other.layout.hasOwnProperty(he)));\n      console.assert(Object.keys(other.layout).every((he) => !parent.layout.hasOwnProperty(he)));\n\n      const glued = {...parent.layout, ...other.layout};\n      for (const glue of glues) {\n        glued[glue] = { segment: parent.layout[glue].segment, inner: true }\n        glued[-glue] = { segment: other.layout[-glue].segment, inner: true }\n      }\n\n      return new CellLayout(parent.surface, glued);\n    }\n  }\n\n  private static packable(cells: CellLayout[], packed: CellLayout[]) {\n    for (let i = 0; i < cells.length; i++) {\n      const cell = cells[i];\n\n      // Find a half edge that connects to something that has already been packed\n      for (let halfEdge of cell.halfEdges) {\n        for (let cell_ of packed) {\n          for (let halfEdge_ of cell_.halfEdges) {\n            if (halfEdge === -halfEdge_) {\n              cells.splice(i, 1);\n              return {\n                cell,\n                cell_,\n                halfEdge,\n                halfEdge_,\n              };\n            }\n          }\n        }\n      }\n    }\n\n    throw Error(`Could not find any cells packable with ${packed} among ${cells}`);\n  }\n\n  static pack(cells: CellLayout[], progress: Progress): CellLayout[] {\n    if (cells.length <= 1) return cells;\n\n    const packed = [cells.pop()] as CellLayout[];\n\n    progress.task(\"Packing Cells\", cells.length);\n\n    while (cells.length) {\n      progress.progress();\n\n      const {cell, cell_, halfEdge, halfEdge_} = CellLayout.packable(cells, packed)!;\n\n      const segment = cell.layout[halfEdge].segment;\n      const segment_ = cell_.layout[halfEdge_].segment.reverse();\n\n      cell.translate(halfEdge, segment_);\n\n      // We determine a distance that two edges have to be separated from each\n      // other to make it clear that they are not glued.\n      // The idea is that the entire `packed` presumably fills a notebook cell,\n      // probably 800 x 600 pixels. A gap of 10 pixels (minus SVG borders) can\n      // easily be recognized as a gap.\n      const screen = packed.map((cell) => cell.polygon.value.box).reduce((box, cell) => box.merge(cell), new Flatten.Box());\n      const step = Math.max((screen.xmax - screen.xmin) / 800, (screen.ymax - screen.ymin) / 600) * 10;\n      const delta = segment.tangentInStart.rotate90CCW().multiply(step);\n      \n      do {\n        cell.translate(delta);\n      } while(packed.some((other) => cell.touches(other).length))\n\n      packed.push(cell);\n    }\n\n    return packed;\n  }\n\n  protected readonly surface: FlatTriangulation;\n  protected readonly boundingRectArea: number;\n  public readonly layout: Record<HalfEdge, HalfEdgeLayout>;\n  // Whether this cell should be consider the primary copy of cells that are\n  // isomorphic under the automorphisms.\n  public primary: boolean = true;\n}\n","/* ******************************************************************************\n * Copyright (c) 2020-2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Point from '@/geometry/Point';\nimport FlatTriangulation from \"@/flatsurf/FlatTriangulation\";\nimport HalfEdge from '@/flatsurf/HalfEdge';\nimport CellLayout from './CellLayout';\nimport HalfEdgeLayout from './HalfEdgeLayout';\nimport Box from '@/geometry/Box';\nimport Polygon from \"@/geometry/Polygon\";\nimport CancellationToken from \"@/CancellationToken\";\nimport Progress from \"@/Progress\";\nimport LayoutOptions from './LayoutOptions';\n\nexport default class Layout {\n  private constructor(triangulation: FlatTriangulation, options: LayoutOptions) {\n    this.triangulation = triangulation;\n    this.options = options;\n    this.primary = [];\n  }\n\n  public static async layout(triangulation: FlatTriangulation, options: LayoutOptions, cancellation = new CancellationToken(), progress = new Progress()) {\n    const layout = new Layout(triangulation, options);\n    await layout.recompute(cancellation, progress);\n    return layout;\n  }\n\n  private async recompute(cancellation: CancellationToken, progress: Progress) {\n    // Layout Algorithm:\n    // (1) Start from elementary cells, i.e., triangular faces.\n    // (2) Greedily glue any two cells as long as no overlap is produced,\n    //     prefering metrics such as the gluing that minimizes the area of a\n    //     bounding rectangle.\n    // (3) Pack the resulting cells into a box by randomly aligning\n    //     corresponding half edges to create a single polygon (with self intersections)\n    //     and move the pieces away from each other orthogonally until no overlaps\n    //     happen anymore.\n\n    // (1) Elementary Cells\n    if (this.triangulation.halfEdges.length === 0) {\n      this.halfEdges = {};\n      return;\n    }\n\n    const origin = new Point(this.triangulation.vector(this.triangulation.halfEdges[0]).parent, 0, 0);\n    let cells = this.triangulation.faces.cycles.map((face) => new CellLayout(this.triangulation, face, origin));\n\n    // (2) Glue Cells\n    progress.task(\"Gluing Cells\", cells.length - 1);\n    const cache = {};\n    for (const _ of Array(cells.length - 1)) {\n      progress.progress();\n      cells = await CellLayout.merge(cells, this.options, cache, cancellation, progress);\n    }\n\n    // (3) Pack Cells\n    cells = CellLayout.pack(cells.filter((cell) => cell.primary), progress);\n\n    this.halfEdges = Object.assign({}, ...cells.map((cell) => cell.layout));\n    this.primary = cells.filter((cell) => cell.primary).map((cell) => cell.halfEdges).flat();\n\n    for (const he of this.triangulation.halfEdges) {\n      if (this.options.glue(he) === true && !this.layout(he).inner)\n        console.log(`Half edge ${he} should be visually glued in the layout but this was not possible.`);\n      if (this.options.glue(he) === false && this.layout(he).inner)\n        console.error(`Half edge ${he} should not be visually glued in the layout but it is.`);\n    }\n  }\n\n  public layout(halfEdge: HalfEdge): HalfEdgeLayout & { primary: boolean } {\n    return {\n      ...this.halfEdges[halfEdge],\n      primary: this.primary.includes(halfEdge),\n    };\n  }\n\n  public get hull(): Polygon {\n    return Polygon.convexHull(this.primary.map((halfEdge) => [this.halfEdges[halfEdge].segment.start, this.halfEdges[halfEdge].segment.end]).flat());\n  }\n\n  public get bbox(): Box {\n    return Box.bbox(this.primary.map((halfEdge) => this.halfEdges[halfEdge].segment));\n  }\n\n  public readonly triangulation: FlatTriangulation;\n  private readonly options: LayoutOptions;\n  private halfEdges!: Record<HalfEdge, HalfEdgeLayout>;\n  // Which half edges should be considered the primary copies of half edges\n  // identified by the automorphisms.\n  public primary!: HalfEdge[];\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport { Component, Inject, Prop, Vue, Watch } from \"vue-property-decorator\";\n\nimport wait from \"@/wait\";\n\nimport FlatTriangulation from \"@/flatsurf/FlatTriangulation\";\nimport Layout from \"@/layout/Layout\";\nimport CancellationToken, {OperationAborted} from \"@/CancellationToken\";\nimport Progress from \"@/Progress\";\nimport LayoutOptions from \"@/layout/LayoutOptions\";\nimport Automorphism from \"@/flatsurf/Automorphism\";\n\nasync function runSilently(callback: (cancellation: CancellationToken, progress: Progress) => Promise<void>) {\n  await callback(new CancellationToken(), new Progress());\n}\n\n@Component\nexport default class Layouter extends Vue {\n  @Prop({ required: true, type: Object }) triangulation!: FlatTriangulation;\n  @Prop({ required: false, type: Array, default: () => [] }) automorphisms!: Automorphism[];\n  @Prop({ required: false, type: Object, default: null }) layout!: Layout | null;\n\n  options: LayoutOptions = new LayoutOptions();\n  effectiveLayout: Layout | null = null;\n\n  @Inject({ from: 'run', default: () => runSilently })\n  run!: (callback: (cancellation: CancellationToken, progress: Progress) => Promise<void>) => Promise<void>;\n\n  render() {\n    if (this.effectiveLayout != null && this.$scopedSlots.default != null) {\n      return this.$scopedSlots.default({\n        layout: this.effectiveLayout,\n        relayout: this.relayout,\n      });\n    }\n  }\n\n  private pendingRelayout = new CancellationToken();\n\n  async relayout(layoutOptions?: LayoutOptions): Promise<Layout> {\n    if (layoutOptions === undefined) {\n      if (this.effectiveLayout != null)\n        return this.effectiveLayout;\n      layoutOptions = new LayoutOptions(() => null, this.automorphisms);\n    }\n\n    this.options = layoutOptions;\n\n    this.pendingRelayout.abort();\n    await this.run(async (cancellation, progress) => {\n      this.pendingRelayout = cancellation;\n      try {\n        this.effectiveLayout = await Layout.layout(this.triangulation, this.options, cancellation, progress);\n      } catch (e) {\n        if (e instanceof OperationAborted) return;\n        throw e;\n      }\n    });\n\n    this.$emit(\"layout\", this.effectiveLayout);\n    return this.effectiveLayout!;\n  }\n\n  @Watch(\"triangulation\", { immediate: true })\n  onSurfaceChanged() {\n    this.effectiveLayout = this.layout;\n    this.relayout();\n  }\n\n  public async query(when: \"now\" | \"changed\") {\n    if (when === \"changed\")\n      await wait(this, \"effectiveLayout\");\n    return this.effectiveLayout;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport ViewerComponent from \"@/components/Viewer.vue\";\nimport GlueInteraction from \"@/components/interactions/GlueInteraction.vue\";\nimport PathInteraction from \"@/components/interactions/PathInteraction.vue\";\nimport TriangulationInteraction from \"@/components/interactions/TriangulationInteraction\";\nimport LabelInteraction from \"@/components/interactions/LabelInteraction\";\nimport Layouter from \"@/components/Layouter\";\nimport Layout from \"@/layout/Layout\";\n\n@Component({\n  components: {\n    ViewerComponent,\n    GlueInteraction,\n    PathInteraction,\n    TriangulationInteraction,\n    LabelInteraction,\n    Layouter,\n  }\n})\nexport default class Viewer extends Vue {\n  @Prop({ required: true, type: String }) action!: string;\n  @Prop({ required: true, type: Array }) show!: string[];\n\n  get flowComponents() {\n    if (this.show.includes('flow-components'))\n      return this.$store.state.flowComponents;\n    return [];\n  }\n\n  layoutChanged(layout: Layout) {\n    this.$store.commit('layout', { layout });\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Viewer.vue?vue&type=template&id=3b8bdf4e&scoped=true&\"\nimport script from \"./Viewer.vue?vue&type=script&lang=ts&\"\nexport * from \"./Viewer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Viewer.vue?vue&type=style&index=0&id=3b8bdf4e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3b8bdf4e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-speed-dial',{attrs:{\"top\":\"\",\"left\":\"\",\"fixed\":\"\",\"direction\":\"bottom\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(){return [_c('v-btn',{attrs:{\"color\":_vm.showActions ? 'secondary' : 'primary',\"fab\":\"\",\"small\":\"\"}},[(_vm.showActions)?_c('v-icon',[_vm._v(\"mdi-close\")]):_c('v-icon',[_vm._v(_vm._s(_vm.actions[_vm.action]))])],1)]},proxy:true}]),model:{value:(_vm.showActions),callback:function ($$v) {_vm.showActions=$$v},expression:\"showActions\"}},_vm._l((Object.entries(_vm.actions)),function(ref){\nvar action = ref[0];\nvar icon = ref[1];\nreturn _c('div',{key:action},[_c('v-btn',{attrs:{\"color\":\"primary\",\"small\":\"\",\"fab\":\"\"},on:{\"click\":function($event){return _vm.goto(action)}}},[_c('v-icon',[_vm._v(_vm._s(icon))])],1)],1)}),0),_c('v-speed-dial',{attrs:{\"top\":\"\",\"right\":\"\",\"fixed\":\"\",\"direction\":\"bottom\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(){return [_c('v-btn',{attrs:{\"color\":_vm.showParts ? 'secondary' : 'primary',\"fab\":\"\",\"small\":\"\"}},[(_vm.showParts)?_c('v-icon',[_vm._v(\"mdi-close\")]):_c('v-icon',[_vm._v(\"mdi-eye\")])],1)]},proxy:true}]),model:{value:(_vm.showParts),callback:function ($$v) {_vm.showParts=$$v},expression:\"showParts\"}},_vm._l((Object.entries(_vm.parts)),function(ref){\nvar part = ref[0];\nvar icon = ref[1];\nreturn _c('div',{key:part},[_c('v-btn',{attrs:{\"color\":_vm.show.includes(part) ? 'primary' : 'secondary',\"small\":\"\",\"fab\":\"\"},on:{\"click\":function($event){return _vm.goto(undefined, part)}}},[_c('v-icon',[_vm._v(_vm._s(icon))])],1)],1)}),0)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\n@Component\nexport default class ViewerMenu extends Vue {\n  showActions = false;\n  showParts = false;\n\n  @Prop({ required: true, type: String }) action!: string;\n  @Prop({ required: true, type: Array }) show!: string[];\n\n  actions = {\n    'glue': 'mdi-link-variant',\n    'path': 'mdi-map-marker-path',\n    'view': 'mdi-hand-back-right-outline',\n  }\n\n  parts = {\n    'outer': 'mdi-border-all-variant',\n    'triangulation': 'mdi-triforce',\n    'flow-components': 'mdi-waves-arrow-up',\n    'numeric-labels': 'mdi-numeric',\n    'outer-labels': 'mdi-alphabetical',\n  }\n\n  goto(action?: string, part?: string) {\n    let show = [...this.show];\n    if (part != null) {\n      if (show.includes(part))\n        show = show.filter((p) => p != part);\n      else\n        show.push(part);\n    }\n      \n    this.$router.replace({\n      path: this.$route.path,\n      query: {\n        ...this.$route.query,\n        action: action || this.action,\n        show\n      }})\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ViewerMenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ViewerMenu.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ViewerMenu.vue?vue&type=template&id=7882159d&\"\nimport script from \"./ViewerMenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./ViewerMenu.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSpeedDial } from 'vuetify/lib/components/VSpeedDial';\ninstallComponents(component, {VBtn,VIcon,VSpeedDial})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',[_c('v-textarea',{staticClass:\"editor\",attrs:{\"label\":\"Surface Description (YAML)\",\"error-messages\":_vm.error,\"filled\":\"\",\"rows\":_vm.raw.split('\\n').length},model:{value:(_vm.raw),callback:function ($$v) {_vm.raw=$$v},expression:\"raw\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\n\n@Component\nexport default class Editor extends Vue {\n  get error() {\n    return this.$store.state.error;\n  }\n\n  get raw() {\n    return this.$store.state.raw;\n  }\n\n  set raw(raw: string) {\n    this.$store.dispatch(\"reset\", {raw});\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Editor.vue?vue&type=template&id=db891704&scoped=true&\"\nimport script from \"./Editor.vue?vue&type=script&lang=ts&\"\nexport * from \"./Editor.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Editor.vue?vue&type=style&index=0&id=db891704&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"db891704\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VCard,VTextarea})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-navigation-drawer',{attrs:{\"permanent\":\"\",\"app\":\"\"}},[_c('v-list',{attrs:{\"nav\":\"\",\"dense\":\"\"}},[_c('v-list-item',[_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\" PREDEFINED SURFACES \")])],1)],1),_c('v-list-item-group',{attrs:{\"color\":\"primary\"},model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}},_vm._l((Object.keys(_vm.predefined)),function(name){return _c('v-list-item',{key:name,attrs:{\"value\":name,\"disabled\":_vm.selected == name}},[_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(name)}})],1)],1)}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default \"vertices:\\n- - 1\\n  - -3\\n  - 2\\n  - -1\\n  - 3\\n  - -2\\nvectors:\\n  1:\\n    x: 0.0\\n    y: -1.7320508075688772\\n  2:\\n    x: 1.5\\n    y: 0.8660254037844386\\n  3:\\n    x: -1.5\\n    y: 0.8660254037844386\\ncomponents:\\n- cylinder: true\\n  perimeter:\\n  - source: 3\\n    target: -3\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -1.5\\n      y: 0.8660254037844386\\n    crossings: []\\n    touches:\\n    - halfEdge: 3\\n      index: 0\\n    - halfEdge: -3\\n      index: 1\\n  - source: 1\\n    target: -1\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.0\\n      y: -1.7320508075688772\\n    crossings: []\\n    touches:\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: -1\\n      index: 1\\n  - source: -3\\n    target: 3\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 1.5\\n      y: -0.8660254037844386\\n    crossings: []\\n    touches:\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 3\\n      index: 1\\n  - source: -1\\n    target: 1\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.0\\n      y: 1.7320508075688772\\n    crossings: []\\n    touches:\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 1\\n      index: 1\\n  inside:\\n  - 1\\n  - -1\\n  - 2\\n  - -2\\n  - 3\\n  - -3\\n\";","export default \"vertices:\\n- - 1\\n  - -3\\n  - -9\\n  - 6\\n  - -7\\n  - 4\\n- - -1\\n  - -5\\n  - 9\\n  - -8\\n  - 7\\n  - 2\\n- - -2\\n  - -6\\n  - 5\\n  - -4\\n  - 8\\n  - 3\\nvectors:\\n  1:\\n    x: 1.0\\n    y: 0.0\\n  2:\\n    x: -0.5\\n    y: 0.8660254037844386\\n  3:\\n    x: -0.5\\n    y: -0.8660254037844386\\n  4:\\n    x: 0.5\\n    y: -0.8660254037844386\\n  5:\\n    x: 0.5\\n    y: 0.8660254037844386\\n  6:\\n    x: -1.0\\n    y: 0.0\\n  7:\\n    x: 0.5\\n    y: 0.8660254037844386\\n  8:\\n    x: -1.0\\n    y: 0.0\\n  9:\\n    x: 0.5\\n    y: -0.8660254037844386\\ncomponents:\\n- cylinder: true\\n  perimeter:\\n  - source: -9\\n    target: 4\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -1.5\\n      y: 0.8660254037844386\\n    crossings:\\n    - halfEdge: -5\\n      at: 0.5\\n    touches:\\n    - halfEdge: -9\\n      index: 0\\n    - halfEdge: -5\\n      index: 1\\n    - halfEdge: 5\\n      index: 0\\n    - halfEdge: 4\\n      index: 1\\n  - source: -7\\n    target: -3\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.0\\n      y: -1.7320508075688772\\n    crossings:\\n    - halfEdge: -8\\n      at: 0.5\\n    touches:\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: -8\\n      index: 1\\n    - halfEdge: 8\\n      index: 0\\n    - halfEdge: -3\\n      index: 1\\n  - source: 4\\n    target: -9\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 1.5\\n      y: -0.8660254037844386\\n    crossings:\\n    - halfEdge: 5\\n      at: 0.5\\n    touches:\\n    - halfEdge: 4\\n      index: 0\\n    - halfEdge: 5\\n      index: 1\\n    - halfEdge: -5\\n      index: 0\\n    - halfEdge: -9\\n      index: 1\\n  - source: -3\\n    target: -7\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.0\\n      y: 1.7320508075688772\\n    crossings:\\n    - halfEdge: 8\\n      at: 0.5\\n    touches:\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 8\\n      index: 1\\n    - halfEdge: -8\\n      index: 0\\n    - halfEdge: -7\\n      index: 1\\n  inside:\\n  - 1\\n  - -1\\n  - 2\\n  - -2\\n  - 3\\n  - -3\\n  - 4\\n  - -4\\n  - 6\\n  - -6\\n  - 7\\n  - -7\\n  - 9\\n  - -9\\n\";","export default \"vertices:\\n- - 1\\n  - -3\\n  - -9\\n  - -11\\n  - 14\\n  - -15\\n  - 12\\n  - 6\\n  - -7\\n  - 4\\n- - -1\\n  - -5\\n  - 9\\n  - -8\\n  - -14\\n  - 13\\n  - -12\\n  - 10\\n  - 7\\n  - 2\\n- - -2\\n  - -6\\n  - -13\\n  - 11\\n  - 5\\n  - -4\\n  - -10\\n  - 15\\n  - 8\\n  - 3\\nvectors:\\n  1:\\n    x: 1.0\\n    y: 0.0\\n  2:\\n    x: -0.5\\n    y: 0.36327126400268045\\n  3:\\n    x: -0.5\\n    y: -0.36327126400268045\\n  4:\\n    x: 0.5\\n    y: -0.36327126400268045\\n  5:\\n    x: 0.5\\n    y: 0.36327126400268045\\n  6:\\n    x: -0.19098300562505258\\n    y: -0.5877852522924731\\n  7:\\n    x: -0.30901699437494745\\n    y: 0.9510565162951535\\n  8:\\n    x: -0.19098300562505258\\n    y: 0.5877852522924731\\n  9:\\n    x: -0.30901699437494745\\n    y: -0.9510565162951535\\n  10:\\n    x: 0.19098300562505258\\n    y: 0.5877852522924731\\n  11:\\n    x: 0.19098300562505258\\n    y: -0.5877852522924731\\n  12:\\n    x: -0.8090169943749475\\n    y: -0.5877852522924731\\n  13:\\n    x: 0.6180339887498949\\n    y: 0.0\\n  14:\\n    x: -0.8090169943749475\\n    y: 0.5877852522924731\\n  15:\\n    x: 0.6180339887498949\\n    y: 0.0\\ncomponents:\\n- cylinder: true\\n  perimeter:\\n  - source: 5\\n    target: 3\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.0\\n      y: 0.7265425280053609\\n    crossings:\\n    - halfEdge: -1\\n      at: 0.5\\n    touches:\\n    - halfEdge: 5\\n      index: 0\\n    - halfEdge: -1\\n      index: 1\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: 3\\n      index: 1\\n  - source: 8\\n    target: 11\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: -0.6909830056250525\\n      y: 0.2245139882897927\\n    crossings:\\n    - halfEdge: 9\\n      at: 0.5\\n    touches:\\n    - halfEdge: 8\\n      index: 0\\n    - halfEdge: 9\\n      index: 1\\n    - halfEdge: -9\\n      index: 0\\n    - halfEdge: 11\\n      index: 1\\n  - source: -6\\n    target: -2\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -1.118033988749895\\n      y: 0.36327126400268045\\n    crossings:\\n    - halfEdge: 12\\n      at: 0.7639320225002103\\n    - halfEdge: -10\\n      at: 0.6909830056250525\\n    - halfEdge: -7\\n      at: 0.7639320225002103\\n    touches:\\n    - halfEdge: -6\\n      index: 0\\n    - halfEdge: 12\\n      index: 1\\n    - halfEdge: -12\\n      index: 0\\n    - halfEdge: -10\\n      index: 1\\n    - halfEdge: 10\\n      index: 0\\n    - halfEdge: -7\\n      index: 1\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -2\\n      index: 0\\n  - source: 3\\n    target: 5\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.0\\n      y: -0.7265425280053609\\n    crossings:\\n    - halfEdge: 1\\n      at: 0.5\\n    touches:\\n    - halfEdge: 3\\n      index: 0\\n    - halfEdge: 1\\n      index: 1\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 5\\n      index: 1\\n  - source: 11\\n    target: 8\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.6909830056250525\\n      y: -0.2245139882897927\\n    crossings:\\n    - halfEdge: -9\\n      at: 0.5\\n    touches:\\n    - halfEdge: 11\\n      index: 0\\n    - halfEdge: -9\\n      index: 1\\n    - halfEdge: 9\\n      index: 0\\n    - halfEdge: 8\\n      index: 1\\n  - source: -10\\n    target: -4\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 1.118033988749895\\n      y: -0.36327126400268045\\n    crossings:\\n    - halfEdge: -12\\n      at: 0.7639320225002103\\n    - halfEdge: -6\\n      at: 0.6909830056250525\\n    - halfEdge: 7\\n      at: 0.7639320225002103\\n    touches:\\n    - halfEdge: -10\\n      index: 0\\n    - halfEdge: -12\\n      index: 1\\n    - halfEdge: 12\\n      index: 0\\n    - halfEdge: -6\\n      index: 1\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: 7\\n      index: 1\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: -4\\n      index: 0\\n  inside:\\n  - 2\\n  - -2\\n  - 3\\n  - -3\\n  - 4\\n  - -4\\n  - 5\\n  - -5\\n  - 8\\n  - -8\\n  - 11\\n  - -11\\n  - 13\\n  - -13\\n  - 14\\n  - -14\\n  - 15\\n  - -15\\n- cylinder: true\\n  perimeter:\\n  - source: -2\\n    target: -4\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 1.8090169943749475\\n      y: -0.13875727571288776\\n    crossings:\\n    - halfEdge: 7\\n      at: 0.3503729060226986\\n    - halfEdge: 10\\n      at: 0.5393446629166316\\n    - halfEdge: -12\\n      at: 0.5\\n    - halfEdge: -6\\n      at: 0.46065533708336837\\n    - halfEdge: 7\\n      at: 0.6496270939773015\\n    touches:\\n    - halfEdge: -2\\n      index: 0\\n    - halfEdge: 7\\n      index: 2\\n    - halfEdge: -7\\n      index: 3\\n    - halfEdge: 10\\n      index: 2\\n    - halfEdge: -10\\n      index: 1\\n    - halfEdge: -12\\n      index: 2\\n    - halfEdge: 12\\n      index: 1\\n    - halfEdge: -6\\n      index: 2\\n    - halfEdge: 6\\n      index: 1\\n    - halfEdge: 7\\n      index: 4\\n    - halfEdge: -7\\n      index: 1\\n    - halfEdge: -4\\n      index: 1\\n  - source: -4\\n    target: -10\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -1.118033988749895\\n      y: 0.36327126400268045\\n    crossings:\\n    - halfEdge: -7\\n      at: 0.2360679774997897\\n    - halfEdge: 6\\n      at: 0.30901699437494745\\n    - halfEdge: 12\\n      at: 0.2360679774997897\\n    touches:\\n    - halfEdge: -4\\n      index: 2\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 7\\n      index: 5\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: -6\\n      index: 3\\n    - halfEdge: 12\\n      index: 0\\n    - halfEdge: -12\\n      index: 3\\n    - halfEdge: -10\\n      index: 0\\n  - source: -4\\n    target: -2\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -1.8090169943749475\\n      y: 0.13875727571288776\\n    crossings:\\n    - halfEdge: -7\\n      at: 0.3503729060226986\\n    - halfEdge: 6\\n      at: 0.5393446629166316\\n    - halfEdge: 12\\n      at: 0.5\\n    - halfEdge: -10\\n      at: 0.46065533708336837\\n    - halfEdge: -7\\n      at: 0.6496270939773015\\n    touches:\\n    - halfEdge: -4\\n      index: 0\\n    - halfEdge: -7\\n      index: 2\\n    - halfEdge: 7\\n      index: 3\\n    - halfEdge: 6\\n      index: 2\\n    - halfEdge: -6\\n      index: 1\\n    - halfEdge: 12\\n      index: 2\\n    - halfEdge: -12\\n      index: 1\\n    - halfEdge: -10\\n      index: 2\\n    - halfEdge: 10\\n      index: 1\\n    - halfEdge: -7\\n      index: 4\\n    - halfEdge: 7\\n      index: 1\\n    - halfEdge: -2\\n      index: 1\\n  - source: -2\\n    target: -6\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 1.118033988749895\\n      y: -0.36327126400268045\\n    crossings:\\n    - halfEdge: 7\\n      at: 0.2360679774997897\\n    - halfEdge: 10\\n      at: 0.30901699437494745\\n    - halfEdge: -12\\n      at: 0.2360679774997897\\n    touches:\\n    - halfEdge: -2\\n      index: 2\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -7\\n      index: 5\\n    - halfEdge: 10\\n      index: 0\\n    - halfEdge: -10\\n      index: 3\\n    - halfEdge: -12\\n      index: 0\\n    - halfEdge: 12\\n      index: 3\\n    - halfEdge: -6\\n      index: 0\\n  inside: []\\n\";","export default \"vertices:\\n- - 1\\n  - -3\\n  - -4\\n  - -9\\n  - 8\\n  - -7\\n  - 9\\n  - 5\\n  - 2\\n  - -1\\n  - 3\\n  - -2\\n  - -6\\n  - -8\\n  - 7\\n  - 6\\n  - -5\\n  - 4\\nvectors:\\n  1:\\n    x: -0.6909830056250525\\n    y: 0.2245139882897927\\n  2:\\n    x: 0.6909830056250525\\n    y: -0.9510565162951535\\n  3:\\n    x: 0.0\\n    y: 0.7265425280053609\\n  4:\\n    x: -0.6909830056250525\\n    y: 0.9510565162951535\\n  5:\\n    x: -0.4270509831248423\\n    y: -0.5877852522924731\\n  6:\\n    x: 1.118033988749895\\n    y: -0.36327126400268045\\n  7:\\n    x: 0.4270509831248423\\n    y: -0.5877852522924731\\n  8:\\n    x: 0.6909830056250525\\n    y: 0.2245139882897927\\n  9:\\n    x: -1.118033988749895\\n    y: 0.36327126400268045\\ncomponents:\\n- cylinder: true\\n  perimeter:\\n  - source: 8\\n    target: -8\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.6909830056250525\\n      y: 0.2245139882897927\\n    crossings: []\\n    touches:\\n    - halfEdge: 8\\n      index: 0\\n    - halfEdge: -8\\n      index: 1\\n  - source: -6\\n    target: 6\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -1.118033988749895\\n      y: 0.36327126400268045\\n    crossings: []\\n    touches:\\n    - halfEdge: -6\\n      index: 0\\n    - halfEdge: 6\\n      index: 0\\n  - source: -8\\n    target: 8\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.6909830056250525\\n      y: -0.2245139882897927\\n    crossings: []\\n    touches:\\n    - halfEdge: -8\\n      index: 0\\n    - halfEdge: 8\\n      index: 1\\n  - source: -9\\n    target: 9\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 1.118033988749895\\n      y: -0.36327126400268045\\n    crossings: []\\n    touches:\\n    - halfEdge: -9\\n      index: 0\\n    - halfEdge: 9\\n      index: 0\\n  inside:\\n  - -6\\n  - 7\\n  - -7\\n  - 8\\n  - -8\\n  - -9\\n- cylinder: true\\n  perimeter:\\n  - source: -5\\n    target: 5\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.4270509831248423\\n      y: 0.5877852522924731\\n    crossings: []\\n    touches:\\n    - halfEdge: -5\\n      index: 0\\n    - halfEdge: 5\\n      index: 1\\n  - source: 9\\n    target: -9\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -1.118033988749895\\n      y: 0.36327126400268045\\n    crossings: []\\n    touches:\\n    - halfEdge: 9\\n      index: 0\\n    - halfEdge: -9\\n      index: 0\\n  - source: 1\\n    target: -1\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: -0.6909830056250525\\n      y: 0.2245139882897927\\n    crossings: []\\n    touches:\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: -1\\n      index: 1\\n  - source: 5\\n    target: -5\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.4270509831248423\\n      y: -0.5877852522924731\\n    crossings: []\\n    touches:\\n    - halfEdge: 5\\n      index: 0\\n    - halfEdge: -5\\n      index: 1\\n  - source: 6\\n    target: -6\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 1.118033988749895\\n      y: -0.36327126400268045\\n    crossings: []\\n    touches:\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: -6\\n      index: 0\\n  - source: -1\\n    target: 1\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.6909830056250525\\n      y: -0.2245139882897927\\n    crossings: []\\n    touches:\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 1\\n      index: 1\\n  inside:\\n  - 1\\n  - -1\\n  - 2\\n  - -2\\n  - 3\\n  - -3\\n  - 4\\n  - -4\\n  - 5\\n  - -5\\n  - 6\\n  - 9\\n\";","export default \"vertices:\\n- - 1\\n  - -3\\n  - -9\\n  - -15\\n  - 12\\n  - 6\\n  - -7\\n  - -13\\n  - 10\\n  - 4\\n- - -1\\n  - -5\\n  - -12\\n  - 11\\n  - -10\\n  - 14\\n  - 9\\n  - -8\\n  - 7\\n  - 2\\n- - -2\\n  - -6\\n  - 5\\n  - -4\\n  - -11\\n  - 15\\n  - -14\\n  - 13\\n  - 8\\n  - 3\\nvectors:\\n  1:\\n    x: 1.0\\n    y: 0.0\\n  2:\\n    x: -0.19098300562505258\\n    y: 0.5877852522924731\\n  3:\\n    x: -0.8090169943749475\\n    y: -0.5877852522924731\\n  4:\\n    x: 0.8090169943749475\\n    y: -0.5877852522924731\\n  5:\\n    x: 0.19098300562505258\\n    y: 0.5877852522924731\\n  6:\\n    x: -1.0\\n    y: 0.0\\n  7:\\n    x: 0.8090169943749475\\n    y: 0.5877852522924731\\n  8:\\n    x: -0.5\\n    y: 0.36327126400268045\\n  9:\\n    x: -0.30901699437494745\\n    y: -0.9510565162951535\\n  10:\\n    x: 0.30901699437494745\\n    y: -0.9510565162951535\\n  11:\\n    x: 0.5\\n    y: 0.36327126400268045\\n  12:\\n    x: -0.8090169943749475\\n    y: 0.5877852522924731\\n  13:\\n    x: 0.30901699437494745\\n    y: 0.9510565162951535\\n  14:\\n    x: -0.6180339887498949\\n    y: 0.0\\n  15:\\n    x: 0.30901699437494745\\n    y: -0.9510565162951535\\ncomponents:\\n- cylinder: true\\n  perimeter:\\n  - source: -8\\n    target: 8\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.5\\n      y: -0.36327126400268045\\n    crossings: []\\n    touches:\\n    - halfEdge: -8\\n      index: 0\\n    - halfEdge: 8\\n      index: 1\\n  - source: 13\\n    target: -5\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -0.5\\n      y: 1.5388417685876268\\n    crossings:\\n    - halfEdge: -7\\n      at: 0.6180339887498949\\n    - halfEdge: 6\\n      at: 0.6180339887498949\\n    touches:\\n    - halfEdge: 13\\n      index: 0\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: -6\\n      index: 0\\n    - halfEdge: -5\\n      index: 0\\n  - source: 2\\n    target: -2\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: -0.19098300562505258\\n      y: 0.5877852522924731\\n    crossings: []\\n    touches:\\n    - halfEdge: 2\\n      index: 0\\n    - halfEdge: -2\\n      index: 1\\n  - source: 8\\n    target: -8\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.5\\n      y: 0.36327126400268045\\n    crossings: []\\n    touches:\\n    - halfEdge: 8\\n      index: 0\\n    - halfEdge: -8\\n      index: 1\\n  - source: 9\\n    target: 5\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 0.5\\n      y: -1.5388417685876268\\n    crossings:\\n    - halfEdge: -3\\n      at: 0.6180339887498949\\n    - halfEdge: 1\\n      at: 0.6180339887498949\\n    touches:\\n    - halfEdge: 9\\n      index: 0\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 3\\n      index: 0\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 5\\n      index: 0\\n  - source: -2\\n    target: 2\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.19098300562505258\\n      y: -0.5877852522924731\\n    crossings: []\\n    touches:\\n    - halfEdge: -2\\n      index: 0\\n    - halfEdge: 2\\n      index: 1\\n  inside:\\n  - 2\\n  - -2\\n  - 5\\n  - -5\\n  - 8\\n  - -8\\n- cylinder: true\\n  perimeter:\\n  - source: -14\\n    target: 14\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.6180339887498949\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: -14\\n      index: 0\\n    - halfEdge: 14\\n      index: 1\\n  - source: -10\\n    target: 10\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: -0.30901699437494745\\n      y: 0.9510565162951535\\n    crossings: []\\n    touches:\\n    - halfEdge: -10\\n      index: 0\\n    - halfEdge: 10\\n      index: 1\\n  - source: -15\\n    target: 15\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: -0.30901699437494745\\n      y: 0.9510565162951535\\n    crossings: []\\n    touches:\\n    - halfEdge: -15\\n      index: 0\\n    - halfEdge: 15\\n      index: 1\\n  - source: 5\\n    target: 9\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -0.5\\n      y: 1.5388417685876268\\n    crossings:\\n    - halfEdge: -1\\n      at: 0.38196601125010515\\n    - halfEdge: 3\\n      at: 0.38196601125010515\\n    touches:\\n    - halfEdge: 5\\n      index: 0\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: 3\\n      index: 0\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 9\\n      index: 0\\n  - source: 14\\n    target: -14\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.6180339887498949\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: 14\\n      index: 0\\n    - halfEdge: -14\\n      index: 1\\n  - source: 15\\n    target: -15\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.30901699437494745\\n      y: -0.9510565162951535\\n    crossings: []\\n    touches:\\n    - halfEdge: 15\\n      index: 0\\n    - halfEdge: -15\\n      index: 1\\n  - source: 10\\n    target: -10\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.30901699437494745\\n      y: -0.9510565162951535\\n    crossings: []\\n    touches:\\n    - halfEdge: 10\\n      index: 0\\n    - halfEdge: -10\\n      index: 1\\n  - source: -5\\n    target: 13\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 0.5\\n      y: -1.5388417685876268\\n    crossings:\\n    - halfEdge: -6\\n      at: 0.38196601125010515\\n    - halfEdge: 7\\n      at: 0.38196601125010515\\n    touches:\\n    - halfEdge: -5\\n      index: 0\\n    - halfEdge: -6\\n      index: 0\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 13\\n      index: 0\\n  inside:\\n  - 4\\n  - -4\\n  - 9\\n  - -9\\n  - 10\\n  - -10\\n  - 11\\n  - -11\\n  - 12\\n  - -12\\n  - 13\\n  - -13\\n  - 14\\n  - -14\\n  - 15\\n  - -15\\n\";","export default \"vertices:\\n- - 1\\n  - -3\\n  - -5\\n  - -11\\n  - 9\\n  - 8\\n  - -7\\n  - 6\\n- - -1\\n  - 4\\n  - 3\\n  - -2\\n  - -8\\n  - -10\\n  - 5\\n  - -4\\n  - -6\\n  - 12\\n  - 11\\n  - 10\\n  - -9\\n  - -12\\n  - 7\\n  - 2\\nvectors:\\n  1:\\n    x: -0.19098300562505258\\n    y: 0.5877852522924731\\n  2:\\n    x: 0.0\\n    y: -1.1755705045849463\\n  3:\\n    x: 0.19098300562505258\\n    y: 0.5877852522924731\\n  4:\\n    x: 1.8090169943749475\\n    y: -0.5877852522924731\\n  5:\\n    x: -1.618033988749895\\n    y: 1.1755705045849463\\n  6:\\n    x: 1.618033988749895\\n    y: 0.0\\n  7:\\n    x: -0.5\\n    y: 0.36327126400268045\\n  8:\\n    x: 0.5\\n    y: -1.5388417685876268\\n  9:\\n    x: -0.6180339887498949\\n    y: 0.0\\n  10:\\n    x: 1.118033988749895\\n    y: -1.5388417685876268\\n  11:\\n    x: -0.5\\n    y: -0.36327126400268045\\n  12:\\n    x: -1.118033988749895\\n    y: -0.36327126400268045\\ncomponents:\\n- cylinder: true\\n  perimeter:\\n  - source: -7\\n    target: 7\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.5\\n      y: -0.36327126400268045\\n    crossings: []\\n    touches:\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 7\\n      index: 1\\n  - source: -12\\n    target: -3\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -0.5\\n      y: 1.5388417685876268\\n    crossings:\\n    - halfEdge: -6\\n      at: 0.7639320225002103\\n    - halfEdge: -4\\n      at: 0.7639320225002103\\n    touches:\\n    - halfEdge: -12\\n      index: 0\\n    - halfEdge: -6\\n      index: 0\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: -4\\n      index: 0\\n    - halfEdge: 4\\n      index: 0\\n    - halfEdge: -3\\n      index: 0\\n  - source: 1\\n    target: -1\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: -0.19098300562505258\\n      y: 0.5877852522924731\\n    crossings: []\\n    touches:\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: -1\\n      index: 1\\n  - source: 7\\n    target: -7\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.5\\n      y: 0.36327126400268045\\n    crossings: []\\n    touches:\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -7\\n      index: 1\\n  - source: 8\\n    target: -8\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 0.5\\n      y: -1.5388417685876268\\n    crossings: []\\n    touches:\\n    - halfEdge: 8\\n      index: 0\\n    - halfEdge: -8\\n      index: 0\\n  - source: -1\\n    target: 1\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.19098300562505258\\n      y: -0.5877852522924731\\n    crossings: []\\n    touches:\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 1\\n      index: 1\\n  inside:\\n  - 1\\n  - -1\\n  - 2\\n  - -2\\n  - 3\\n  - -3\\n  - 7\\n  - -7\\n  - 8\\n- cylinder: true\\n  perimeter:\\n  - source: -9\\n    target: 9\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.6180339887498949\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: -9\\n      index: 0\\n    - halfEdge: 9\\n      index: 1\\n  - source: -11\\n    target: 11\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: -0.6180339887498949\\n      y: 1.902113032590307\\n    crossings:\\n    - halfEdge: 12\\n      at: 0.5\\n    - halfEdge: -6\\n      at: 0.38196601125010515\\n    - halfEdge: -4\\n      at: 0.38196601125010515\\n    - halfEdge: 5\\n      at: 0.5\\n    touches:\\n    - halfEdge: -11\\n      index: 0\\n    - halfEdge: 12\\n      index: 1\\n    - halfEdge: -12\\n      index: 1\\n    - halfEdge: -6\\n      index: 1\\n    - halfEdge: 6\\n      index: 1\\n    - halfEdge: -4\\n      index: 1\\n    - halfEdge: 4\\n      index: 1\\n    - halfEdge: 5\\n      index: 1\\n    - halfEdge: -5\\n      index: 0\\n    - halfEdge: 11\\n      index: 1\\n  - source: -8\\n    target: 8\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -0.5\\n      y: 1.5388417685876268\\n    crossings: []\\n    touches:\\n    - halfEdge: -8\\n      index: 0\\n    - halfEdge: 8\\n      index: 0\\n  - source: 9\\n    target: -9\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.6180339887498949\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: 9\\n      index: 0\\n    - halfEdge: -9\\n      index: 1\\n  - source: 11\\n    target: -11\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.6180339887498949\\n      y: -1.902113032590307\\n    crossings:\\n    - halfEdge: -5\\n      at: 0.5\\n    - halfEdge: 4\\n      at: 0.6180339887498949\\n    - halfEdge: 6\\n      at: 0.6180339887498949\\n    - halfEdge: -12\\n      at: 0.5\\n    touches:\\n    - halfEdge: 11\\n      index: 0\\n    - halfEdge: -5\\n      index: 1\\n    - halfEdge: 5\\n      index: 0\\n    - halfEdge: 4\\n      index: 2\\n    - halfEdge: -4\\n      index: 0\\n    - halfEdge: 6\\n      index: 2\\n    - halfEdge: -6\\n      index: 0\\n    - halfEdge: -12\\n      index: 2\\n    - halfEdge: 12\\n      index: 0\\n    - halfEdge: -11\\n      index: 1\\n  - source: -3\\n    target: -12\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 0.5\\n      y: -1.5388417685876268\\n    crossings:\\n    - halfEdge: 4\\n      at: 0.2360679774997897\\n    - halfEdge: 6\\n      at: 0.2360679774997897\\n    touches:\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 4\\n      index: 0\\n    - halfEdge: -4\\n      index: 2\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: -6\\n      index: 2\\n    - halfEdge: -12\\n      index: 0\\n  inside:\\n  - -8\\n  - 9\\n  - -9\\n  - 10\\n  - -10\\n  - 11\\n  - -11\\n\";","export default \"vertices:\\n- - 1\\n  - -3\\n  - -9\\n  - -21\\n  - 12\\n  - -13\\n  - 18\\n  - -19\\n  - -24\\n  - 22\\n  - 14\\n  - 6\\n  - -7\\n  - -17\\n  - 10\\n  - 4\\n- - -1\\n  - -5\\n  - -12\\n  - -23\\n  - 24\\n  - 16\\n  - 7\\n  - 2\\n- - -2\\n  - -6\\n  - -15\\n  - 13\\n  - 5\\n  - -4\\n  - -11\\n  - -22\\n  - 23\\n  - 21\\n  - -20\\n  - 17\\n  - -16\\n  - 19\\n  - 8\\n  - 3\\n- - -8\\n  - -18\\n  - 15\\n  - -14\\n  - 11\\n  - -10\\n  - 20\\n  - 9\\nvectors:\\n  1:\\n    x: 1.0\\n    y: 0.0\\n  2:\\n    x: -0.2928932188134525\\n    y: 0.2928932188134525\\n  3:\\n    x: -0.7071067811865476\\n    y: -0.2928932188134525\\n  4:\\n    x: 0.7071067811865476\\n    y: -0.2928932188134525\\n  5:\\n    x: 0.2928932188134525\\n    y: 0.2928932188134525\\n  6:\\n    x: -0.2928932188134525\\n    y: -0.7071067811865476\\n  7:\\n    x: 0.0\\n    y: 1.0\\n  8:\\n    x: 0.0\\n    y: 0.41421356237309503\\n  9:\\n    x: -0.7071067811865476\\n    y: -0.7071067811865476\\n  10:\\n    x: 0.7071067811865476\\n    y: -0.7071067811865476\\n  11:\\n    x: 0.0\\n    y: 0.41421356237309503\\n  12:\\n    x: 0.0\\n    y: 1.0\\n  13:\\n    x: 0.2928932188134525\\n    y: -0.7071067811865476\\n  14:\\n    x: -0.7071067811865476\\n    y: -0.7071067811865476\\n  15:\\n    x: 0.41421356237309503\\n    y: 0.0\\n  16:\\n    x: 0.2928932188134525\\n    y: 0.2928932188134525\\n  17:\\n    x: -0.2928932188134525\\n    y: 0.7071067811865476\\n  18:\\n    x: -0.7071067811865476\\n    y: 0.7071067811865476\\n  19:\\n    x: 0.7071067811865476\\n    y: -0.2928932188134525\\n  20:\\n    x: -0.41421356237309503\\n    y: 0.0\\n  21:\\n    x: -0.2928932188134525\\n    y: -0.7071067811865476\\n  22:\\n    x: -0.7071067811865476\\n    y: -0.2928932188134525\\n  23:\\n    x: -0.2928932188134525\\n    y: 0.2928932188134525\\n  24:\\n    x: 1.0\\n    y: 0.0\\ncomponents:\\n- cylinder: true\\n  perimeter:\\n  - source: 5\\n    target: 3\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.0\\n      y: 0.585786437626905\\n    crossings:\\n    - halfEdge: -1\\n      at: 0.2928932188134525\\n    touches:\\n    - halfEdge: 5\\n      index: 1\\n    - halfEdge: -1\\n      index: 1\\n    - halfEdge: 1\\n      index: 1\\n    - halfEdge: 3\\n      index: 1\\n  - source: 8\\n    target: 21\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -0.41421356237309503\\n      y: 0.41421356237309503\\n    crossings:\\n    - halfEdge: 9\\n      at: 0.2928932188134525\\n    touches:\\n    - halfEdge: 8\\n      index: 0\\n    - halfEdge: 9\\n      index: 0\\n    - halfEdge: -9\\n      index: 1\\n    - halfEdge: 21\\n      index: 0\\n  - source: 23\\n    target: -23\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -0.2928932188134525\\n      y: 0.2928932188134525\\n    crossings: []\\n    touches:\\n    - halfEdge: 23\\n      index: 0\\n    - halfEdge: -23\\n      index: 0\\n  - source: 2\\n    target: -2\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -0.2928932188134525\\n      y: 0.2928932188134525\\n    crossings: []\\n    touches:\\n    - halfEdge: 2\\n      index: 0\\n    - halfEdge: -2\\n      index: 0\\n  - source: 3\\n    target: 5\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.0\\n      y: -0.585786437626905\\n    crossings:\\n    - halfEdge: 1\\n      at: 0.7071067811865476\\n    touches:\\n    - halfEdge: 3\\n      index: 0\\n    - halfEdge: 1\\n      index: 2\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 5\\n      index: 2\\n  - source: 13\\n    target: 5\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 1.0\\n      y: -1.0\\n    crossings:\\n    - halfEdge: 12\\n      at: 0.41421356237309503\\n    - halfEdge: -21\\n      at: 0.41421356237309503\\n    - halfEdge: -9\\n      at: 0.2928932188134525\\n    - halfEdge: -3\\n      at: 0.41421356237309503\\n    - halfEdge: 1\\n      at: 0.41421356237309503\\n    touches:\\n    - halfEdge: 13\\n      index: 0\\n    - halfEdge: 12\\n      index: 0\\n    - halfEdge: -12\\n      index: 0\\n    - halfEdge: -21\\n      index: 0\\n    - halfEdge: 21\\n      index: 1\\n    - halfEdge: -9\\n      index: 0\\n    - halfEdge: 9\\n      index: 1\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 3\\n      index: 2\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: -1\\n      index: 2\\n    - halfEdge: 5\\n      index: 0\\n  inside:\\n  - 2\\n  - 5\\n  - -5\\n  - 23\\n- cylinder: true\\n  perimeter:\\n  - source: -2\\n    target: 17\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.585786437626905\\n      y: 0.0\\n    crossings:\\n    - halfEdge: 7\\n      at: 0.2928932188134525\\n    touches:\\n    - halfEdge: -2\\n      index: 0\\n    - halfEdge: 7\\n      index: 1\\n    - halfEdge: -7\\n      index: 1\\n    - halfEdge: 17\\n      index: 1\\n  - source: 17\\n    target: -16\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -1.0\\n      y: 1.0\\n    crossings:\\n    - halfEdge: -7\\n      at: 0.41421356237309503\\n    - halfEdge: 6\\n      at: 0.41421356237309503\\n    - halfEdge: 14\\n      at: 0.2928932188134525\\n    - halfEdge: 22\\n      at: 0.41421356237309503\\n    - halfEdge: -24\\n      at: 0.41421356237309503\\n    touches:\\n    - halfEdge: 17\\n      index: 2\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 7\\n      index: 2\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: -6\\n      index: 1\\n    - halfEdge: 14\\n      index: 0\\n    - halfEdge: -14\\n      index: 1\\n    - halfEdge: 22\\n      index: 0\\n    - halfEdge: -22\\n      index: 0\\n    - halfEdge: -24\\n      index: 0\\n    - halfEdge: 24\\n      index: 0\\n    - halfEdge: -16\\n      index: 0\\n  - source: 17\\n    target: -2\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.585786437626905\\n      y: 0.0\\n    crossings:\\n    - halfEdge: -7\\n      at: 0.7071067811865476\\n    touches:\\n    - halfEdge: 17\\n      index: 0\\n    - halfEdge: -7\\n      index: 2\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -2\\n      index: 1\\n  - source: -2\\n    target: 2\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 0.2928932188134525\\n      y: -0.2928932188134525\\n    crossings: []\\n    touches:\\n    - halfEdge: -2\\n      index: 2\\n    - halfEdge: 2\\n      index: 0\\n  - source: -23\\n    target: 23\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 0.2928932188134525\\n      y: -0.2928932188134525\\n    crossings: []\\n    touches:\\n    - halfEdge: -23\\n      index: 0\\n    - halfEdge: 23\\n      index: 0\\n  - source: -11\\n    target: -6\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 0.41421356237309503\\n      y: -0.41421356237309503\\n    crossings:\\n    - halfEdge: -14\\n      at: 0.2928932188134525\\n    touches:\\n    - halfEdge: -11\\n      index: 0\\n    - halfEdge: -14\\n      index: 0\\n    - halfEdge: 14\\n      index: 1\\n    - halfEdge: -6\\n      index: 0\\n  inside:\\n  - -2\\n  - 16\\n  - -16\\n  - -23\\n- cylinder: true\\n  perimeter:\\n  - source: -20\\n    target: 20\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.41421356237309503\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: -20\\n      index: 0\\n    - halfEdge: 20\\n      index: 1\\n  - source: 15\\n    target: -15\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.41421356237309503\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: 15\\n      index: 0\\n    - halfEdge: -15\\n      index: 1\\n  - source: -6\\n    target: -11\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -0.41421356237309503\\n      y: 0.41421356237309503\\n    crossings:\\n    - halfEdge: 14\\n      at: 0.7071067811865476\\n    touches:\\n    - halfEdge: -6\\n      index: 0\\n    - halfEdge: 14\\n      index: 1\\n    - halfEdge: -14\\n      index: 0\\n    - halfEdge: -11\\n      index: 0\\n  - source: 5\\n    target: 13\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -1.0\\n      y: 1.0\\n    crossings:\\n    - halfEdge: -1\\n      at: 0.585786437626905\\n    - halfEdge: 3\\n      at: 0.585786437626905\\n    - halfEdge: 9\\n      at: 0.7071067811865476\\n    - halfEdge: 21\\n      at: 0.585786437626905\\n    - halfEdge: -12\\n      at: 0.585786437626905\\n    touches:\\n    - halfEdge: 5\\n      index: 0\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: 3\\n      index: 0\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 9\\n      index: 1\\n    - halfEdge: -9\\n      index: 0\\n    - halfEdge: 21\\n      index: 1\\n    - halfEdge: -21\\n      index: 0\\n    - halfEdge: -12\\n      index: 0\\n    - halfEdge: 12\\n      index: 0\\n    - halfEdge: 13\\n      index: 0\\n  - source: -15\\n    target: 15\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.41421356237309503\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: -15\\n      index: 0\\n    - halfEdge: 15\\n      index: 1\\n  - source: 20\\n    target: -20\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.41421356237309503\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: 20\\n      index: 0\\n    - halfEdge: -20\\n      index: 1\\n  - source: 21\\n    target: 8\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 0.41421356237309503\\n      y: -0.41421356237309503\\n    crossings:\\n    - halfEdge: -9\\n      at: 0.7071067811865476\\n    touches:\\n    - halfEdge: 21\\n      index: 0\\n    - halfEdge: -9\\n      index: 1\\n    - halfEdge: 9\\n      index: 0\\n    - halfEdge: 8\\n      index: 0\\n  - source: -16\\n    target: 17\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 1.0\\n      y: -1.0\\n    crossings:\\n    - halfEdge: 24\\n      at: 0.585786437626905\\n    - halfEdge: -22\\n      at: 0.585786437626905\\n    - halfEdge: -14\\n      at: 0.7071067811865476\\n    - halfEdge: -6\\n      at: 0.585786437626905\\n    - halfEdge: 7\\n      at: 0.585786437626905\\n    touches:\\n    - halfEdge: -16\\n      index: 0\\n    - halfEdge: 24\\n      index: 0\\n    - halfEdge: -24\\n      index: 0\\n    - halfEdge: -22\\n      index: 0\\n    - halfEdge: 22\\n      index: 0\\n    - halfEdge: -14\\n      index: 1\\n    - halfEdge: 14\\n      index: 0\\n    - halfEdge: -6\\n      index: 1\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 17\\n      index: 0\\n  inside:\\n  - 4\\n  - -4\\n  - 8\\n  - -8\\n  - 10\\n  - -10\\n  - 11\\n  - -11\\n  - 13\\n  - -13\\n  - 15\\n  - -15\\n  - 17\\n  - -17\\n  - 18\\n  - -18\\n  - 19\\n  - -19\\n  - 20\\n  - -20\\n\";","export default \"vertices:\\n- - 1\\n  - -3\\n  - -9\\n  - -21\\n  - 14\\n  - 6\\n  - -7\\n  - -17\\n  - -27\\n  - 25\\n  - -26\\n  - 23\\n  - 12\\n  - -13\\n  - 18\\n  - -19\\n  - 10\\n  - 4\\n- - -1\\n  - -5\\n  - -12\\n  - 16\\n  - 7\\n  - 2\\n- - -2\\n  - -6\\n  - -15\\n  - -25\\n  - 24\\n  - 13\\n  - 5\\n  - -4\\n  - -11\\n  - 21\\n  - -20\\n  - 17\\n  - -16\\n  - -23\\n  - 22\\n  - 19\\n  - 8\\n  - 3\\n- - -8\\n  - -18\\n  - -24\\n  - 27\\n  - 20\\n  - 9\\n- - -10\\n  - -22\\n  - 26\\n  - 15\\n  - -14\\n  - 11\\nvectors:\\n  1:\\n    x: 1.0\\n    y: 0.0\\n  2:\\n    x: -0.32635182233306964\\n    y: 0.565257937423568\\n  3:\\n    x: -0.6736481776669303\\n    y: -0.565257937423568\\n  4:\\n    x: 0.6736481776669303\\n    y: -0.565257937423568\\n  5:\\n    x: 0.32635182233306964\\n    y: 0.565257937423568\\n  6:\\n    x: -0.8263518223330697\\n    y: -0.3007674663608706\\n  7:\\n    x: 0.5\\n    y: 0.8660254037844386\\n  8:\\n    x: -0.5\\n    y: 0.41954981558864\\n  9:\\n    x: -0.17364817766693036\\n    y: -0.984807753012208\\n  10:\\n    x: 0.17364817766693036\\n    y: -0.984807753012208\\n  11:\\n    x: 0.5\\n    y: 0.41954981558864\\n  12:\\n    x: -0.5\\n    y: 0.8660254037844386\\n  13:\\n    x: 0.8263518223330697\\n    y: -0.3007674663608706\\n  14:\\n    x: -0.9396926207859084\\n    y: 0.3420201433256687\\n  15:\\n    x: 0.11334079845283873\\n    y: -0.6427876096865394\\n  16:\\n    x: 0.6527036446661393\\n    y: 0.0\\n  17:\\n    x: -0.1527036446661393\\n    y: 0.8660254037844386\\n  18:\\n    x: -0.9396926207859084\\n    y: -0.3420201433256687\\n  19:\\n    x: 0.4396926207859084\\n    y: 0.7615699589143088\\n  20:\\n    x: -0.6133407984528387\\n    y: -0.22323779409789932\\n  21:\\n    x: 0.4396926207859084\\n    y: -0.7615699589143088\\n  22:\\n    x: 0.6133407984528387\\n    y: -0.22323779409789932\\n  23:\\n    x: 0.1527036446661393\\n    y: 0.8660254037844386\\n  24:\\n    x: -0.11334079845283873\\n    y: -0.6427876096865394\\n  25:\\n    x: 0.8793852415718167\\n    y: 0.0\\n  26:\\n    x: -0.766044443118978\\n    y: -0.6427876096865394\\n  27:\\n    x: -0.766044443118978\\n    y: 0.6427876096865394\\ncomponents:\\n- cylinder: true\\n  perimeter:\\n  - source: 25\\n    target: -25\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.8793852415718167\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: 25\\n      index: 0\\n    - halfEdge: -25\\n      index: 1\\n  - source: -15\\n    target: 13\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -1.7057370639048863\\n      y: 0.3007674663608706\\n    crossings:\\n    - halfEdge: 26\\n      at: 0.8006595491452156\\n    - halfEdge: -23\\n      at: 0.8263518223330697\\n    - halfEdge: -12\\n      at: 0.8006595491452156\\n    touches:\\n    - halfEdge: -15\\n      index: 0\\n    - halfEdge: 26\\n      index: 0\\n    - halfEdge: -26\\n      index: 0\\n    - halfEdge: -23\\n      index: 0\\n    - halfEdge: 23\\n      index: 0\\n    - halfEdge: -12\\n      index: 0\\n    - halfEdge: 12\\n      index: 0\\n    - halfEdge: 13\\n      index: 0\\n  - source: -25\\n    target: 25\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.8793852415718167\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: -25\\n      index: 0\\n    - halfEdge: 25\\n      index: 1\\n  - source: -27\\n    target: -13\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 1.7057370639048863\\n      y: -0.3007674663608706\\n    crossings:\\n    - halfEdge: -24\\n      at: 0.766044443118978\\n    touches:\\n    - halfEdge: -27\\n      index: 0\\n    - halfEdge: -24\\n      index: 0\\n    - halfEdge: 24\\n      index: 0\\n    - halfEdge: -13\\n      index: 0\\n  inside:\\n  - 13\\n  - -13\\n  - 25\\n  - -25\\n- cylinder: true\\n  perimeter:\\n  - source: 1\\n    target: -1\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 1.0\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: -1\\n      index: 1\\n  - source: 16\\n    target: -16\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.6527036446661393\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: 16\\n      index: 0\\n    - halfEdge: -16\\n      index: 1\\n  - source: 17\\n    target: 22\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -3.2057370639048863\\n      y: 0.565257937423568\\n    crossings:\\n    - halfEdge: -7\\n      at: 0.8793852415718167\\n    - halfEdge: -2\\n      at: 0.7733184030943225\\n    - halfEdge: 3\\n      at: 0.5739779522395382\\n    - halfEdge: 9\\n      at: 0.713011023880231\\n    - halfEdge: 21\\n      at: 0.5739779522395382\\n    - halfEdge: -11\\n      at: 0.7733184030943225\\n    - halfEdge: 10\\n      at: 0.8793852415718167\\n    touches:\\n    - halfEdge: 17\\n      index: 0\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -2\\n      index: 0\\n    - halfEdge: 2\\n      index: 0\\n    - halfEdge: 3\\n      index: 0\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 9\\n      index: 0\\n    - halfEdge: -9\\n      index: 0\\n    - halfEdge: 21\\n      index: 0\\n    - halfEdge: -21\\n      index: 0\\n    - halfEdge: -11\\n      index: 0\\n    - halfEdge: 11\\n      index: 0\\n    - halfEdge: 10\\n      index: 0\\n    - halfEdge: -10\\n      index: 0\\n    - halfEdge: 22\\n      index: 0\\n  - source: -16\\n    target: 16\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.6527036446661393\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: -16\\n      index: 0\\n    - halfEdge: 16\\n      index: 1\\n  - source: -1\\n    target: 1\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -1.0\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 1\\n      index: 1\\n  - source: 4\\n    target: 14\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 3.2057370639048863\\n      y: -0.565257937423568\\n    crossings:\\n    - halfEdge: 5\\n      at: 0.7168814171420514\\n    - halfEdge: 12\\n      at: 0.7733184030943225\\n    - halfEdge: 23\\n      at: 0.6736481776669303\\n    - halfEdge: -26\\n      at: 0.7733184030943225\\n    - halfEdge: -15\\n      at: 0.7168814171420514\\n    touches:\\n    - halfEdge: 4\\n      index: 0\\n    - halfEdge: 5\\n      index: 0\\n    - halfEdge: -5\\n      index: 0\\n    - halfEdge: 12\\n      index: 0\\n    - halfEdge: -12\\n      index: 0\\n    - halfEdge: 23\\n      index: 0\\n    - halfEdge: -23\\n      index: 0\\n    - halfEdge: -26\\n      index: 0\\n    - halfEdge: 26\\n      index: 0\\n    - halfEdge: -15\\n      index: 0\\n    - halfEdge: 15\\n      index: 0\\n    - halfEdge: 14\\n      index: 0\\n  inside:\\n  - 1\\n  - -1\\n  - 14\\n  - -14\\n  - 16\\n  - -16\\n  - 22\\n  - -22\\n- cylinder: true\\n  perimeter:\\n  - source: 22\\n    target: -4\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 1.1133407984528387\\n      y: 0.19631202149074067\\n    crossings:\\n    - halfEdge: -10\\n      at: 0.32635182233306964\\n    touches:\\n    - halfEdge: 22\\n      index: 0\\n    - halfEdge: -10\\n      index: 2\\n    - halfEdge: 10\\n      index: 1\\n    - halfEdge: -4\\n      index: 1\\n  - source: -4\\n    target: -2\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -3.2057370639048863\\n      y: 0.565257937423568\\n    crossings:\\n    - halfEdge: 10\\n      at: 0.4679111137620439\\n    - halfEdge: -19\\n      at: 0.532088886237956\\n    - halfEdge: 18\\n      at: 0.8793852415718167\\n    - halfEdge: 24\\n      at: 0.9076037345479523\\n    - halfEdge: -27\\n      at: 0.8793852415718167\\n    - halfEdge: -17\\n      at: 0.532088886237956\\n    - halfEdge: -7\\n      at: 0.4679111137620439\\n    touches:\\n    - halfEdge: -4\\n      index: 2\\n    - halfEdge: 10\\n      index: 0\\n    - halfEdge: -10\\n      index: 3\\n    - halfEdge: -19\\n      index: 0\\n    - halfEdge: 19\\n      index: 0\\n    - halfEdge: 18\\n      index: 0\\n    - halfEdge: -18\\n      index: 0\\n    - halfEdge: 24\\n      index: 0\\n    - halfEdge: -24\\n      index: 0\\n    - halfEdge: -27\\n      index: 0\\n    - halfEdge: 27\\n      index: 0\\n    - halfEdge: -17\\n      index: 0\\n    - halfEdge: 17\\n      index: 1\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 7\\n      index: 1\\n    - halfEdge: -2\\n      index: 0\\n  - source: 8\\n    target: 21\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: -1.1133407984528387\\n      y: 0.19631202149074067\\n    crossings:\\n    - halfEdge: 9\\n      at: 0.32635182233306964\\n    touches:\\n    - halfEdge: 8\\n      index: 0\\n    - halfEdge: 9\\n      index: 1\\n    - halfEdge: -9\\n      index: 1\\n    - halfEdge: 21\\n      index: 1\\n  - source: -4\\n    target: 22\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -1.1133407984528387\\n      y: -0.19631202149074067\\n    crossings:\\n    - halfEdge: 10\\n      at: 0.6736481776669303\\n    touches:\\n    - halfEdge: -4\\n      index: 0\\n    - halfEdge: 10\\n      index: 2\\n    - halfEdge: -10\\n      index: 1\\n    - halfEdge: 22\\n      index: 1\\n  - source: 22\\n    target: 17\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 3.2057370639048863\\n      y: -0.565257937423568\\n    crossings:\\n    - halfEdge: -10\\n      at: 0.12061475842818323\\n    - halfEdge: 11\\n      at: 0.22668159690567746\\n    - halfEdge: -21\\n      at: 0.4260220477604618\\n    - halfEdge: -9\\n      at: 0.2869889761197691\\n    - halfEdge: -3\\n      at: 0.4260220477604618\\n    - halfEdge: 2\\n      at: 0.22668159690567746\\n    - halfEdge: 7\\n      at: 0.12061475842818323\\n    touches:\\n    - halfEdge: 22\\n      index: 2\\n    - halfEdge: -10\\n      index: 0\\n    - halfEdge: 10\\n      index: 3\\n    - halfEdge: 11\\n      index: 0\\n    - halfEdge: -11\\n      index: 0\\n    - halfEdge: -21\\n      index: 0\\n    - halfEdge: 21\\n      index: 2\\n    - halfEdge: -9\\n      index: 0\\n    - halfEdge: 9\\n      index: 2\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 3\\n      index: 0\\n    - halfEdge: 2\\n      index: 0\\n    - halfEdge: -2\\n      index: 1\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -7\\n      index: 1\\n    - halfEdge: 17\\n      index: 0\\n  - source: 21\\n    target: 8\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 1.1133407984528387\\n      y: -0.19631202149074067\\n    crossings:\\n    - halfEdge: -9\\n      at: 0.6736481776669303\\n    touches:\\n    - halfEdge: 21\\n      index: 0\\n    - halfEdge: -9\\n      index: 2\\n    - halfEdge: 9\\n      index: 0\\n    - halfEdge: 8\\n      index: 1\\n  inside:\\n  - 8\\n  - -8\\n  - 20\\n  - -20\\n- cylinder: true\\n  perimeter:\\n  - source: -6\\n    target: 6\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.8263518223330697\\n      y: 0.3007674663608706\\n    crossings: []\\n    touches:\\n    - halfEdge: -6\\n      index: 0\\n    - halfEdge: 6\\n      index: 1\\n  - source: 14\\n    target: 4\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -3.2057370639048863\\n      y: 0.565257937423568\\n    crossings:\\n    - halfEdge: 15\\n      at: 0.28311858285794855\\n    - halfEdge: 26\\n      at: 0.22668159690567746\\n    - halfEdge: -23\\n      at: 0.32635182233306964\\n    - halfEdge: -12\\n      at: 0.22668159690567746\\n    - halfEdge: -5\\n      at: 0.28311858285794855\\n    touches:\\n    - halfEdge: 14\\n      index: 0\\n    - halfEdge: 15\\n      index: 0\\n    - halfEdge: -15\\n      index: 1\\n    - halfEdge: 26\\n      index: 0\\n    - halfEdge: -26\\n      index: 1\\n    - halfEdge: -23\\n      index: 0\\n    - halfEdge: 23\\n      index: 1\\n    - halfEdge: -12\\n      index: 0\\n    - halfEdge: 12\\n      index: 1\\n    - halfEdge: -5\\n      index: 0\\n    - halfEdge: 5\\n      index: 0\\n    - halfEdge: 4\\n      index: 0\\n  - source: -13\\n    target: -27\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -1.7057370639048863\\n      y: 0.3007674663608706\\n    crossings:\\n    - halfEdge: 24\\n      at: 0.23395555688102196\\n    touches:\\n    - halfEdge: -13\\n      index: 0\\n    - halfEdge: 24\\n      index: 0\\n    - halfEdge: -24\\n      index: 1\\n    - halfEdge: -27\\n      index: 0\\n  - source: 6\\n    target: -6\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.8263518223330697\\n      y: -0.3007674663608706\\n    crossings: []\\n    touches:\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: -6\\n      index: 1\\n  - source: -2\\n    target: -4\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 3.2057370639048863\\n      y: -0.565257937423568\\n    crossings:\\n    - halfEdge: 7\\n      at: 0.532088886237956\\n    - halfEdge: 17\\n      at: 0.4679111137620439\\n    - halfEdge: 27\\n      at: 0.12061475842818323\\n    - halfEdge: -24\\n      at: 0.09239626545204768\\n    - halfEdge: -18\\n      at: 0.12061475842818323\\n    - halfEdge: 19\\n      at: 0.4679111137620439\\n    - halfEdge: -10\\n      at: 0.532088886237956\\n    touches:\\n    - halfEdge: -2\\n      index: 0\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 17\\n      index: 0\\n    - halfEdge: -17\\n      index: 0\\n    - halfEdge: 27\\n      index: 0\\n    - halfEdge: -27\\n      index: 1\\n    - halfEdge: -24\\n      index: 0\\n    - halfEdge: 24\\n      index: 1\\n    - halfEdge: -18\\n      index: 0\\n    - halfEdge: 18\\n      index: 0\\n    - halfEdge: 19\\n      index: 0\\n    - halfEdge: -19\\n      index: 0\\n    - halfEdge: -10\\n      index: 0\\n    - halfEdge: 10\\n      index: 0\\n    - halfEdge: -4\\n      index: 0\\n  - source: 13\\n    target: -15\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 1.7057370639048863\\n      y: -0.3007674663608706\\n    crossings:\\n    - halfEdge: 12\\n      at: 0.19934045085478438\\n    - halfEdge: 23\\n      at: 0.17364817766693036\\n    - halfEdge: -26\\n      at: 0.19934045085478438\\n    touches:\\n    - halfEdge: 13\\n      index: 0\\n    - halfEdge: 12\\n      index: 0\\n    - halfEdge: -12\\n      index: 1\\n    - halfEdge: 23\\n      index: 0\\n    - halfEdge: -23\\n      index: 1\\n    - halfEdge: -26\\n      index: 0\\n    - halfEdge: 26\\n      index: 1\\n    - halfEdge: -15\\n      index: 0\\n  inside:\\n  - 4\\n  - -4\\n  - 6\\n  - -6\\nvertical:\\n  x: -1.7057370639048863\\n  y: 0.3007674663608706\\n\";","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Torus from \"!!raw-loader!./torus.txt\"\nimport Triangle_1_1_1 from \"!!raw-loader!./1-1-1.txt\"\nimport Triangle_1_1_3 from \"!!raw-loader!./1-1-3.txt\"\nimport Triangle_1_1_3_Without_Marked_Point from \"!!raw-loader!./1-1-3-without-marked-point.txt\";\nimport Triangle_1_2_2 from \"!!raw-loader!./1-2-2.txt\"\nimport Triangle_1_2_2_Without_Marked_Point from \"!!raw-loader!./1-2-2-without-marked-point.txt\";\nimport Triangle_1_2_5 from \"!!raw-loader!./1-2-5.txt\"\nimport Triangle_2_3_4 from \"!!raw-loader!./2-3-4.txt\"\n\nimport { Component, Vue } from \"vue-property-decorator\";\n\n@Component\nexport default class EditorMenu extends Vue {\n  predefined = {\n    \"Torus\": Torus,\n    \"Triangle (1, 1, 1)\": Triangle_1_1_1,\n    \"Triangle (1, 1, 3) with Marked Points\": Triangle_1_1_3,\n    \"Triangle (1, 1, 3) w/o Marked Points\": Triangle_1_1_3_Without_Marked_Point,\n    \"Triangle (1, 2, 2) with Marked Points\": Triangle_1_2_2,\n    \"Triangle (1, 2, 2) w/o Marked Points\": Triangle_1_2_2_Without_Marked_Point,\n    \"Triangle (1, 2, 5) with Marked Points\": Triangle_1_2_5,\n    \"Triangle (2, 3, 4)\": Triangle_2_3_4,\n  } as {[name: string]: string};\n\n  get selected(): string {\n    for(const [name, yaml] of Object.entries(this.predefined))\n      if (yaml == this.$store.state.raw)\n        return name;\n    return \"other\";\n  }\n\n  set selected(name: string) {\n    this.$store.dispatch(\"reset\", {raw: this.predefined[name]});\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EditorMenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EditorMenu.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./EditorMenu.vue?vue&type=template&id=33cf951c&\"\nimport script from \"./EditorMenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./EditorMenu.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\ninstallComponents(component, {VList,VListItem,VListItemContent,VListItemGroup,VListItemTitle,VNavigationDrawer})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.triangulation != null)?_c('layouter',{attrs:{\"triangulation\":_vm.triangulation,\"layout\":_vm.layout},on:{\"layout\":function (l) { return _vm.layout = l; }},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar layout = ref.layout;\nreturn [_c('v-row',[_c('v-col',{staticClass:\"col-md-4 col-12\"},[_c('v-card',[_c('v-card-text',[_c('v-subheader',[_vm._v(\"Width\")]),_c('v-slider',{attrs:{\"min\":32,\"max\":8192,\"thumb-label\":\"always\"},model:{value:(_vm.width),callback:function ($$v) {_vm.width=$$v},expression:\"width\"}}),_c('v-subheader',[_vm._v(\"Height\")]),_c('v-slider',{attrs:{\"min\":32,\"max\":8192,\"thumb-label\":\"always\"},model:{value:(_vm.height),callback:function ($$v) {_vm.height=$$v},expression:\"height\"}})],1)],1)],1),_c('v-col',{staticClass:\"col-md-8 col-12\"},[(layout != null && _vm.viewport != null)?_c('v-card',[_c('v-card-title',[_c('v-tabs',{attrs:{\"fixed-tabs\":\"\"},model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},[_c('v-tabs-slider'),_c('v-tab',{staticClass:\"primary--text\"},[_c('v-icon',[_vm._v(\"mdi-image\")])],1),_c('v-tab',{staticClass:\"primary--text\"},[_c('v-icon',[_vm._v(\"mdi-format-align-left\")])],1)],1)],1),_c('v-card-text',[_c('v-tabs-items',{model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},[_c('v-tab-item',{key:\"0\"},[_c('v-card',[_c('v-img',{staticClass:\"mx-auto\",attrs:{\"src\":(\"data:image/svg+xml;base64,\" + (_vm.base64(_vm.svg))),\"max-width\":_vm.width,\"max-height\":_vm.height}})],1)],1),_c('v-tab-item',{key:\"1\"},[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"export\",domProps:{\"textContent\":_vm._s(_vm.svg)}})],1)],1)],1),_c('triangulation-interaction',{attrs:{\"layout\":layout,\"options\":_vm.options,\"outer\":_vm.show.includes('outer'),\"inner\":_vm.show.includes('triangulation')}}),_c('label-interaction',{attrs:{\"layout\":layout,\"options\":_vm.options,\"outer\":_vm.show.includes('outer-labels'),\"numeric\":_vm.show.includes('numeric-labels')}}),_c('flatsurf',{ref:\"flatsurf\",staticClass:\"render\",staticStyle:{\"display\":\"block\"},style:({ 'width': (_vm.width + \"px\"), 'height': (_vm.height + \"px\") }),attrs:{\"triangulation\":_vm.triangulation,\"flow-components\":_vm.flowComponents,\"layout\":layout,\"viewportCoordinateSystem\":_vm.viewport.viewportCoordinateSystem,\"visualizationOptions\":_vm.options}})],1)],1):_vm._e()],1)],1)]}}],null,false,2667427372)}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Ref, Watch } from \"vue-property-decorator\";\n\nimport AsyncComputed from 'vue-async-computed-decorator'\nimport Flatsurf from \"@/components/flatsurf/Flatsurf.vue\";\nimport TriangulationInteraction from \"@/components/interactions/TriangulationInteraction\";\nimport LabelInteraction from \"@/components/interactions/LabelInteraction\";\nimport VisualizationOptions from \"@/components/flatsurf/options/VisualizationOptions\";\nimport Layouter from \"@/components/Layouter\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Layout from \"@/layout/Layout\";\nimport FlatTriangulation from \"@/flatsurf/FlatTriangulation\";\nimport Viewport from \"@/geometry/Viewport\";\nimport Vertical from \"@/flatsurf/Vertical\";\n\n@Component({\n  components: {\n    Flatsurf,\n    TriangulationInteraction,\n    LabelInteraction,\n    Layouter,\n  },\n})\nexport default class Export extends Vue {\n  @Prop({ required: true, type: Array }) show!: string[];\n\n  tab = 0;\n\n  options = new VisualizationOptions();\n\n  width = 1024;\n  height = 1024;\n\n  ready: string | null = null;\n\n  viewport: Viewport | null = null;\n\n  @Ref()\n  readonly flatsurf!: Flatsurf;\n\n  get layout() : Layout | null {\n    return this.$store.state.layout;\n  }\n\n  set layout(layout: Layout | null) {\n    if (this.layout !== layout)\n      this.$store.commit('layout', { layout });\n  }\n\n  get triangulation() : FlatTriangulation | null {\n    return this.$store.state.triangulation;\n  }\n\n  get vertical() : Vertical | null {\n    return this.$store.state.vertical;\n  }\n\n  get svgCoordinateSystem(): CoordinateSystem | null {\n    if (this.viewport == null)\n      return null;\n    if (this.layout == null)\n      return null;\n\n    this.viewport.focus(this.layout.hull);\n\n    return this.viewport.viewportCoordinateSystem;\n  }\n\n  base64(data: string) {\n    return btoa(unescape(encodeURIComponent(data)));\n  }\n\n  get flowComponents() {\n    if (this.show.includes('flow-components'))\n      return this.$store.state.flowComponents;\n    return [];\n  }\n\n  @AsyncComputed({default: \"\"})\n  async svg() {\n    if (this.viewport == null)\n      return \"\";\n\n    if (this.layout == null)\n      return \"\";\n\n    this.viewport.resize(this.width, this.height);\n    this.viewport.focus(this.layout.hull);\n\n    await this.$nextTick();\n\n    return await this.flatsurf.svg();\n  }\n\n  @Watch(\"triangulation\", { immediate: true })\n  onTriangulationChange() {\n    if (this.triangulation != null) {\n      this.viewport = new Viewport(this.vertical!.coordinateSystem);\n    }\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Export.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Export.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Export.vue?vue&type=template&id=54d87b92&scoped=true&\"\nimport script from \"./Export.vue?vue&type=script&lang=ts&\"\nexport * from \"./Export.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Export.vue?vue&type=style&index=0&id=54d87b92&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54d87b92\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabItem } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTabsItems } from 'vuetify/lib/components/VTabs';\nimport { VTabsSlider } from 'vuetify/lib/components/VTabs';\ninstallComponents(component, {VCard,VCardText,VCardTitle,VCol,VIcon,VImg,VRow,VSlider,VSubheader,VTab,VTabItem,VTabs,VTabsItems,VTabsSlider})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',{staticClass:\"col-md-4 col-12\"},[_c('v-card',[_c('v-card-title',[_vm._v(\" vue-flatsurf Widget \")]),_c('v-card-text',[_c('p',[_vm._v(\"The \"),_c('code',[_vm._v(\"Widget\")]),_vm._v(\" component encapsulated all the features of vue-flatsurf in a single component to simplify interacting with the widget from Jupyter Notebooks, e.g., through \"),_c('a',{attrs:{\"href\":\"https://github.com/flatsurf/ipyvue-flatsurf\"}},[_vm._v(\"ipyvue-flatsurf\")]),_vm._v(\".\")]),_c('p',[_vm._v(\"This view exposes all the features of that widget but is not connected to the other views of this demo application.\")])])],1)],1),_c('v-col',{staticClass:\"col-md-4 col-12\"},[_c('v-card',[_c('v-card-title',[_vm._v(\" Widget Visualization \")]),_c('v-card-text',[_c('v-checkbox',{attrs:{\"label\":\"Show Inner Edges\",\"hide-details\":\"\"},model:{value:(_vm.showInnerEdges),callback:function ($$v) {_vm.showInnerEdges=$$v},expression:\"showInnerEdges\"}}),_c('v-checkbox',{attrs:{\"label\":\"Show Outer Half Edges\",\"hide-details\":\"\"},model:{value:(_vm.showOuterHalfEdges),callback:function ($$v) {_vm.showOuterHalfEdges=$$v},expression:\"showOuterHalfEdges\"}}),_c('v-checkbox',{attrs:{\"label\":\"Show Numeric Labels on Edges and Half Edges\",\"hide-details\":\"\"},model:{value:(_vm.showNumericLabels),callback:function ($$v) {_vm.showNumericLabels=$$v},expression:\"showNumericLabels\"}}),_c('v-checkbox',{attrs:{\"label\":\"Show Alphanumeric Labels on Outer Half Edges\",\"hide-details\":\"\"},model:{value:(_vm.showOuterLabels),callback:function ($$v) {_vm.showOuterLabels=$$v},expression:\"showOuterLabels\"}}),_c('v-checkbox',{attrs:{\"label\":\"Show Flow Components\",\"disabled\":_vm.yaml.components.length == 0,\"hide-details\":\"\"},model:{value:(_vm.showFlowComponents),callback:function ($$v) {_vm.showFlowComponents=$$v},expression:\"showFlowComponents\"}}),_c('v-checkbox',{attrs:{\"label\":\"Rotate to Vertical\",\"disabled\":_vm.yaml.vertical == null,\"hide-details\":\"\"},model:{value:(_vm.applyVertical),callback:function ($$v) {_vm.applyVertical=$$v},expression:\"applyVertical\"}})],1)],1)],1),_c('v-col',{staticClass:\"col-md-4 col-12\"},[_c('v-card',[_c('v-card-title',[_vm._v(\" Widget Output \")]),_c('v-card-text',[_c('widget-component',{ref:\"widget\",attrs:{\"triangulation\":_vm.triangulation,\"flow-components\":_vm.flowComponents,\"vertical\":_vm.vertical,\"showInnerEdges\":_vm.showInnerEdges,\"showOuterHalfEdges\":_vm.showOuterHalfEdges,\"showOuterLabels\":_vm.showOuterLabels,\"showNumericLabels\":_vm.showNumericLabels,\"action\":_vm.action}})],1)],1)],1),_c('v-col',{staticClass:\"col-md-4 col-12\"},[_c('v-card',[_c('v-card-title',[_vm._v(\" Widget Interaction \")]),_c('v-card-text',[_c('v-select',{attrs:{\"items\":_vm.actions,\"item-text\":\"text\",\"item-value\":\"value\"},model:{value:(_vm.action),callback:function ($$v) {_vm.action=$$v},expression:\"action\"}}),(_vm.action === null)?_c('v-container',[_vm._v(\" Drag & Zoom the Surface. \")]):_vm._e(),(_vm.action === 'glue')?_c('v-container',[_c('p',[_vm._v(\" Left-click on a half edge to force it to be visually glued. Click again to force it to be unglued. Click again to choose gluing automatically. \")])]):_vm._e(),(_vm.action === 'path')?_c('v-container',[_vm._v(\" Click any vertex to start a path. Click half edges or vertices to draw the path. Press the escape key when the path is complete. \")]):_vm._e()],1)],1)],1),_c('v-col',{staticClass:\"col-md-4 col-12\"},[_c('v-card',[_c('v-card-title',[_vm._v(\" Query Widget \")]),_c('v-card-text',[_c('v-select',{attrs:{\"items\":_vm.queries,\"disabled\":_vm.info === ''},model:{value:(_vm.query),callback:function ($$v) {_vm.query=$$v},expression:\"query\"}}),(_vm.query === 'SVG')?_c('p',[_vm._v(\" Return the widget as a standalone SVG. \")]):(_vm.query === 'Path')?_c('p',[_vm._v(\" Return the currently drawn path if any path is being drawn. \")]):(_vm.query === 'Complete Path')?_c('p',[_vm._v(\" Return the path once its complete, i.e., once the user pressed Escape. \")]):(_vm.query === 'Path Change')?_c('p',[_vm._v(\" Return the path once it changes. \")]):(_vm.query === 'Layout')?_c('p',[_vm._v(\" Return the data underlying the visual layout of the surface. \")]):(_vm.query === 'Layout Change')?_c('p',[_vm._v(\" Return the data underlying the visual layout of the surface once it changes. \")]):(_vm.query === 'Glue')?_c('p',[_vm._v(\" Return the explicitly selected gluings that were used to create the surface's layout. \")]):(_vm.query === 'Glue Change')?_c('p',[_vm._v(\" Return the explicitly selected gluings that were used to create the surface's layout once they change. \")]):(_vm.query === 'Force Gluing')?_c('p',[_vm._v(\" Establish the specified visual gluing and return the resulting layout. \"),_c('v-text-field',{staticClass:\"parameters\",attrs:{\"label\":\"Gluing\"},model:{value:(_vm.parameters),callback:function ($$v) {_vm.parameters=$$v},expression:\"parameters\"}})],1):_vm._e(),_c('p',{staticClass:\"tiny\",domProps:{\"textContent\":_vm._s(_vm.info)}}),_c('v-container',{staticClass:\"text-right\"},[_c('v-btn',{attrs:{\"loading\":_vm.info === ''},on:{\"click\":_vm.performQuery}},[_vm._v(\"Refresh\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('layouter',{ref:\"layouter\",attrs:{\"triangulation\":_vm.parsedTriangulation},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar layout = ref.layout;\nvar relayout = ref.relayout;\nreturn [_c('viewer',{ref:\"viewer\",staticClass:\"surface\",attrs:{\"triangulation\":_vm.parsedTriangulation,\"flow-components\":_vm.parsedFlowComponents,\"layout\":layout,\"vertical\":_vm.parsedVertical},scopedSlots:_vm._u([{key:\"interaction\",fn:function(ref){\nvar focus = ref.focus;\nvar options = ref.options;\nvar refocus = ref.refocus;\nvar svg = ref.svg;\nreturn [_c('triangulation-interaction',{attrs:{\"layout\":layout,\"options\":options,\"outer\":_vm.showOuterHalfEdges,\"inner\":_vm.showInnerEdges}}),_c('label-interaction',{attrs:{\"layout\":layout,\"options\":options,\"outer\":_vm.showOuterLabels,\"numeric\":_vm.showNumericLabels}}),(_vm.action == 'glue')?_c('glue-interaction',{ref:\"glueInteraction\",attrs:{\"relayout\":relayout,\"svg\":svg,\"options\":options,\"focus\":focus,\"refocus\":refocus,\"layout\":layout}}):_vm._e(),(_vm.action == 'path')?_c('path-interaction',{ref:\"pathInteraction\",attrs:{\"layout\":layout,\"svg\":svg,\"triangulation\":_vm.parsedTriangulation,\"options\":options}}):_vm._e()]}}],null,true)})]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* ******************************************************************************\n * Copyright (c) 2020 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport xor from \"lodash-es/xor\";\n\n// A permutation of T where T is something that can be safely converted to a\n// key in an object, i.e., T should probably be number or string.\nexport default class Permutation<T> {\n  public static fromCycles<T>(cycles: Array<T[]>) : Permutation<T> {\n    const mapping = [] as Array<[T, T]>;\n    for (let cycle of cycles)\n      for (let i = 0; i < cycle.length; i++)\n        mapping.push([cycle[i], cycle[(i + 1) % cycle.length]]);\n    return Permutation.fromMapping(mapping);\n  }\n\n  public static fromMapping<T>(mapping: Array<[T, T]>) : Permutation<T> {\n    return new Permutation<T>(mapping);\n  }\n\n  private constructor(mapping: Array<[T, T]>) {\n    this.mapping = {};\n    this.inverse = {};\n\n    for (let entry of mapping) {\n      if (entry[0] in this.mapping)\n        throw Error(`${entry} specified more than once in mapping domain`);\n      if (entry[1] in this.inverse)\n        throw Error(`${entry} specified more than once in mapping codomain`);\n      this.mapping[String(entry[0])] = entry[1];\n      this.inverse[String(entry[1])] = entry[0];\n    }\n\n    if (xor(Object.keys(this.mapping), Object.keys(this.inverse)).length !== 0)\n      throw Error(`domain {${Object.keys(this.mapping)}} and codomain {${Object.keys(this.inverse)}} of permutation are not identical`);\n\n    this.cycles = [];\n    for (let [a, b] of mapping) {\n      if (this.cycles.find((cycle) => cycle.includes(a)))\n        continue;\n      const cycle = [a, b];\n      while(true) {\n        const x = cycle[cycle.length - 1];\n        if (cycle[0] == x) {\n          cycle.pop();\n          break;\n        }\n        cycle.push(this.mapping[String(x)]);\n      }\n      this.cycles.push(cycle);\n    }\n  }\n\n  public image(x: T) {\n    return this.mapping[String(x)];\n  }\n\n  public preimage(x: T) {\n    return this.inverse[String(x)];\n  }\n\n  public get domain() : T[] {\n    return Object.values(this.mapping);\n  }\n\n  public readonly cycles : Array<T[]>;\n\n  private readonly mapping : { [key: string]: T }; \n  private readonly inverse : { [key: string]: T };\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport HalfEdge from \"./HalfEdge\";\nimport Permutation from \"./Permutation\";\n\nexport interface VertexSchema {\n  source: HalfEdge[],\n};\n\nexport default class Vertex {\n  constructor(source: HalfEdge[]) {\n    this.source = source;\n  }\n\n  public static fromPermutation(vertices: Permutation<HalfEdge>): Vertex[] {\n    return vertices.cycles.map((cycle) => new Vertex(cycle));\n  }\n\n  readonly source: HalfEdge[];\n}\n","/* ******************************************************************************\n * Copyright (c) 2020 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport xor from \"lodash-es/xor\";\n\nimport HalfEdge from \"./HalfEdge\";\nimport Edge from \"./Edge\";\nimport Permutation from \"./Permutation\";\n\nimport Vector, { VectorSchema } from \"@/geometry/Vector\";\nimport Point from \"@/geometry/Point\";\nimport CoordinateSystem from '@/geometry/CoordinateSystem';\nimport Vertex from \"./Vertex\";\n\nexport interface FlatTriangulationSchema {\n  vertices: Array<HalfEdge[]>,\n  vectors: { [key: number]: VectorSchema }\n};\n\nexport default class FlatTriangulation {\n  public static parse(yaml: FlatTriangulationSchema, coordinateSystem: CoordinateSystem) : FlatTriangulation {\n    return new FlatTriangulation(\n      Permutation.fromCycles(yaml.vertices),\n      Object.fromEntries(Object.entries(yaml.vectors).map(([halfEdge, vector]) => [halfEdge, Vector.parse(vector, coordinateSystem)]))\n    );\n  }\n\n  private constructor(vertices: Permutation<HalfEdge>, vectors: {[key: string]: Vector}) {\n    this.vertices = vertices;\n    this.vertexes = Vertex.fromPermutation(vertices);\n    this.halfEdges = vertices.domain;\n    this.edges = this.halfEdges.filter((halfEdge) => halfEdge > 0).map((halfEdge) => new Edge(halfEdge));\n    this.faces = Permutation.fromMapping(this.halfEdges.map((he) => [-vertices.image(he), he]));\n\n    this.vectors = vectors;\n\n    if (xor(\n      [...Object.keys(this.vectors), ...Object.keys(this.vectors).map((he) => String(-Number(he)))],\n      this.halfEdges.map((he) => String(he))\n    ).length !== 0)\n      throw Error(`Provided vectors {${Object.keys(this.vectors)}} and present half edges {${this.halfEdges}} do not coincide.`);\n\n    const coordinateSystem = this.coordinateSystem;\n\n    for (const face of this.faces.cycles) {\n      const sum = face.reduce((sum, he) => sum.translate(this.vector(he)), new Point(coordinateSystem, 0, 0));\n      if (!sum.equalTo(new Point(coordinateSystem, 0, 0), 1e-6))\n        throw Error(`Face ${face} is not closed. Going around the face gives (${sum.x}, ${sum.y}) but should be zero.`);\n      // TODO: Wiggle the half edges to a place to make the faces closed in double coordinates. See https://github.com/flatsurf/vue-flatsurf/issues/38.\n    }\n  }\n\n  public get coordinateSystem() : CoordinateSystem {\n    if (Object.keys(this.vectors).length === 0)\n      throw Error(\"Cannot determine coordinate system for empty surface.\");\n    return Object.values(this.vectors)[0].parent;\n  }\n\n  public vector(halfEdge: HalfEdge): Vector {\n    return this.vectors[halfEdge] || this.vectors[-halfEdge].invert();\n  }\n\n  public readonly vertices: Permutation<HalfEdge>;\n  public readonly vertexes: Vertex[];\n  public readonly halfEdges : HalfEdge[];\n  public readonly edges: Edge[];\n  public readonly faces : Permutation<HalfEdge>;\n  private readonly vectors : {[key: string]: Vector };\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport HalfEdge, { HalfEdgeSchema } from \"./HalfEdge\";\nimport Vector, { VectorSchema } from \"@/geometry/Vector\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\n\nexport interface SaddleConnectionSchema {\n  source: HalfEdgeSchema,\n  target: HalfEdgeSchema,\n  vector: VectorSchema,\n  crossings: {\n    halfEdge: number,\n    at: number,\n  }[]\n};\n\nexport default class SaddleConnection {\n  public static parse(yaml: SaddleConnectionSchema, coordinateSystem: CoordinateSystem): SaddleConnection {\n    return new SaddleConnection(yaml.source, yaml.target, Vector.parse(yaml.vector, coordinateSystem), yaml.crossings);\n  }\n\n  private constructor(source: HalfEdge, target: HalfEdge, vector: Vector, crossings: {halfEdge: HalfEdge, at: number}[]) {\n    this.source = source;\n    this.target = target;\n    this.vector = vector;\n    this.crossings = Object.freeze(crossings);\n  }\n\n  public readonly source: HalfEdge;\n  public readonly target: HalfEdge;\n  public readonly vector: Vector;\n  // The sequence of half edges crossed with approximate\n  // relative point of crossing in [0, 1].\n  public readonly crossings: readonly {halfEdge: HalfEdge, at: number}[];\n}\n\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport SaddleConnection, { SaddleConnectionSchema } from \"./SaddleConnection\";\nimport CoordinateSystem from '@/geometry/CoordinateSystem';\nimport HalfEdge from \"./HalfEdge\";\n\nexport interface Touch {\n  halfEdge: HalfEdge;\n  index: number;\n}\n\nexport interface FlowConnectionSchema extends SaddleConnectionSchema {\n  vertical: boolean;\n  boundary: boolean;\n  touches: Touch[];\n}\n\nexport default class FlowConnection {\n  public static parse(yaml: FlowConnectionSchema, coordinateSystem: CoordinateSystem): FlowConnection {\n    return new FlowConnection(SaddleConnection.parse(yaml, coordinateSystem), yaml.vertical, yaml.boundary, yaml.touches);\n  }\n\n  private constructor(connection: SaddleConnection, vertical: boolean, boundary: boolean, touches: Touch[]) {\n    this.connection = connection;\n    this.vertical = vertical;\n    this.boundary = boundary;\n    this.touches = Object.freeze(touches);\n  }\n\n  public readonly connection: SaddleConnection;\n  public readonly vertical: boolean;\n  public readonly boundary: boolean;\n\n  // The sequence of half edges crossed/touched (most half edges show up in\n  // pairs) and the order of this crossing/touching in comparison to all the\n  // others of this component on that half edge. Typically, starts with\n  // [source half edge, 0], then the first [half edge crossed, 0] if this is\n  // the right-most crossing of that half edge, then [-half edge crossed,\n  // 0], ... until the [target half edge, 0].\n  public readonly touches: readonly Touch[];\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport CoordinateSystem from '@/geometry/CoordinateSystem';\nimport FlowConnection, { FlowConnectionSchema } from \"./FlowConnection\";\nimport HalfEdge, { HalfEdgeSchema } from './HalfEdge';\n\nexport interface FlowComponentSchema {\n  cylinder: boolean,\n  perimeter: FlowConnectionSchema[],\n  inside: HalfEdgeSchema[],\n};\n\nexport default class FlowComponent {\n  public static parse(yaml: FlowComponentSchema,\n  coordinateSystem: CoordinateSystem) : FlowComponent {\n    return new FlowComponent(yaml.cylinder, yaml.perimeter.map(connection => FlowConnection.parse(connection, coordinateSystem)), yaml.inside);\n  }\n\n  private constructor(cylinder: boolean, perimeter: FlowConnection[], inside: HalfEdge[]) {\n    this.cylinder = cylinder;\n    this.perimeter = perimeter;\n    this.inside = inside;\n  }\n\n  public readonly cylinder: boolean;\n  public readonly perimeter: FlowConnection[];\n  public readonly inside: HalfEdge[];\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Vector, { VectorSchema } from \"@/geometry/Vector\";\nimport Flatten from \"@flatten-js/core\";\n\nexport type VerticalSchema = VectorSchema;\n\nexport default class Vertical {\n  public static parse(yaml: VerticalSchema, coordinateSystem: CoordinateSystem): Vertical {\n    return new Vertical(Vector.parse(yaml, coordinateSystem));\n  }\n\n  private constructor(vector: Vector) {\n    this.vector = vector;\n    this.rotated = new CoordinateSystem(true);\n    const angle = new Vector(this.vector.parent, 0, 1).angleTo(this.vector);\n    this.rotated.embedInto(this.vector.parent, new Flatten.Matrix().rotate(-angle));\n  }\n\n  get coordinateSystem() {\n    return this.rotated;\n  }\n\n  public readonly vector: Vector;\n  public readonly rotated: CoordinateSystem;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Ref, Vue } from \"vue-property-decorator\";\n\nimport YAML from \"yaml\";\n\nimport FlatTriangulation from \"@/flatsurf/FlatTriangulation\";\nimport FlowComponent from \"@/flatsurf/FlowComponent\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Layouter from \"@/components/Layouter\";\nimport Viewer from \"@/components/Viewer.vue\";\nimport IViewer from \"@/components/IViewer\";\nimport TriangulationInteraction from \"@/components/interactions/TriangulationInteraction\";\nimport LabelInteraction from \"@/components/interactions/LabelInteraction\";\nimport GlueInteraction from \"@/components/interactions/GlueInteraction.vue\";\nimport PathInteraction from \"@/components/interactions/PathInteraction.vue\";\nimport IPathInteraction from \"@/components/interactions/IPathInteraction\";\nimport IGlueInteraction from \"@/components/interactions/IGlueInteraction\";\nimport Vertical from \"@/flatsurf/Vertical\";\n\n@Component({\n  components: {\n    Layouter,\n    Viewer,\n    GlueInteraction,\n    PathInteraction,\n    TriangulationInteraction,\n    LabelInteraction,\n  },\n})\nexport default class Widget extends Vue {\n  @Prop({ required: true, type: String }) triangulation!: string;\n  @Prop({ required: false, default: () => [], type: Array }) flowComponents!: string[];\n  @Prop({ required: false, default: null, type: String }) vertical!: string | null;\n  @Prop({ required: false, default: true, type: Boolean }) showInnerEdges!: boolean;\n  @Prop({ required: false, default: true, type: Boolean }) showOuterHalfEdges!: boolean;\n  @Prop({ required: false, default: true, type: Boolean }) showOuterLabels!: boolean;\n  @Prop({ required: false, default: false, type: Boolean }) showNumericLabels!: boolean;\n  @Prop({ required: false, default: null, type: String }) action!: string | null;\n\n  coordinateSystem = new CoordinateSystem(true);\n\n  @Ref()\n  readonly viewer!: IViewer;\n\n  get parsedTriangulation(): FlatTriangulation {\n    return FlatTriangulation.parse(YAML.parse(this.triangulation), this.coordinateSystem);\n  }\n\n  get parsedFlowComponents(): FlowComponent[] {\n    return this.flowComponents.map((component) => FlowComponent.parse(YAML.parse(component), this.coordinateSystem));\n  }\n\n  get parsedVertical() {\n    if (this.vertical == null)\n      return null;\n\n    return Vertical.parse(YAML.parse(this.vertical), this.coordinateSystem);\n  }\n\n  async svg() {\n    return await this.viewer.svg();\n  }\n\n  @Ref()\n  readonly layouter!: Layouter;\n\n  async layout(when: \"now\" | \"changed\") {\n    return await this.layouter.query(when);\n  }\n\n  @Ref()\n  readonly glueInteraction!: IGlueInteraction;\n\n  async glued(when: \"now\" | \"changed\") {\n    return await this.glueInteraction.query(when);\n  }\n\n  async glue(glued: {[positive: number]: boolean}) {\n    const layout = await this.glueInteraction.force(glued);\n    this.viewer.refocus();\n    return layout;\n  }\n\n  @Ref()\n  readonly pathInteraction!: IPathInteraction;\n\n  async path(when: \"now\" | \"completed\" | \"changed\") {\n    return await this.pathInteraction.query(when);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Widget.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Widget.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Widget.vue?vue&type=template&id=6f8c15ca&scoped=true&\"\nimport script from \"./Widget.vue?vue&type=script&lang=ts&\"\nexport * from \"./Widget.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Widget.vue?vue&type=style&index=0&id=6f8c15ca&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f8c15ca\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Ref, Vue, Watch } from \"vue-property-decorator\";\n\nimport YAML from \"yaml\";\nimport WidgetComponent from \"@/components/Widget.vue\";\nimport type { FlatTriangulationSchema } from \"@/flatsurf/FlatTriangulation\";\nimport type { FlowComponentSchema } from \"@/flatsurf/FlowComponent\";\nimport type { VerticalSchema } from \"@/flatsurf/Vertical\";\n\n@Component({\n  components: {\n    WidgetComponent,\n  },\n})\nexport default class Widget extends Vue {\n  showInnerEdges = true;\n  showOuterHalfEdges = true;\n\n  showOuterLabels = true;\n  showNumericLabels = false;\n\n  showFlowComponents = false;\n\n  applyVertical = true;\n\n  actions = [\n    {text: \"None\", value: null},\n    {text: \"Change Layout\", value: \"glue\"},\n    {text: \"Draw Path\", value: \"path\"},\n  ]\n\n  action = \"glue\";\n\n  info = \"(none)\";\n\n  queries = [\"SVG\", \"Path\", \"Complete Path\", \"Path Change\", \"Layout\", \"Layout Change\", \"Glue\", \"Glue Change\", \"Force Gluing\"];\n\n  query = 'Path'\n\n  parameters = \"{1: true, 2: false}\"\n\n  get yaml() {\n    return YAML.parse(this.$store.state.raw);\n  }\n\n  get triangulation() {\n    const schema: FlatTriangulationSchema = {\n      vertices: this.yaml.vertices,\n      vectors: this.yaml.vectors,\n    };\n    return YAML.stringify(schema);\n  }\n\n  get flowComponents() {\n    if (!this.showFlowComponents)\n      return [];\n\n    const schema: FlowComponentSchema[] = this.yaml.components || [];\n\n    return schema.map((component) => YAML.stringify(component));\n  }\n\n  get vertical() {\n    if (this.yaml.vertical == null)\n      return null;\n\n    if (!this.applyVertical)\n      return null;\n\n    const schema: VerticalSchema = this.yaml.vertical;\n\n    return YAML.stringify(schema);\n  }\n\n  @Watch(\"query\", {immediate: true})\n  onQueryChanged() {\n    this.info = \"(none)\";\n  }\n\n  async performQuery() {\n    this.info = \"\";\n\n    const query = (() => {\n      if (this.query === \"SVG\")\n        return this.widget.svg();\n      if (this.query === 'Path')\n        return this.widget.path(\"now\");\n      if (this.query === 'Complete Path')\n        return this.widget.path(\"completed\");\n      if (this.query === 'Path Change')\n        return this.widget.path(\"changed\");\n      if (this.query === 'Layout')\n        return this.widget.layout(\"now\");\n      if (this.query === \"Layout Change\")\n        return this.widget.layout(\"changed\");\n      if (this.query === \"Glue\")\n        return this.widget.glued(\"now\");\n      if (this.query === \"Glue Change\")\n        return this.widget.glued(\"changed\");\n      if (this.query === \"Force Gluing\")\n        return (async () => {\n          const glued = JSON.parse(this.parameters);\n          return await this.widget.glue(glued);\n        })();\n    })();\n\n    try {\n      const result = await query;\n      this.info = JSON.stringify(result);\n    } catch(e) {\n      this.info = e.message;\n    }\n  }\n\n  @Ref()\n  readonly widget!: WidgetComponent;\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Widget.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Widget.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Widget.vue?vue&type=template&id=8ae62606&scoped=true&\"\nimport script from \"./Widget.vue?vue&type=script&lang=ts&\"\nexport * from \"./Widget.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Widget.vue?vue&type=style&index=0&id=8ae62606&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8ae62606\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardText,VCardTitle,VCheckbox,VCol,VContainer,VRow,VSelect,VTextField})\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport type { Route } from \"vue-router\";\n\nimport Viewer from './Viewer.vue';\nimport ViewerMenu from './ViewerMenu.vue';\nimport Editor from './Editor.vue';\nimport EditorMenu from './EditorMenu.vue';\nimport Export from './Export.vue';\nimport Widget from './Widget.vue';\n\nimport castArray from \"lodash-es/castArray\";\n\nfunction viewerProps(route: Route) {\n  return {\n    action: route.query.action || \"glue\",\n    show: castArray(route.query.show || [\"outer\", \"outer-labels\", \"triangulation\"]),\n  };\n}\n\nfunction exportProps(route: Route) {\n  return {\n    action: \"view\",\n    show: castArray(route.query.show || [\"outer\", \"outer-labels\"]),\n  };\n}\n\nconst routes = [\n  { path: '/', redirect: '/view' },\n  { path: '/view', components: {\n      default: Viewer,\n      menu: ViewerMenu,\n    },\n    props: {\n      default: viewerProps,\n      menu: viewerProps,\n    },\n  },\n  { path: '/edit', components: {\n    default: Editor,\n    menu: EditorMenu,\n  }},\n  { path: '/svg', components: {\n      default: Export,\n    },\n    props: {\n      default: exportProps,\n    },\n  },\n  { path: '/widget', components: {\n      default: Widget,\n    },\n  },\n  { path: '*', redirect: '/view' },\n]\n\nexport default routes;\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport HalfEdge from \"./HalfEdge\";\n\ntype HalfEdgeMap = { [preimage: number]: HalfEdge };\n\nexport interface AutomorphismSchema {\n  halfEdges: HalfEdgeMap,\n};\n\n/*\n * An automorphism of a Flat Triangulation.\n */\nexport default class Automorphism {\n  public static parse(yaml: AutomorphismSchema): Automorphism {\n    return new Automorphism(yaml.halfEdges);\n  }\n\n  private constructor(halfEdges: HalfEdgeMap ) {\n    const set = (preimage: HalfEdge, image: HalfEdge) => {\n      if (halfEdges.hasOwnProperty(preimage))\n        console.assert(halfEdges[preimage] === image);\n      halfEdges[preimage] = image;\n    };\n\n    for (const [key, image] of Object.entries(halfEdges)) {\n      const preimage = Number(key);\n      set(-preimage, -image);\n      set(image, preimage);\n      set(-image, -preimage);\n    }\n\n    this.halfEdgeMap = halfEdges;\n  }\n\n  // The mapping of half edges under the automorphism.\n  // This mapping might not contain all half edges if the automorphism is only\n  // defined on the level of the Delaunay cells of the triangulation.\n  public readonly halfEdgeMap: HalfEdgeMap;\n}\n\n\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport type { StoreOptions } from \"vuex\";\nimport YAML from \"yaml\";\n\nimport FlatTriangulation from '@/flatsurf/FlatTriangulation';\nimport FlowComponent from '@/flatsurf/FlowComponent';\nimport Automorphism from '@/flatsurf/Automorphism';\nimport CoordinateSystem from '@/geometry/CoordinateSystem';\nimport Layout from \"@/layout/Layout\";\nimport Vertical from \"@/flatsurf/Vertical\";\n\nconst state = {\n  raw: \"\",\n  error: null as null | string,\n  triangulation: null as null | FlatTriangulation,\n  vertical: null as null | Vertical,\n  flowComponents: null as null | FlowComponent[],\n  automorphisms: null as null | Automorphism[],\n  layout: null as null | Layout,\n  coordinateSystem: new CoordinateSystem(true),\n};\n\nconst store: StoreOptions<typeof state> = {\n  state,\n  actions: {\n    reset: function({ commit, state }, payload: { raw: string }) {\n      try {\n        const parsed = YAML.parse(payload.raw);\n\n        const triangulation = FlatTriangulation.parse(parsed, state.coordinateSystem);\n        const vertical = Vertical.parse(parsed.vertical || { x: 0, y: 1 }, state.coordinateSystem);\n        const flowComponents = (parsed.components || []).map((component: any) => FlowComponent.parse(component, state.coordinateSystem));\n        const automorphisms = (parsed.automorphisms || []).map((automorphism: any) => Automorphism.parse(automorphism));\n\n        commit('reset', {\n          raw: payload.raw,\n          triangulation,\n          vertical,\n          flowComponents,\n          automorphisms,\n        });\n      } catch (e) {\n        commit('error', {message: e.message});\n      }\n    },\n  },\n  mutations: {\n    layout: function(state, payload: {\n      layout: Layout\n    }) {\n      state.layout = payload.layout;\n    },\n\n    reset: function(state, payload: {\n      raw: string,\n      triangulation: FlatTriangulation,\n      vertical: Vertical,\n      flowComponents: FlowComponent[],\n      automorphisms: Automorphism[],\n    }) {\n      state.raw = payload.raw;\n      state.triangulation = payload.triangulation;\n      state.vertical = payload.vertical;\n      state.flowComponents = payload.flowComponents;\n      state.automorphisms = payload.automorphisms;\n      state.layout = null;\n      state.error = null;\n    },\n\n    error: function(state, payload: { message: string }) {\n      state.error = payload.message;\n    },\n  },\n};\n\nexport default store;\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Vue, { VNode } from 'vue';\nimport App from './App.vue';\nimport Vuetify from 'vuetify/lib';\nimport VueRouter from 'vue-router'\nimport Vuex from 'vuex';\nimport AsyncComputed from \"vue-async-computed\";\nimport '@mdi/font/css/materialdesignicons.css'\n\nimport routes from \"./routes\";\nimport store from \"./store\";\n\nimport raw from \"!!raw-loader!./2-3-4.txt\";\n\nVue.config.productionTip = false;\n\nVue.use(Vuetify);\nVue.use(VueRouter);\nVue.use(Vuex);\nVue.use(AsyncComputed);\n\nnew Vue({\n    render: (h): VNode => h(App),\n    vuetify: new Vuetify({}),\n    router: new VueRouter({ routes }),\n    store: new Vuex.Store(store),\n    created() {\n      this.$store.dispatch(\"reset\", { raw });\n    }\n}).$mount('#app');\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) var result = runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkvue_flatsurf\"] = self[\"webpackChunkvue_flatsurf\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(8470); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"sourceRoot":""}