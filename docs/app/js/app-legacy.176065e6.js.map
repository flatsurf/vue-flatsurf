{"version":3,"sources":["webpack://vue-flatsurf/./demo/App.vue?c9f9","webpack://vue-flatsurf/./src/components/PanZoom.vue?84f3","webpack://vue-flatsurf/./src/geometry/Point.ts","webpack://vue-flatsurf/./src/geometry/Box.ts","webpack://vue-flatsurf/./src/geometry/Polygon.ts","webpack://vue-flatsurf/./src/NumberParser.ts","webpack://vue-flatsurf/./src/geometry/Vector.ts","webpack://vue-flatsurf/./src/geometry/Segment.ts","webpack://vue-flatsurf/./src/geometry/Line.ts","webpack://vue-flatsurf/./src/geometry/CoordinateSystem.ts","webpack://vue-flatsurf/./src/geometry/Viewport.ts","webpack://vue-flatsurf/./src/components/PanZoom.vue","webpack://vue-flatsurf/./src/components/PanZoom.vue?9fa1","webpack://vue-flatsurf/./src/components/PanZoom.vue?7336","webpack://vue-flatsurf/./src/components/Viewer.vue?4a9c","webpack://vue-flatsurf/./src/flatsurf/Edge.ts","webpack://vue-flatsurf/./src/components/flatsurf/options/VisualizationOptions.ts","webpack://vue-flatsurf/./src/wait.ts","webpack://vue-flatsurf/./src/components/flatsurf/Flatsurf.vue?75cf","webpack://vue-flatsurf/./src/Palette.ts","webpack://vue-flatsurf/./src/export/SVGExporter.ts","webpack://vue-flatsurf/./src/components/flatsurf/FlatTriangulation.vue?32f7","webpack://vue-flatsurf/./src/components/flatsurf/Face.vue?1e73","webpack://vue-flatsurf/./src/components/svg/Ngon.vue?a568","webpack://vue-flatsurf/./src/components/svg/Ngon.vue","webpack://vue-flatsurf/./src/components/svg/Ngon.vue?259e","webpack://vue-flatsurf/./src/components/svg/Ngon.vue?ed49","webpack://vue-flatsurf/./src/components/flatsurf/Face.vue","webpack://vue-flatsurf/./src/components/flatsurf/Face.vue?96c7","webpack://vue-flatsurf/./src/components/flatsurf/Face.vue?4708","webpack://vue-flatsurf/./src/components/flatsurf/HalfEdge.vue?0507","webpack://vue-flatsurf/./src/components/svg/Segment.vue?e4b2","webpack://vue-flatsurf/./src/components/svg/Segment.vue","webpack://vue-flatsurf/./src/components/svg/Segment.vue?4ff6","webpack://vue-flatsurf/./src/components/svg/Segment.vue?c246","webpack://vue-flatsurf/./src/components/svg/SegmentLabel.vue?0672","webpack://vue-flatsurf/./src/components/svg/SegmentLabel.vue","webpack://vue-flatsurf/./src/components/svg/SegmentLabel.vue?f6d6","webpack://vue-flatsurf/./src/components/svg/SegmentLabel.vue?aaf3","webpack://vue-flatsurf/./src/components/svg/Arrow.vue?7e7f","webpack://vue-flatsurf/./src/components/svg/Arrow.vue","webpack://vue-flatsurf/./src/components/svg/Arrow.vue?d680","webpack://vue-flatsurf/./src/components/svg/Arrow.vue?5da5","webpack://vue-flatsurf/./src/components/svg/SegmentIcon.vue?fbf2","webpack://vue-flatsurf/./src/components/svg/Icon.vue?9a56","webpack://vue-flatsurf/./src/components/svg/Icon.vue","webpack://vue-flatsurf/./src/components/svg/Icon.vue?3820","webpack://vue-flatsurf/./src/components/svg/Icon.vue?42ef","webpack://vue-flatsurf/./src/components/svg/SegmentIcon.vue","webpack://vue-flatsurf/./src/components/svg/SegmentIcon.vue?8907","webpack://vue-flatsurf/./src/components/svg/SegmentIcon.vue?cad8","webpack://vue-flatsurf/./src/components/flatsurf/HalfEdge.vue","webpack://vue-flatsurf/./src/components/flatsurf/HalfEdge.vue?280f","webpack://vue-flatsurf/./src/components/flatsurf/HalfEdge.vue?0f49","webpack://vue-flatsurf/./src/components/flatsurf/Edge.vue?26e2","webpack://vue-flatsurf/./src/components/flatsurf/Edge.vue","webpack://vue-flatsurf/./src/components/flatsurf/Edge.vue?92c5","webpack://vue-flatsurf/./src/components/flatsurf/Edge.vue?2f81","webpack://vue-flatsurf/./src/components/flatsurf/FlatTriangulation.vue","webpack://vue-flatsurf/./src/components/flatsurf/FlatTriangulation.vue?8ebb","webpack://vue-flatsurf/./src/components/flatsurf/FlatTriangulation.vue?8c1c","webpack://vue-flatsurf/./src/components/flatsurf/FlowComponent.vue?68c5","webpack://vue-flatsurf/./src/components/flatsurf/SaddleConnection.vue?5fd0","webpack://vue-flatsurf/./src/components/flatsurf/Path.vue?ecca","webpack://vue-flatsurf/./src/components/svg/Point.vue?6c10","webpack://vue-flatsurf/./src/components/svg/Point.vue","webpack://vue-flatsurf/./src/components/svg/Point.vue?2e7f","webpack://vue-flatsurf/./src/components/svg/Point.vue?5714","webpack://vue-flatsurf/./src/components/flatsurf/Path.vue","webpack://vue-flatsurf/./src/components/flatsurf/Path.vue?9850","webpack://vue-flatsurf/./src/components/flatsurf/Path.vue?69f1","webpack://vue-flatsurf/./src/components/flatsurf/SaddleConnection.vue","webpack://vue-flatsurf/./src/components/flatsurf/SaddleConnection.vue?bf58","webpack://vue-flatsurf/./src/components/flatsurf/SaddleConnection.vue?9746","webpack://vue-flatsurf/./src/components/flatsurf/FlowComponent.vue","webpack://vue-flatsurf/./src/components/flatsurf/FlowComponent.vue?3366","webpack://vue-flatsurf/./src/components/flatsurf/FlowComponent.vue?b3cc","webpack://vue-flatsurf/./src/components/flatsurf/Flatsurf.vue","webpack://vue-flatsurf/./src/components/flatsurf/Flatsurf.vue?71cf","webpack://vue-flatsurf/./src/components/flatsurf/Flatsurf.vue?5601","webpack://vue-flatsurf/./src/components/Viewer.vue","webpack://vue-flatsurf/./src/components/Viewer.vue?fc48","webpack://vue-flatsurf/./src/components/Viewer.vue?2de7","webpack://vue-flatsurf/./src/CancellationToken.ts","webpack://vue-flatsurf/./src/Progress.ts","webpack://vue-flatsurf/./demo/Overlay.vue?672f","webpack://vue-flatsurf/./demo/Overlay.vue","webpack://vue-flatsurf/./demo/Overlay.vue?3854","webpack://vue-flatsurf/./demo/Overlay.vue?d4f7","webpack://vue-flatsurf/./src/components/interactions/GlueInteraction.vue?1381","webpack://vue-flatsurf/./src/layout/LayoutOptions.ts","webpack://vue-flatsurf/./src/components/interactions/GlueInteraction.vue","webpack://vue-flatsurf/./src/components/interactions/GlueInteraction.vue?eb26","webpack://vue-flatsurf/./src/components/interactions/GlueInteraction.vue?0e8a","webpack://vue-flatsurf/./src/components/interactions/PathInteraction.vue?6787","webpack://vue-flatsurf/./src/flatsurf/HalfEdge.ts","webpack://vue-flatsurf/./src/components/interactions/PathInteraction.vue","webpack://vue-flatsurf/./src/components/interactions/PathInteraction.vue?b888","webpack://vue-flatsurf/./src/components/interactions/PathInteraction.vue?4550","webpack://vue-flatsurf/./demo/BottomNavigation.vue?aef4","webpack://vue-flatsurf/./demo/BottomNavigation.vue","webpack://vue-flatsurf/./demo/BottomNavigation.vue?dcb8","webpack://vue-flatsurf/./demo/BottomNavigation.vue?3de9","webpack://vue-flatsurf/./demo/App.vue","webpack://vue-flatsurf/./demo/App.vue?2c48","webpack://vue-flatsurf/./demo/App.vue?7ebf","webpack://vue-flatsurf/./demo/Viewer.vue?73e4","webpack://vue-flatsurf/./src/components/interactions/TriangulationInteraction.ts","webpack://vue-flatsurf/./src/components/interactions/LabelInteraction.ts","webpack://vue-flatsurf/./src/layout/CellLayout.ts","webpack://vue-flatsurf/./src/layout/Layout.ts","webpack://vue-flatsurf/./src/components/Layouter.ts","webpack://vue-flatsurf/./demo/Viewer.vue","webpack://vue-flatsurf/./demo/Viewer.vue?5218","webpack://vue-flatsurf/./demo/Viewer.vue?8cd9","webpack://vue-flatsurf/./demo/ViewerMenu.vue?111c","webpack://vue-flatsurf/./demo/ViewerMenu.vue","webpack://vue-flatsurf/./demo/ViewerMenu.vue?2ab3","webpack://vue-flatsurf/./demo/ViewerMenu.vue?7341","webpack://vue-flatsurf/./demo/Editor.vue?d23a","webpack://vue-flatsurf/./demo/Editor.vue","webpack://vue-flatsurf/./demo/Editor.vue?3298","webpack://vue-flatsurf/./demo/Editor.vue?7024","webpack://vue-flatsurf/./demo/EditorMenu.vue?6be7","webpack://vue-flatsurf/./demo/torus.txt","webpack://vue-flatsurf/./demo/1-1-1.txt","webpack://vue-flatsurf/./demo/1-1-3.txt","webpack://vue-flatsurf/./demo/1-1-3-without-marked-point.txt","webpack://vue-flatsurf/./demo/1-2-2.txt","webpack://vue-flatsurf/./demo/1-2-2-without-marked-point.txt","webpack://vue-flatsurf/./demo/1-2-5.txt","webpack://vue-flatsurf/./demo/2-3-4.txt","webpack://vue-flatsurf/./demo/disconnected.txt","webpack://vue-flatsurf/./demo/1_2_2_1.txt","webpack://vue-flatsurf/./demo/EditorMenu.vue","webpack://vue-flatsurf/./demo/EditorMenu.vue?cd6b","webpack://vue-flatsurf/./demo/EditorMenu.vue?1482","webpack://vue-flatsurf/./demo/Export.vue?5733","webpack://vue-flatsurf/./demo/Export.vue","webpack://vue-flatsurf/./demo/Export.vue?7756","webpack://vue-flatsurf/./demo/Export.vue?c861","webpack://vue-flatsurf/./demo/Widget.vue?c609","webpack://vue-flatsurf/./src/components/Widget.vue?a4b6","webpack://vue-flatsurf/./src/flatsurf/Permutation.ts","webpack://vue-flatsurf/./src/flatsurf/Vertex.ts","webpack://vue-flatsurf/./src/flatsurf/FlatTriangulation.ts","webpack://vue-flatsurf/./src/flatsurf/SaddleConnection.ts","webpack://vue-flatsurf/./src/flatsurf/FlowConnection.ts","webpack://vue-flatsurf/./src/flatsurf/FlowComponent.ts","webpack://vue-flatsurf/./src/flatsurf/Path.ts","webpack://vue-flatsurf/./src/flatsurf/Vertical.ts","webpack://vue-flatsurf/./src/components/Widget.vue","webpack://vue-flatsurf/./src/components/Widget.vue?9a6f","webpack://vue-flatsurf/./src/components/Widget.vue?9405","webpack://vue-flatsurf/./demo/Widget.vue","webpack://vue-flatsurf/./demo/Widget.vue?60eb","webpack://vue-flatsurf/./demo/Widget.vue?095f","webpack://vue-flatsurf/./demo/routes.ts","webpack://vue-flatsurf/./src/flatsurf/Automorphism.ts","webpack://vue-flatsurf/./demo/store.ts","webpack://vue-flatsurf/./demo/main.ts","webpack://vue-flatsurf/webpack/bootstrap","webpack://vue-flatsurf/webpack/runtime/chunk loaded","webpack://vue-flatsurf/webpack/runtime/compat get default export","webpack://vue-flatsurf/webpack/runtime/define property getters","webpack://vue-flatsurf/webpack/runtime/global","webpack://vue-flatsurf/webpack/runtime/hasOwnProperty shorthand","webpack://vue-flatsurf/webpack/runtime/make namespace object","webpack://vue-flatsurf/webpack/runtime/jsonp chunk loading","webpack://vue-flatsurf/webpack/startup"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","overlay","progress","staticRenderFns","ref","class","pan","on","$event","viewport","_t","_e","Point","parent","x","y","value","equalTo","rhs","epsilon","Math","abs","embed","toString","shape","translate","vector","Box","xy0","xy1","clone","console","assert","Array","min","max","shapes","length","Error","boxes","map","box","reduce","a","b","merge","contain","aspectRatio","xmin","height","width","ymin","xmax","ymax","other","xy","toPoints","point","low","high","Polygon","face","addFace","convexHull","vertices","points","coordinateSystem","p","some","hull","q","last","next","leftTo","push","error","pop","polygon","minArea","minAreaRect","edge","edges","segment","direction","tangentInStart","theta","angleTo","rotation","cos","sin","aligned","transform","area","inverse","vertex","faces","start","lfaces","rfaces","lface","rface","rot","keys","every","i","rindex","findIndex","splice","positive","reverse","parenthesize","parser","wrap","NumberLanguage","Float","Number","desc","Integer","Fraction","r","_","Approximation","SymbolicApproximated","__","Real","SymbolicParenthesized","entries","Negative","Primitive","Product","MaybeNegative","MaybeProduct","Sum","MaybeSum","op","parse","tryParse","replaceAll","isNaN","Vector","data","trim","pattern","match","rotate90CW","rotate90CCW","normalize","multiply","scalar","ccw","invert","add","v","Segment","end","CoordinateSystem","undefined","middle","tangentInEnd","at","relative","delta","intersect","intersections","intersects","relativize","e","toPoint","dot","touch","Line","pt","norm","intersection","A","a00","a01","a02","a10","a11","a12","a20","a21","a22","c","tx","d","ty","adj","det","inv","affine","embedInto","into","embedding","token","JSON","stringify","existing","lookup","warn","insert","update","reset","from","registered","get","codomain","invalidate","delete","size","discovered","discover","origin","Map","has","set","Object","freeze","dependents","domain","reachable","Set","path","search","definition","dependency","follow","to","Viewport","ideal","idealCoordinateSystem","viewportCoordinateSystem","dimensions","visible","focused","resize","focus","zoom","factor","center","centerBefore","centerAfter","destroy","PanZoom","observer","ResizeObserver","unpanzoom","container","redimension","refocus","changed","$emit","onCoordinateSystemChange","cleanup","initialize","mounted","$el","panzoom","observe","beforeDestroy","unobserve","clientWidth","window","innerWidth","clientHeight","innerHeight","navigator","userAgent","includes","dz","exp","dx","dy","required","type","default","component","scopedSlots","_u","key","fn","layout","triangulation","visualizationOptions","visibleFlowComponents","saddleConnections","paths","model","callback","$$v","expression","Edge","halfEdge","negative","VisualizationOptions","ensure","halfEdges","indicator","selected","label","icon","indicate","select","show","async","wait","vm","Promise","resolve","unwatches","castArray","$watch","unwatch","_g","$listeners","svgCoordinateSystem","_l","palette","color","connection","Palette","constructor","colors","space","seed","colorSpace","SVGExporter","svg","cloneNode","styles","getElementsByTagName","computedStyle","tagName","document","createElement","appendChild","unshift","setAttribute","element","style","getComputedStyle","computed","getPropertyValue","index","children","dropClasses","child","removeAttribute","dropPrefixedStyles","fromEntries","filter","_value","startsWith","dropInvisible","trash","addToTrash","forEach","_style","values","parentNode","removeChild","dropRedundantStyles","dropCustomAttributes","attributes","attribute","name","dropNonStandardStyles","standard","usePresentationAttributes","makePresentation","hasAttribute","simplifyColors","simplify","okey","getAttribute","opacity","String","dropTrivialStyles","dropNonInkscapeStyles","dropInteractiveStyles","inlineStyles","join","svgo","outerHTML","sourceIndicators","options","Ngon","Face","components","_v","_s","indicatorPosition","source","animated","coords","line","onAnimationEnd","onAnimated","addEventListener","removeEventListener","embedded","Boolean","transformation","HalfEdgeLabel","midpoint","normal","position","x1","y1","x2","y2","atEnd","Arrow","endWithoutHead","PI","SegmentIcon","Icon","HalfEdgeComponent","sourceIndicator","SegmentComponent","SegmentLabel","EdgeComponent","FlatTriangulation","cycles","he","primary","s","t","w","angle","degree","segments","animation","radius","PathComponent","connections","flatten","toSegments","crossings","target","crossing","shift","inner","crossingEdge","crossingLine","alongHalfEdge","PointComponent","SaddleConnection","FlowComponent","surface","ats","touches","perimeter","cylinder","vertical","boundary","resetCaches","ensureCaches","floor","patch","isHalfEdge","B","C","scenario","atouches","btouches","patchHalfEdge","image","preimage","triangles","inside","patches","glue","ngon","triangle","step","n","nn","immediate","SaddleConnectionComponent","Flatsurf","flowComponents","$nextTick","exporter","FlatTriangulationComponent","FlowComponentComponent","Viewer","onCoordinateSystemChanged","onLayoutChanged","$refs","flatsurf","OperationAborted","CancellationToken","cancellationRequested","reject","aborted","setTimeout","cancelled","cancel","abort","Progress","steps","task","cancellation","Overlay","onCancellation","stats","VBtn","hover","unhover","LayoutOptions","automorphisms","glued","orbit","automorphism","halfEdgeMap","GlueInteraction","relayout","events","kind","ev","id","random","previousStart","previousFocus","reglue","onEvent","mdi","clamp","parentElement","clientX","getBoundingClientRect","left","clientY","top","when","Function","indexOf","_k","keyCode","edit","append","nextSegment","fromPathPoint","cross","PathInteraction","editable","item","toPathPoint","previous","toSegment","sector","noop","present","controlPoints","$route","$router","query","BottomNavigation","$store","state","VBadge","App","VApp","layoutChanged","action","TriangulationInteraction","outer","resetVisiblity","nextLabel","chars","split","charCodeAt","code","fromCharCode","TriangulationVisibilityInteraction","numeric","alpha","CellLayout","cell","boundingRectArea","boundingRect","before","glues","otherPolygon","touchConsistent","boundaries","side","pending","cells","cache","_progress","scores","find","score","best","minBy","ca","cb","dc","x00","x01","x02","x10","x11","x12","x20","x21","x22","delaunay","ungluedArea","gluedArea","isArray","hasOwnProperty","unpacked","packed","unpackedCell","unpackedHalfEdge","packedCell","packedHalfEdge","pairsOfHalfEdges","flatMap","packedCells","packable","unpackedSegment","packedSegment","log","screen","Layout","recompute","pack","assign","flat","bbox","runSilently","Layouter","effectiveLayout","run","$scopedSlots","pendingRelayout","layoutOptions","onSurfaceChanged","commit","ViewerComponent","LabelInteraction","showActions","actions","proxy","goto","showParts","parts","part","ViewerMenu","replace","raw","Editor","dispatch","VCard","predefined","domProps","EditorMenu","yaml","VList","l","tab","base64","staticStyle","Export","ready","btoa","unescape","encodeURIComponent","onTriangulationChange","showInnerEdges","showOuterHalfEdges","showNumericLabels","showOuterLabels","showFlowComponents","applyVertical","showAnimations","queries","info","parameters","performQuery","parsedTriangulation","parsedFlowComponents","parsedVertical","parsedSaddleConnections","parsedPaths","Permutation","fromCycles","substr","cycle","mapping","fromMapping","entry","xor","Vertex","mapValues","zipObject","partition","substring","vectors","vertexes","fromPermutation","sum","FlowConnection","Vertical","rotated","rotate","Widget","_viewer","layouter","$once","viewer","_glueInteraction","glueInteraction","force","_pathInteraction","pathInteraction","text","schema","onQueryChanged","widget","result","message","WidgetComponent","viewerProps","route","exportProps","routes","redirect","menu","props","Automorphism","store","payload","parsed","mutations","h","vuetify","router","created","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","getter","__esModule","o","defineProperty","enumerable","g","globalThis","obj","prop","prototype","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"mappings":"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","file":"js/app-legacy.176065e6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('v-main',[_c('v-container',{staticClass:\"container\",attrs:{\"fluid\":\"\"}},[_c('router-view')],1),_c('overlay',{attrs:{\"cancellation\":_vm.overlay,\"progress\":_vm.progress}})],1),_c('router-view',{attrs:{\"name\":\"menu\"}}),_c('bottom-navigation')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",class:{ pan: _vm.pan },on:{\"mousedown\":function($event){_vm.pan = true},\"mouseup\":function($event){_vm.pan = false}}},[(_vm.viewport != null)?_vm._t(\"default\",null,{\"viewport\":_vm.viewport}):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* ******************************************************************************\n * Copyright (c) 2020 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Flatten from \"@flatten-js/core\";\n\nimport CoordinateSystem, { Coordinate } from \"./CoordinateSystem\";\nimport Vector from './Vector';\nimport Polygon from './Polygon';\nimport Segment from './Segment';\n\nexport default class Point {\n  public constructor(parent: CoordinateSystem, x: Coordinate, y: Coordinate);\n  public constructor(parent: CoordinateSystem, p: Flatten.Point);\n  public constructor(parent: CoordinateSystem, x: Coordinate | Flatten.Point, y?: Coordinate) {\n    this.parent = parent;\n    if (typeof(x) === \"number\")\n      this.value = new Flatten.Point(x, y);\n    else\n      this.value = x;\n  }\n  \n  public get x() { return this.value.x; }\n  public get y() { return this.value.y; }\n  public get xy() : [Coordinate, Coordinate] { return [this.x, this.y]; }\n\n  public equalTo(rhs: Point, epsilon: number = 0): boolean {\n    if (this.parent === rhs.parent)\n      return Math.abs(this.x - rhs.x) <= epsilon && Math.abs(this.y - rhs.y) <= epsilon;\n    return this.parent.embed(rhs).equalTo(this);\n  }\n\n  public toString(): string {\n    return `(${this.x}, ${this.y})`;\n  }\n\n  public on(shape: Polygon): boolean;\n  public on(shape: Segment): boolean;\n  public on(shape: Polygon | Segment): boolean {\n    return shape.parent.embed(this).value.on(shape.value);\n  }\n\n  public translate(vector: Vector): Point {\n    return new Point(this.parent, this.value.translate(this.parent.embed(vector).value));\n  }\n\n  public readonly parent: CoordinateSystem;\n  public readonly value: Flatten.Point;\n}\n","/* ******************************************************************************\n * Copyright (c) 2020 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Flatten from \"@flatten-js/core\";\n\nimport CoordinateSystem, { Coordinate } from \"./CoordinateSystem\";\nimport Point from \"./Point\";\nimport Segment from './Segment';\nimport Vector from \"./Vector\";\n\nexport default class Box {\n  public constructor(parent: CoordinateSystem, box: Flatten.Box);\n  public constructor(parent: CoordinateSystem, xy0: [Coordinate, Coordinate], xy1: [Coordinate, Coordinate]);\n  public constructor(parent: CoordinateSystem, xy0: [Coordinate, Coordinate] | Flatten.Box, xy1?: [Coordinate, Coordinate]) {\n    this.parent = parent;\n\n    if (xy0 instanceof Flatten.Box) {\n      this.value = xy0.clone();\n    } else {\n      console.assert(xy1 instanceof Array);\n      this.value = new Flatten.Box(Math.min(xy0[0], xy1![0]), Math.min(xy0[1], xy1![1]), Math.max(xy0[0], xy1![0]), Math.max(xy0[1], xy1![1]));\n    }\n  }\n\n  public static bbox(shapes: Array<Point|Segment>): Box {\n    if (shapes.length === 0)\n      throw Error(\"cannot create bounding box of nothing\");\n\n    const boxes = shapes.map((shape) => {\n      if (shape instanceof Point)\n        return new Box(shape.parent, [shape.value.x, shape.value.y], [shape.value.x, shape.value.y]);\n      else\n        return new Box(shape.parent, shape.value.box);\n    });\n    return boxes.reduce((a: Box, b: Box) => a.merge(b));\n  }\n\n  // Return an enlargened version of this box that has the prescribed aspect\n  // ratio (leaving one of its dimensions untouched and centering it in the\n  // other dimension.)\n  public contain(aspectRatio: number) {\n    if (this.aspectRatio < aspectRatio)\n      return new Box(this.parent, [this.value.xmin - (this.height * aspectRatio - this.width) / 2, this.value.ymin], [this.value.xmax + (this.height * aspectRatio - this.width) / 2, this.value.ymax]);\n    else\n      return new Box(this.parent, [this.value.xmin, this.value.ymin - (this.width / aspectRatio - this.height) / 2], [this.value.xmax, this.value.ymax + (this.width / aspectRatio - this.height) / 2]);\n  }\n\n  public merge(other: Box): Box {\n    return new Box(this.parent, this.value.merge(this.parent.embed(other).value.box));\n  }\n\n  public translate(xy: Vector) {\n    xy = this.parent.embed(xy);\n    const x = xy.value.x;\n    const y = xy.value.y;\n    return new Box(this.parent, [this.value.xmin + x, this.value.ymin + y], [this.value.xmax + x, this.value.ymax + y]);\n  }\n\n  public get low() {\n    return new Point(this.parent, this.value.xmin, this.value.ymin);\n  }\n\n  public get high() {\n    return new Point(this.parent, this.value.xmax, this.value.ymax);\n  }\n\n  public get aspectRatio() {\n    return this.width / this.height;\n  }\n\n  public get width() {\n    return this.value.xmax - this.value.xmin;\n  }\n\n  public get center() {\n    return new Point(this.parent, (this.value.xmin + this.value.xmax) / 2, (this.value.ymin + this.value.ymax) / 2);\n  }\n\n  public get height() {\n    return this.value.ymax - this.value.ymin;\n  }\n\n  public toPoints() {\n    return this.value.toPoints().map((point) => new Point(this.parent, point));\n  }\n\n  public equalTo(rhs: Box, epsilon: number = 0): boolean {\n    if (this.parent === rhs.parent)\n      return this.low.equalTo(rhs.low, epsilon) && this.high.equalTo(rhs.high, epsilon);\n    return this.parent.embed(rhs).box.equalTo(this);\n  }\n\n  public readonly parent: CoordinateSystem;\n  public readonly value: Flatten.Box;\n}\n","/* ******************************************************************************\n * Copyright (c) 2020-2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Flatten from \"@flatten-js/core\";\n\nimport findIndex from \"lodash-es/findIndex\";\n\nimport CoordinateSystem, { inverse } from \"./CoordinateSystem\";\nimport Point from \"./Point\";\nimport Box from \"./Box\";\nimport Vector from \"./Vector\";\n\nexport default class Polygon {\n  public constructor(parent: CoordinateSystem, value: Point[][]);\n  public constructor(parent: CoordinateSystem, value: Flatten.Polygon);\n  public constructor(parent: CoordinateSystem, value: Flatten.Polygon | Point[][]) {\n    this.parent = parent;\n    if (value instanceof Flatten.Polygon) {\n      this.value = value;\n    } else if (value instanceof Array) {\n      this.value = new Flatten.Polygon();\n      for (const face of value) {\n        this.value.addFace(face.map((point) => parent.embed(point).value));\n      }\n    } else {\n      throw Error(\"Cannot create polygon from this data.\");\n    }\n  }\n\n  public translate(xy: Vector): Polygon {\n    return new Polygon(this.parent, this.value.translate(this.parent.embed(xy).value));\n  }\n\n  public get convexHull(): Polygon {\n    return Polygon.convexHull(this.vertices);\n  }\n\n  // Compute the convex hull of the points (using the slow Jarvis march\n  // algorithm.)\n  public static convexHull(points: Point[]): Polygon {\n    console.assert(points.length !== 0);\n\n    const coordinateSystem = points[0].parent;\n\n    const vertices = points.map((p) => coordinateSystem.embed(p).value);\n\n    console.assert(vertices.some((p) => !p.equalTo(vertices[0])));\n\n    const hull = [vertices.reduce((p, q) => {\n      if (p.x < q.x)\n        return p;\n      if (p.x > q.x)\n        return q\n      if (p.y < q.y)\n        return p;\n      return q;\n    })];\n\n    do {\n      const last = hull[hull.length - 1];\n      let next = vertices[0].equalTo(last) ? vertices[1] : vertices[0];\n      for (let p of vertices) {\n        if (p.leftTo(new Flatten.Line(last, next)))\n          next = p;\n      }\n      hull.push(next);\n      // TODO: This is numerically too unstable (and hangs sometimes.) See https://github.com/flatsurf/vue-flatsurf/issues/40.\n      if (hull.length > vertices.length + 1) {\n        console.error(\"Convex Hull incorrect\");\n        break;\n      }\n    } while(!hull[hull.length - 1].equalTo(hull[0]));\n\n    hull.pop();\n\n    const polygon = new Flatten.Polygon();\n    polygon.addFace(hull);\n    return new Polygon(coordinateSystem, polygon);\n  }\n\n  // Return a bounding rectangle of minimal area. (The rectangle might not be\n  // axis-aligned.)\n  public get boundingRect(): Polygon {\n    const hull = this.convexHull;\n\n    let minArea = 1./0.;\n    let minAreaRect = null;\n\n    // Algorithm: The minimal bounding rect of a convex polygon must be aligned to one of its sides.\n    for (const edge of hull.value.edges) {\n      // Rotate such that the edge is horizontal.\n      const segment: Flatten.Segment = edge.shape;\n      const direction = segment.tangentInStart();\n      const theta = new Flatten.Vector(1, 0).angleTo(direction);\n      const rotation = new Flatten.Matrix(\n        Math.cos(-theta), -Math.sin(-theta),\n        Math.sin(-theta), Math.cos(-theta),\n      );\n      const aligned = hull.value.transform(rotation);\n\n      // Compute the area of this bounding box.\n      const area = aligned.area();\n\n      if (area < minArea) {\n        minArea = area;\n\n        // Rotate the box back.\n        minAreaRect = new Polygon(this.parent, new Flatten.Polygon(aligned.box.toPoints()).transform(inverse(rotation)));\n      }\n    }\n\n    return minAreaRect!;\n  }\n\n  // Return a bounding box of this polygon in its parent's coordinate system.\n  public get box(): Box {\n    return new Box(this.parent, this.value.box);\n  }\n\n  public get vertices(): Point[] {\n    return this.value.vertices.map((vertex) => new Point(this.parent, vertex));\n  }\n\n  public get faces(): Point[][] {\n    const faces = [...this.value.faces] as Flatten.Face[];\n    return faces.map((face) => face.edges.map((edge) => new Point(this.parent, edge.start)));\n  }\n\n  public equalTo(rhs: Box, epsilon?: number): boolean;\n  public equalTo(rhs: Polygon, epsilon?: number): boolean;\n  public equalTo(rhs: Box | Polygon, epsilon: number = 0): boolean {\n    if (rhs instanceof Polygon) {\n      const lfaces = this.faces;\n      const rfaces = rhs.faces;\n\n      if (lfaces.length !== rfaces.length)\n        return false;\n\n      const equalTo = (lface: Point[], rface: Point[]) => {\n        if (lface.length !== rface.length)\n          return false;\n        for (let rot = 0; rot < lface.length; rot++) {\n          if ([...lface.keys()].every((i) => lface[i].equalTo(rface[(i + rot) % rface.length], epsilon)))\n            return true;\n        }\n        return false;\n      };\n\n      for (const lface of lfaces) {\n        const rindex = findIndex(rfaces, (rface) => equalTo(lface, rface));\n        if (rindex === -1)\n          return false;\n        rfaces.splice(rindex, 1);\n      }\n\n      return true;\n    } else {\n      const points = rhs.toPoints();\n      if (this.parent.positive === rhs.parent.positive)\n        points.reverse();\n      return this.equalTo(new Polygon(this.parent, [points]), epsilon);\n    }\n  }\n\n  public area(): number {\n    return this.value.area();\n  }\n  \n  public readonly parent: CoordinateSystem;\n  public readonly value: Flatten.Polygon;\n}\n","/* ******************************************************************************\n * Copyright (c) 2022 Julian Rüth <julian.rueth@fsfe.org>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport P from \"parsimmon\";\n\nfunction parenthesize<T=any>(parser: P.Parser<T>) {\n  return parser.wrap(P.string(\"(\"), P.string(\")\"));\n}\n\n/*\n * A parser for the numbers as produced by libflatsurf in terminal output.\n */\nexport const NumberLanguage = P.createLanguage({\n  Float: () => P.regexp(/[+-]?[0-9]*\\.[0-9]*/).map(Number).desc(\"float\"),\n  Integer: () => P.regexp(/[+-]?(0|[1-9][0-9]*)/).map(Number).desc(\"int\"),\n  Fraction: (r) => P.seq(r.Integer, P.string(\"/\"), r.Integer).map(([a, _, b]) => a / b).desc(\"fraction\"),\n\n  Approximation: (r) => parenthesize(P.seq(r.SymbolicApproximated, P.string(\"~\"), r.Float)).map(([_,__,x]) => x).desc(\"(?~float)\"),\n  Real: (r) => P.seq(P.string(\"ℝ\"), parenthesize(P.seq(r.Float, P.string(\"=\"), r.SymbolicParenthesized))).map(entries => entries[1][0]).desc(\"real\"),\n\n  // Helper to throw away the left hand side of an approximation (lhs ~ rhs)\n  SymbolicApproximated: (r) => P.alt(\n    P.lookahead(\"~\"),\n    P.seq(P.regexp(/[^~()]+/), r.SymbolicApproximated),\n    P.seq(parenthesize(r.SymbolicParenthesized), r.SymbolicApproximated),\n  ),\n\n  // Helper to throw away the right hand side of a real number (lhs=rhs)\n  SymbolicParenthesized: (r) => P.alt(\n    P.lookahead(\")\"),\n    P.seq(P.regexp(/[^()]+/), r.SymbolicParenthesized),\n    P.seq(parenthesize(r.SymbolicParenthesized), r.SymbolicParenthesized),\n  ),\n\n  // A unary expression -Number\n  Negative: (r) => P.seq(P.string(\"-\"), r.Primitive).map(([_, value]) => -value).desc(\"minus\"),\n\n  // A binary expression A*B\n  Product: (r) => P.seq(r.MaybeNegative, P.string(\"*\"), r.MaybeProduct).map(([a,_,b]) => a*b).desc(\"product\"),\n\n  // A binary expression A±B\n  Sum: (r) => P.seq(r.MaybeProduct, P.regexp(/[+-]/), r.MaybeSum).map(([a,op,b]) => op == '-' ? a-b : a+b).desc(\"sum\"),\n\n  Primitive: (r) => P.alt(r.Fraction, r.Integer, r.Real, r.Approximation, r.Float, parenthesize(r.Number)),\n  MaybeNegative: (r) => P.alt(r.Negative, r.Primitive),\n  MaybeProduct: (r) => P.alt(r.Product, r.MaybeNegative),\n  MaybeSum: (r) => P.alt(r.Sum, r.MaybeProduct),\n  Number: (r) => P.alt(r.MaybeSum),\n})\n\nexport function parse(x: string) {\n  const value = NumberLanguage.Number.tryParse(x.replaceAll(/\\s/g, \"\"));\n  if (typeof(value) !== \"number\")\n    throw Error(`Parsing ${x} did not produce a number but ${value}`);\n  if (isNaN(value))\n    throw Error(`Parsing ${x} produced NaN`);\n  return value;\n}\n","/* ******************************************************************************\n * Copyright (c) 2020 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Flatten from \"@flatten-js/core\";\n\nimport CoordinateSystem, { Coordinate } from \"./CoordinateSystem\";\nimport Point from './Point';\nimport { parse } from \"../NumberParser\";\n\nexport interface VectorSchema {\n  x: number,\n  y: number,\n};\n\nexport default class Vector {\n  public constructor(parent: CoordinateSystem, x: Coordinate, y: Coordinate);\n  public constructor(parent: CoordinateSystem, p: Flatten.Vector);\n  public constructor(parent: CoordinateSystem, a: Point, b: Point);\n  public constructor(parent: CoordinateSystem, x: Coordinate | Flatten.Vector | Point, y?: Coordinate | Point) {\n    this.parent = parent;\n    if (typeof(x) === \"number\" && typeof(y) === \"number\") {\n      this.value = new Flatten.Vector(x, y);\n    } else if (x instanceof Flatten.Vector && y == null) {\n      this.value = x;\n    } else if (x instanceof Point && y instanceof Point) {\n      const a = parent.embed(x);\n      const b = parent.embed(y);\n      this.value = new Flatten.Vector(a.value, b.value);\n    } else\n      throw Error(`Cannot initialize Vector from this data: parent=${parent}, x=${x}, y=${y}`);\n  }\n\n  public static parse(raw: string, coordinateSystem: CoordinateSystem): Vector;\n  public static parse(yaml: VectorSchema, coordinateSystem: CoordinateSystem): Vector;\n  public static parse(data: VectorSchema | string, coordinateSystem: CoordinateSystem): Vector {\n    if (typeof data === \"string\") {\n      data = data.trim().replaceAll(/\\n/g, ' ');\n      const pattern = /^\\((.*),(.*)\\)$/;\n      const match = data.match(pattern);\n\n      if (match === null)\n        throw Error(`Vector description does not match the expected pattern ${pattern}`);\n\n      return new Vector(coordinateSystem, parse(match[1]), parse(match[2]));\n    } else {\n      return new Vector(coordinateSystem, data.x, data.y);\n    }\n  }\n  \n  public get x() { return this.value.x; }\n  public get y() { return this.value.y; }\n  public get xy() : [Coordinate, Coordinate] { return [this.x, this.y]; }\n\n  public rotate90CW() {\n    return new Vector(this.parent, this.parent.positive ? this.value.rotate90CW(): this.value.rotate90CCW());\n  }\n\n  public rotate90CCW() {\n    return new Vector(this.parent, this.parent.positive ? this.value.rotate90CCW(): this.value.rotate90CW());\n  }\n\n  public normalize() {\n    return new Vector(this.parent, this.value.normalize());\n  }\n\n  public multiply(scalar: number) {\n    return new Vector(this.parent, this.value.multiply(scalar));\n  }\n\n  // Return the angle to ccw in [0, 2π).\n  public angleTo(ccw: Vector) {\n    return this.parent.positive ? this.parent.embed(ccw).value.angleTo(this.value) : this.value.angleTo(this.parent.embed(ccw).value);\n  }\n\n  public invert() {\n    return new Vector(this.parent, this.value.invert());\n  }\n\n  public add(v: Vector) {\n    return new Vector(this.parent, this.value.add(this.parent.embed(v).value));\n  }\n\n  public equalTo(rhs: Vector, epsilon: number = 0): boolean {\n    if (this.parent === rhs.parent)\n      return Math.abs(this.x - rhs.x) <= epsilon && Math.abs(this.y - rhs.y) <= epsilon;\n    return this.parent.embed(rhs).equalTo(this);\n  }\n\n  public readonly parent: CoordinateSystem;\n  public readonly value: Flatten.Vector;\n}\n","/* ******************************************************************************\n * Copyright (c) 2020 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Flatten from \"@flatten-js/core\";\n\nimport CoordinateSystem from \"./CoordinateSystem\";\nimport Point from \"./Point\";\nimport Polygon from './Polygon';\nimport Vector from './Vector';\n\nexport default class Segment {\n  public constructor(start: Point, end: Point);\n  public constructor(parent: CoordinateSystem, value: Flatten.Segment);\n  public constructor(parent: CoordinateSystem, start: Flatten.Point, end: Flatten.Point);\n  public constructor(parent: CoordinateSystem | Point, value: Point | Flatten.Point | Flatten.Segment, end?: Flatten.Point){\n    if (!(parent instanceof CoordinateSystem)) {\n      console.assert(value instanceof Point, value);\n      ({parent, value, end} = {\n        parent: parent.parent,\n        value: parent.value,\n        end: parent.parent.embed(value as Point).value,\n      });\n    }\n\n    this.parent = parent;\n    if (end !== undefined) {\n      const start = value as Flatten.Point;\n      this.value = new Flatten.Segment(start, end);\n    } else {\n      this.value = value as Flatten.Segment;\n    }\n  }\n  \n  public get start() { return new Point(this.parent, this.value.start); }\n  public get middle() { return new Point(this.parent, this.value.middle()); }\n  public get end() { return new Point(this.parent, this.value.end); }\n  public get tangentInStart() { return new Vector(this.parent, this.value.tangentInStart()); }\n  public get tangentInEnd() { return new Vector(this.parent, this.value.tangentInEnd()); }\n\n  public at(relative: number) {\n    return this.start.translate(new Vector(this.parent, this.start, this.end).multiply(relative));\n  }\n\n  public translate(delta: Vector): Segment {\n    delta = this.parent.embed(delta);\n    return new Segment(this.parent, this.value.translate(delta.value));\n  }\n\n  // Return the points of intersection between this segment and the segments\n  // forming the boundary of the polygon. If this segment overlaps with one of\n  // the boundary segments, the end points of the overlap are included. If it\n  // touches, the point of touching is included.\n  public intersect(shape: Polygon): Point[] {\n    const intersections = shape.parent.embed(this).value.intersect(shape.value).map(value => new Point(shape.parent, value));\n    if(this.start.on(shape))\n      // TODO: Bug in flatten. See https://github.com/flatsurf/vue-flatsurf/issues/41.\n      intersections.push(this.start);\n    if (this.end.on(shape))\n      // TODO: Bug in flatten. See https://github.com/flatsurf/vue-flatsurf/issues/41.\n      intersections.push(this.end);\n    return intersections;\n  }\n\n  // Return whether this segment and the (filled) shape have at least one point\n  // in common.\n  public intersects(shape: Polygon | Segment): boolean {\n    if (shape instanceof Polygon)\n      return Flatten.Relations.intersect(shape.parent.embed(this).value, shape.value);\n    else\n      return this.intersects(new Polygon(shape.parent, [[shape.start, shape.end]]));\n  }\n\n  // Return the relative coordinate of the point projected onto the segment,\n  // i.e., return a value in [0, 1] if the point projects onto the segment.\n  public relativize(point: Point): number {\n    const e = this.value.tangentInStart();\n    const toPoint = new Vector(this.parent, this.start, point).value;\n    return e.dot(toPoint) / this.value.length;\n  }\n\n  public touch(shape: Polygon): boolean {\n    return Flatten.Relations.touch(shape.parent.embed(this).value, shape.value);\n  }\n\n  public toString(): string {\n    return `((${this.value.start.x}, ${this.value.start.y}), (${this.value.end.x}, ${this.value.end.y}))`;\n  }\n\n  public get length() {\n    return this.value.length;\n  }\n\n  public equalTo(rhs: Segment, epsilon: number = 0): boolean {\n    return this.start.equalTo(rhs.start, epsilon) && this.end.equalTo(rhs.end, epsilon);\n  }\n\n  public reverse(): Segment {\n    return new Segment(this.parent, this.value.reverse());\n  }\n\n  public readonly parent: CoordinateSystem;\n  public readonly value: Flatten.Segment;\n}\n","/* ******************************************************************************\n * Copyright (c) 2020 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Flatten from \"@flatten-js/core\";\n\nimport Point from \"./Point\";\nimport Vector from \"./Vector\";\nimport CoordinateSystem from \"./CoordinateSystem\";\n\nexport default class Line {\n  constructor(pt: Point, norm: Vector);\n  constructor(a: Point, b: Point);\n  public constructor(pt: Point, norm: Point | Vector) {\n    this.parent = pt.parent;\n    if (norm instanceof Point)\n      this.value = new Flatten.Line(pt.value, this.parent.embed(norm).value);\n    else\n      this.value = new Flatten.Line(pt.value, this.parent.embed(norm).value);\n  }\n\n  public intersect(other: Line): Point | null {\n    const intersections = other.parent.embed(this).value.intersect(other.value).map((intersection) => new Point(other.parent, intersection));\n    if (intersections.length === 0) return null;\n    if (intersections.length !== 1) throw Error(\"not implemented: Line.intersection()\");\n    return intersections[0];\n  }\n\n  public get pt() { return new Point(this.parent, this.value.pt); }\n  public get norm() { return new Vector(this.parent, this.value.norm); }\n\n  public readonly parent: CoordinateSystem;\n  public readonly value: Flatten.Line;\n}\n","/* ******************************************************************************\n * Copyright (c) 2020-2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Vue from \"vue\";\n\nimport Flatten from \"@flatten-js/core\";\n\nimport Point from \"./Point\";\nimport Polygon from \"./Polygon\";\nimport Box from \"./Box\";\nimport Vector from \"./Vector\";\nimport Segment from \"./Segment\";\nimport Line from \"./Line\";\n\nexport type Coordinate = number;\n\n// A registered or discovered embedding between two coordinate systems.\nexport type Embedding = {\n  // The embedding as an invertible matrix; null if the embedding is not valid\n  // anymore.\n  embedding: Readonly<Flatten.Matrix> | null,\n}\n\n// Internal structure to keep track of explicitl registered embeddings between\n// coordinate systems.\ntype RegisteredEmbedding = {\n  embedding: Embedding;\n  dependents: Array<{\n    domain: CoordinateSystem,\n    codomain: CoordinateSystem,\n  }>;\n}\n\n// Return the inverse of the invertible matrix A.\n// Naturally, this is not very stable numerically. Probably we shuold solve\n// linear equations instead of holding on to an explicit inverse.\nexport function inverse(A: Flatten.Matrix) {\n  const [a00, a01, a02, a10, a11, a12, a20, a21, a22] = [A.a, A.c, A.tx, A.b, A.d, A.ty, 0, 0, 1];\n  const adj = [a11*a22 - a21*a12, a10*a22 - a20*a12, a10*a21 - a20*a11, a01*a22 - a21*a02, a00*a22 - a20*a02, a00*a21 - a20*a01, a01*a12 - a11*a02, a00*a12 - a10*a02, a00*a11 - a10*a01];\n  const det = a00*adj[0] - a01*adj[1] + a02*adj[2];\n  const inv = [adj[0], -adj[3], adj[6], -adj[1], adj[4], -adj[7], adj[2], -adj[5], adj[8]].map(a => a / det);\n  const affine = inv.map(a => a / inv[8]);\n  console.assert(affine.every((a) => a != null), `Matrix ${A} must be invertible.`);\n  return new Flatten.Matrix(affine[0], affine[3], affine[1], affine[4], affine[2], affine[5]);\n}\n\nexport default class CoordinateSystem {\n  public constructor(positive: boolean) {\n    this.positive = positive;\n  }\n\n  public readonly positive: boolean;\n\n  // Register an embedding from this coordinate system into `into`.\n  // The returned embedding is a token that can be used to `reset()` the\n  // embedding later or `embedInto()` differently.\n  public embedInto(into: CoordinateSystem, token?: Embedding): Embedding;\n  public embedInto(into: CoordinateSystem, embedding: Flatten.Matrix, token?: Embedding): Embedding;\n  public embedInto(into: CoordinateSystem, embedding?: Embedding | Flatten.Matrix, token?: Embedding): Embedding {\n    if (embedding !== undefined) {\n      if (\"embedding\" in embedding) {\n        console.assert(token === undefined);\n        token = embedding;\n        embedding = undefined;\n      }\n    }\n\n    if (embedding === undefined) {\n      console.assert(token === undefined);\n      embedding = new Flatten.Matrix();\n      if (this.positive !== into.positive)\n        embedding = new Flatten.Matrix(1, 0, 0, -1);\n      return this.embedInto(into, embedding, token);\n    }\n\n    console.assert(embedding instanceof Flatten.Matrix);\n    if (embedding.tx == null || embedding.ty == null || !(embedding.a * embedding.d - embedding.b * embedding.c))\n      throw Error(`Embedding matrix is not invertible: ${JSON.stringify(embedding)}`);\n\n    let existing = this.lookup(into);\n\n    if (existing == null) {\n      if (token !== undefined)\n        console.warn(\"No token expected when resetting embedding of coordinate systems. No embedding between these coordinate systems could be found.\");\n    } else {\n      if (token === undefined)\n        console.warn(\"Expected a token when resetting embedding of coordinate systems but no token found.\");\n      else if (token !== existing.embedding)\n        console.warn(\"Expected correct token when resetting embedding of coordinate systems but the token was not the one last returned when the embedding was established.\");\n    }\n\n    if (existing == null) {\n      this.insert(into, embedding);\n      existing = this.lookup(into)!;\n    }\n\n    console.assert(existing != null);\n    console.assert(existing.embedding.embedding != null, \"Invalidated embedding found in registered embeddings.\");\n\n    CoordinateSystem.update(existing!, embedding as Flatten.Matrix);\n\n    return existing.embedding;\n  }\n\n  public reset(token: Embedding) {\n    const from = CoordinateSystem.registered.get(this);\n    if (from === undefined)\n      throw Error(\"Cannot reset embedding of this coordinate systems as none is registered anymore.\");\n    for (const codomain of from.keys()) {\n      const registered = from.get(codomain)!;\n      if (registered.embedding == token) {\n        CoordinateSystem.invalidate(registered);\n        from.delete(codomain);\n        if (from.size === 0)\n          CoordinateSystem.registered.delete(this);\n        return;\n      }\n    }\n\n    throw Error(\"Cannot reset embedding. No embedding registered for this token.\");\n  }\n\n  public embed(point: Point): Point;\n  public embed(vector: Vector): Vector;\n  public embed(segment: Segment): Segment;\n  public embed(line: Line): Line;\n  public embed(polygon: Box | Polygon): Polygon;\n  public embed(value: Box | Point | Vector | Segment | Line | Polygon) : Point | Vector | Segment | Line | Polygon {\n    const discovered = this === value.parent ? new Flatten.Matrix() : value.parent.discover(this);\n\n    console.assert(discovered.tx != null && discovered.ty != null && discovered.a * discovered.d - discovered.b * discovered.c, \"Discovered an embedding that is not invertible.\", discovered);\n\n    if (value instanceof Box) {\n      const polygon = new Flatten.Polygon();\n      polygon.addFace(value.toPoints().map((point) => this.embed(point).value));\n      return new Polygon(this, polygon);\n    } else if (value instanceof Point) {\n      return new Point(this, value.value.transform(discovered));\n    } else if (value instanceof Vector) {\n      const point = this.embed(new Point(value.parent, value.x, value.y));\n      const origin = this.embed(new Point(value.parent, 0, 0));\n      return new Vector(this, point.x - origin.x, point.y - origin.y);\n    } else if (value instanceof Segment) {\n      return new Segment(this, this.embed(value.start).value, this.embed(value.end).value);\n    } else if (value instanceof Line) {\n      return new Line(this.embed(value.pt), this.embed(value.norm));\n    } else if (value instanceof Polygon) {\n      return new Polygon(this, new Flatten.Polygon(([...value.value.faces] as Flatten.Face[]).map((face) => (face.edges as Flatten.Edge[]).map((edge) => this.embed(new Point(value.parent, edge.start)).value))));\n    }\n\n    throw Error(`cannot embed this type of object into coordinate system yet`);\n  }\n\n  // The registered embeddings between coordinate systems.\n  // Maps domain → codomain → embedding.\n  private static registered: Map<CoordinateSystem, Map<CoordinateSystem, RegisteredEmbedding>> = new Map();\n\n  // The discovered embeddings between coordinate systems.\n  // Maps domain → codomain → embedding.\n  private static discovered: Map<CoordinateSystem, Map<CoordinateSystem, Embedding>> = new Map();\n\n  private lookup(into: CoordinateSystem): RegisteredEmbedding | null {\n    return CoordinateSystem.registered.get(this)?.get(into) || null;\n  }\n\n  private insert(into: CoordinateSystem, embedding: Flatten.Matrix) {\n    if (!CoordinateSystem.registered.has(this))\n      CoordinateSystem.registered.set(this, new Map());\n    console.assert(!CoordinateSystem.registered.get(this)!.has(into));\n    CoordinateSystem.registered.get(this)!.set(into, {\n      embedding: Vue.observable({\n        embedding: Object.freeze(embedding),\n      }),\n      dependents: [],\n    });\n  }\n\n  private static update(registered: RegisteredEmbedding, embedding: Flatten.Matrix) {\n    if (registered.embedding.embedding === null)\n      throw Error(\"Cannot update existing embedding if it is already invalidated.\");\n\n    if (registered.embedding.embedding.equalTo(embedding))\n      return;\n\n    CoordinateSystem.invalidate(registered);\n\n    registered.embedding.embedding = Object.freeze(embedding);\n  }\n\n  private static invalidate(registered: RegisteredEmbedding) {\n    if (registered.embedding.embedding === null)\n      throw Error(\"Cannot invalidate embedding if it is already invalidated.\");\n\n    registered.embedding.embedding = null;\n\n    for (const {domain, codomain} of registered.dependents) {\n      if (!CoordinateSystem.discovered.has(domain))\n        continue;\n      if (!CoordinateSystem.discovered.get(domain)!.has(codomain))\n        continue;\n      \n      const discovered = CoordinateSystem.discovered.get(domain)!.get(codomain)!;\n      discovered.embedding = null;\n\n      CoordinateSystem.discovered.get(domain)!.delete(codomain);\n      if (CoordinateSystem.discovered.get(domain)!.size === 0)\n        CoordinateSystem.discovered.delete(domain);\n    }\n\n    registered.dependents = [];\n  }\n\n  // The returned embedding is Vue.observable() so that users will notice when\n  // its embedding is set to null or otherwise modified.\n  private discover(into: CoordinateSystem): Flatten.Matrix {\n    let discovered = undefined;\n\n    console.assert(this !== into);\n\n    if (CoordinateSystem.registered.has(this) && CoordinateSystem.registered.get(this)!.has(into))\n      discovered = CoordinateSystem.registered.get(this)!.get(into)!.embedding;\n    else if (CoordinateSystem.discovered.has(this) && CoordinateSystem.discovered.get(this)!.has(into))\n      discovered = CoordinateSystem.discovered.get(this)!.get(into)!;\n    else {\n      const reachable = new Set<CoordinateSystem>();\n      const path: Array<{\n        definition: { embedding: Embedding } | { inverse: Embedding },\n        dependency: RegisteredEmbedding,\n      }> = [];\n\n      const search = (from: CoordinateSystem): Embedding | null => {\n        if (from === into) {\n          let map = new Flatten.Matrix();\n          for (const {definition, dependency} of path) {\n            if (\"embedding\" in definition) {\n              console.assert(definition.embedding.embedding);\n              map = definition.embedding.embedding!.multiply(map);\n            } else {\n              console.assert(definition.inverse.embedding);\n              map = map.multiply(inverse(definition.inverse.embedding!));\n            }\n            dependency.dependents.push({ domain: this, codomain: into }); \n          }\n          const discovered = Vue.observable({\n            embedding: Object.freeze(map)\n          });\n\n          if (!CoordinateSystem.discovered.has(this))\n            CoordinateSystem.discovered.set(this, new Map());\n\n          CoordinateSystem.discovered.get(this)!.set(into, discovered);\n\n          return discovered;\n        }\n\n        const follow = (to: CoordinateSystem, definition: { embedding: Embedding } | { inverse: Embedding }, dependency: RegisteredEmbedding): Embedding | null => {\n          if (reachable.has(to))\n            return null;\n\n          path.push({\n            definition,\n            dependency,\n          });\n          try {\n            reachable.add(to);\n            return search(to);\n          } finally {\n            path.pop();\n          }\n        };\n\n\n        if (CoordinateSystem.registered.has(from)) {\n          for (const to of CoordinateSystem.registered.get(from)!.keys()) {\n            const dependency = CoordinateSystem.registered.get(from)!.get(to)!;\n            const embedding = follow(to, { embedding: dependency.embedding }, dependency);\n            if (embedding !== null)\n              return embedding;\n          }\n        }\n\n        // TODO: This is quite inefficient. See https://github.com/flatsurf/vue-flatsurf/issues/39.\n        for (const to of CoordinateSystem.registered.keys()) {\n          if (CoordinateSystem.registered.get(to)!.has(from)) {\n            const dependency = CoordinateSystem.registered.get(to)!.get(from)!;\n            const embedding = follow(to, { inverse: dependency.embedding }, dependency);\n            if (embedding !== null)\n              return embedding;\n          }\n        }\n\n        return null;\n      }\n\n      const embedding = search(this);\n\n      if (embedding === null)\n        throw Error(\"No embedding could be constructed between these coordinate systems.\");\n\n      console.assert(embedding.embedding !== null);\n\n      return embedding.embedding!;\n    }\n\n    console.assert(discovered.embedding !== null);\n\n    return discovered.embedding!;\n  }\n}\n\n","/* ******************************************************************************\n * Copyright (c) 2020 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Flatten from \"@flatten-js/core\";\n\nimport CoordinateSystem, {Embedding} from \"./CoordinateSystem\";\nimport Box from \"./Box\";\nimport Polygon from \"./Polygon\";\nimport Point from \"./Point\";\nimport Vector from \"./Vector\";\n\nexport default class Viewport {\n  public constructor(ideal?: CoordinateSystem, width: number = 640, height: number = 640) {\n    this.idealCoordinateSystem = ideal || new CoordinateSystem(true);\n    if (!this.idealCoordinateSystem.positive)\n      throw new Error(\"ideal coordinate system must be positive\");\n    if (width === 0 || height === 0)\n      throw new Error(\"cannot initialize viewport to be an empty box\");\n    this.viewportCoordinateSystem = new CoordinateSystem(false);\n    this.dimensions = { width, height };\n    this.visible = new Box(this.viewportCoordinateSystem, [0, 0], [width, height]);\n    this.focused = this.visible;\n  }\n\n  // Resize the viewport while keeping the currently focused box unchanged.\n  public resize(width: number, height: number) {\n    if (width === 0 || width === 0)\n      throw Error(\"Cannot resize viewport to an empty box.\");\n\n    this.dimensions = { width, height };\n\n    this.focus(this.focused);\n  }\n\n  public focus(focus: Box | Polygon) {\n    if (this.token === undefined)\n      this.token = this.idealCoordinateSystem.embedInto(this.viewportCoordinateSystem);\n    if (this.token === null)\n      throw Error(\"Cannot change focus on a viewport that has already been destroyed.\");\n\n    const focused = this.idealCoordinateSystem.embed(focus).box;\n\n    console.assert(focused.low.x != null && this.focused.low.y != null && this.focused.high.x != null && this.focused.high.y != null, \"Focus not well-formed.\");\n\n    this.focused = focused;\n\n    this.visible = this.focused.contain(this.width / this.height);\n    // We now need to embed the \"ideal\" coordinate system into the actual\n    // \"viewport\" coordinate system so that the \"visible\" box fills the (0,\n    // 0), (width, height) box.\n    this.token = Object.freeze(this.idealCoordinateSystem.embedInto(this.viewportCoordinateSystem, new Flatten.Matrix(\n      this.width / this.visible.width, 0,\n      0, -this.height / this.visible.height,\n      -this.visible.low.x * this.width / this.visible.width,\n      this.visible.high.y * this.height / this.visible.height,\n    ), this.token));\n  }\n\n  public zoom(factor: number, center?: Point) {\n    if (center === undefined) {\n      center = this.viewport.center;\n      center = this.focused.parent.embed(center);\n\n      const width = this.focused.width / factor;\n      const height = this.focused.height / factor;\n\n      this.focus(new Box(this.focused.parent,\n        [center.x - width / 2, center.y - height / 2],\n        [center.x + width / 2, center.y + height / 2]));\n    } else {\n      center = this.idealCoordinateSystem.embed(center);\n      const centerBefore = this.viewportCoordinateSystem.embed(center);\n      this.zoom(factor);\n      const centerAfter = this.viewportCoordinateSystem.embed(center);\n      \n      this.focus(this.viewport.translate(new Vector(\n        this.viewportCoordinateSystem,\n        centerBefore,\n        centerAfter)));\n    }\n  }\n\n  public destroy() {\n    if (this.token != null)\n      this.idealCoordinateSystem.reset(this.token);\n    this.token = null;\n  }\n\n  public embed(point: Point) : Point;\n  public embed(box: Box) : Polygon;\n  public embed(value: Point | Box) : Point | Polygon {\n    return this.viewportCoordinateSystem.embed(value as any);\n  }\n\n  public get viewport() : Box {\n    return this.viewportCoordinateSystem.embed(this.visible).box;\n  }\n\n  public get width() { return this.dimensions.width; }\n  public get height() { return this.dimensions.height; }\n\n  private dimensions: { width: number, height: number };\n  // The underlying ideal coordinate system that is stable under resizing the\n  // viewport, translating it and such.\n  public readonly idealCoordinateSystem: CoordinateSystem;\n  // Coordinates on screen, i.e., inside the viewport starting at (0, 0) in\n  // the top-left corner.\n  public readonly viewportCoordinateSystem: CoordinateSystem;\n  // The currently focused rectangle, centered in the viewport.\n  private focused: Box;\n  // The currently visible rectangle.\n  private visible: Box;\n\n  private token?: Embedding | null;\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Ref, Watch } from \"vue-property-decorator\";\nimport Viewport from \"@/geometry/Viewport\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Point from \"@/geometry/Point\";\nimport Box from \"@/geometry/Box\";\nimport Vector from \"@/geometry/Vector\";\nimport Polygon from \"@/geometry/Polygon\";\nimport panzoom from \"@thesoulfresh/pan-zoom\";\n\n// See https://github.com/flatsurf/vue-flatsurf/issues/31 for issues with this component.\n@Component\nexport default class PanZoom extends Vue {\n  @Prop({required: true, type: CoordinateSystem}) coordinateSystem!: CoordinateSystem;\n  @Prop({required: false, default: null, type: Object}) value!: Box | Polygon | null;\n\n  private observer = new ResizeObserver(this.resize);\n  private unpanzoom = () => {};\n  protected pan = false;\n  private viewport: Viewport | null = null;;\n\n  @Ref()\n  private readonly container!: HTMLElement;\n\n  private dimensions : null | { width: number, height: number } = null;\n\n  private resize() {\n    const dimensions = this.redimension();\n\n    if (this.viewport == null)\n      throw Error(\"Cannot resize viewport before PanZoom has been mounted.\");\n\n    this.viewport.resize(dimensions.width, dimensions.height);\n    this.refocus(this.viewport.viewport);\n  }\n\n  @Watch(\"value\")\n  refocus(focus: Box | Polygon | null) {\n    if (this.viewport == null)\n      throw Error(\"Cannot change focus in PanZoom before it has been mounted.\");\n  \n    if (focus == null)\n      return;\n\n    const changed = () => {\n      if (focus instanceof Box) {\n        try {\n          return !focus.equalTo(this.viewport!.viewport);\n        } catch {\n          return true;\n        }\n      }\n      return true;\n    };\n\n    if (changed()) {\n      this.viewport.focus(focus);\n      console.assert(JSON.stringify(focus) !== JSON.stringify(this.viewport.viewport), \"Changing focus to %s did not modify viewport.\", JSON.stringify(focus))\n    }\n\n    if (this.value == null || changed()) {\n      this.$emit('input', this.viewport.viewport);\n    }\n  }\n\n  @Watch(\"coordinateSystem\")\n  onCoordinateSystemChange() {\n    const focus = this.value == null ? null : this.coordinateSystem.embed(this.value);\n    this.cleanup();\n    this.initialize();\n    this.refocus(focus);\n  }\n\n  mounted() {\n    this.unpanzoom = panzoom(this.$el, this.panzoom);\n    this.observer.observe(this.container);\n    this.initialize();\n    this.refocus(this.value);\n  }\n\n  initialize() {\n    const dimensions = this.redimension();\n    this.viewport = new Viewport(this.coordinateSystem, dimensions.width, dimensions.height);\n  }\n\n  beforeDestroy() {\n    this.unpanzoom();\n    this.observer.unobserve(this.container);\n    this.cleanup();\n  }\n\n  cleanup() {\n    if (this.viewport != null)\n      this.viewport.destroy();\n    this.viewport = null;\n  }\n\n  private redimension() {\n    if (this.container == null)\n      throw Error(\"Cannot determine dimensions of PanZoom before it has been mounted.\");\n\n    this.dimensions = {\n      width: Math.min(this.container.clientWidth, window.innerWidth),\n      height: Math.min(this.container.clientHeight, window.innerHeight),\n    };\n\n    // Work around clientWidth and clientHeight === 0 when testing.\n    if (navigator.userAgent.includes(\"Node.js\") || navigator.userAgent.includes(\"jsdom\")) {\n      this.dimensions = {\n        width: 640,\n        height: 480,\n      };\n    }\n\n    if (this.dimensions.width === 0)\n      throw Error(\"PanZoom must explicitly have non-zero width.\");\n\n    if (this.dimensions.height === 0)\n      throw Error(\"PanZoom must explicitly have non-zero height.\");\n    \n    return this.dimensions;\n  }\n\n  private panzoom(e: any) {\n    console.assert(this.viewport != null, \"PanZoom cannot receive events before it has been mounted.\");\n\n    // We either zoom or pan; mixing this is probably confusing.\n    if (e.dz !== 0) {\n      this.viewport!.zoom(Math.exp(-e.dz/96), new Point(this.viewport!.viewportCoordinateSystem, e.x, e.y));\n    } else {\n      this.viewport!.focus(this.viewport!.viewport.translate(new Vector(\n        this.viewport!.viewportCoordinateSystem,\n        -e.dx,\n        -e.dy)));\n    }\n    this.$emit('input', this.viewport!.viewport);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PanZoom.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PanZoom.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PanZoom.vue?vue&type=template&id=6d8cb780&scoped=true&\"\nimport script from \"./PanZoom.vue?vue&type=script&lang=ts&\"\nexport * from \"./PanZoom.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PanZoom.vue?vue&type=style&index=0&id=6d8cb780&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d8cb780\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('pan-zoom',{attrs:{\"coordinate-system\":_vm.idealCoordinateSystem},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar viewport = ref.viewport;\nreturn [(_vm.layout != null)?_c('flatsurf',{ref:\"flatsurf\",attrs:{\"width\":viewport.width,\"height\":viewport.height,\"triangulation\":_vm.triangulation,\"layout\":_vm.layout,\"viewport-coordinate-system\":viewport.viewportCoordinateSystem,\"visualization-options\":_vm.visualizationOptions,\"flow-components\":_vm.visibleFlowComponents,\"saddle-connections\":_vm.saddleConnections,\"paths\":_vm.paths},on:{\"dblclick\":function($event){_vm.focus = _vm.layout.hull}}},[_vm._t(\"interaction\",null,{\"layout\":_vm.layout,\"svg\":viewport.viewportCoordinateSystem,\"triangulation\":_vm.triangulation,\"options\":_vm.visualizationOptions,\"focus\":_vm.focus,\"refocus\":_vm.refocus})],2):_vm._e()]}}],null,true),model:{value:(_vm.focus),callback:function ($$v) {_vm.focus=$$v},expression:\"focus\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport HalfEdge from \"./HalfEdge\";\n\nexport default class Edge {\n  public constructor(halfEdge: HalfEdge) {\n    this.positive = Math.abs(halfEdge);\n    this.negative = -this.positive;\n  }\n\n  public toString() {\n    return this.positive.toString();\n  }\n\n  public readonly positive: HalfEdge;\n  public readonly negative: HalfEdge;\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Vue from \"vue\";\n\nimport HalfEdge from \"@/flatsurf/HalfEdge\";\nimport Edge from \"@/flatsurf/Edge\";\nimport IHalfEdgeOptions from \"./IHalfEdgeOptions\";\nimport IFlatTriangulationOptions from \"./IFlatTriangulationOptions\";\n\nexport default class VisualizationOptions implements IFlatTriangulationOptions {\n  public get(edge: Edge): IHalfEdgeOptions;\n  public get(edge: HalfEdge): IHalfEdgeOptions;\n  public get(halfEdge: Edge | HalfEdge): IHalfEdgeOptions {\n    this.ensure(halfEdge);\n    if (halfEdge instanceof Edge) {\n      const edge = halfEdge;\n      return this.edges[edge.positive];\n    } else {\n      return this.halfEdges[halfEdge];\n    }\n  }\n\n  private ensure(halfEdge: Edge | HalfEdge) {\n    if (halfEdge instanceof Edge) {\n      const edge = halfEdge;\n      if (this.edges[edge.positive] === undefined) {\n        Vue.set(this.edges, edge.positive, {\n          indicator: null,\n          selected: false,\n          visible: true,\n          label: null,\n          icon: null,\n        } as IHalfEdgeOptions);\n      }\n    } else {\n      if (this.halfEdges[halfEdge] === undefined) {\n        Vue.set(this.halfEdges, halfEdge, {\n          indicator: null,\n          selected: false,\n          visible: false,\n          label: null,\n          icon: null,\n        } as IHalfEdgeOptions);\n      }\n    }\n  }\n\n  public indicate(edge: Edge, at: number | null): void;\n  public indicate(edge: HalfEdge, at: number | null): void;\n  public indicate(halfEdge: Edge | HalfEdge, at: number | null) {\n    this.ensure(halfEdge);\n    if (halfEdge instanceof Edge) {\n      const edge = halfEdge;\n      this.edges[edge.positive].indicator = at;\n    } else {\n      this.halfEdges[halfEdge].indicator = at;\n    }\n  }\n\n  public select(edge: Edge, selected: boolean): void;\n  public select(edge: HalfEdge, selected: boolean): void;\n  public select(halfEdge: Edge | HalfEdge, selected: boolean) {\n    this.ensure(halfEdge);\n    if (halfEdge instanceof Edge) {\n      const edge = halfEdge;\n      this.edges[edge.positive].selected = selected;\n    } else {\n      this.halfEdges[halfEdge].selected = selected;\n    }\n  }\n\n  public show(edge: Edge, visible: boolean): void;\n  public show(halfEdge: HalfEdge, visible: boolean): void;\n  public show(halfEdge: Edge | HalfEdge, visible: boolean) {\n    this.ensure(halfEdge);\n    if (halfEdge instanceof Edge) {\n      const edge = halfEdge;\n      this.edges[edge.positive].visible = visible;\n    } else {\n      this.halfEdges[halfEdge].visible = visible;\n    }\n  }\n\n  public label(edge: Edge, label: string | null): void;\n  public label(halfEdge: HalfEdge, label: string | null): void;\n  public label(halfEdge: Edge | HalfEdge, label: string | null) {\n    this.ensure(halfEdge);\n    if (halfEdge instanceof Edge) {\n      const edge = halfEdge;\n      this.edges[edge.positive].label = label;\n    } else {\n      this.halfEdges[halfEdge].label = label;\n    }\n  }\n\n  public icon(edge: Edge, icon: string | null): void;\n  public icon(halfEdge: HalfEdge, icon: string | null): void;\n  public icon(halfEdge: Edge | HalfEdge, icon: string | null) {\n    this.ensure(halfEdge);\n    if (halfEdge instanceof Edge) {\n      const edge = halfEdge;\n      this.edges[edge.positive].icon = icon;\n    } else {\n      this.halfEdges[halfEdge].icon = icon;\n    }\n  }\n\n  private halfEdges: {\n    [halfEdge: number]: {\n      indicator: number | null,\n      selected: boolean,\n      visible: boolean,\n      label: string | null,\n      icon: string | null,\n    },\n  } = {};\n\n  private edges: {\n    [positive: number]: {\n      indicator: number | null,\n      selected: boolean,\n      visible: boolean,\n      label: string | null,\n      icon: string | null,\n    },\n  } = {};\n};\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Vue from \"vue\";\n\nimport castArray from \"lodash-es/castArray\";\n\n// Watch all expressions on vm and return once one of them changes.\nexport default async function wait(vm: Vue, expression: string | string[]) {\n  await new Promise<void>((resolve) => {\n    const unwatches = castArray(expression).map((e) => {\n      return vm.$watch(e, () => {\n        for (const unwatch of unwatches) unwatch();\n        resolve();\n      });\n    });\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',_vm._g({},_vm.$listeners),[_vm._t(\"background\"),_vm._t(\"triangulation\",[(_vm.layout != null)?_c('flat-triangulation-component',{attrs:{\"layout\":_vm.layout,\"svg\":_vm.svgCoordinateSystem,\"options\":_vm.visualizationOptions}},[_vm._t(\"components\",_vm._l((_vm.flowComponents),function(component,i){return _c('flow-component-component',{key:i,attrs:{\"color\":_vm.palette.color(i),\"component\":component,\"layout\":_vm.layout,\"surface\":_vm.triangulation,\"svg\":_vm.svgCoordinateSystem}})}))],2):_vm._e(),_vm._t(\"connections\",_vm._l((_vm.saddleConnections),function(connection,i){return _c('saddle-connection-component',{key:i,attrs:{\"svg\":_vm.svgCoordinateSystem,\"layout\":_vm.layout,\"connection\":connection}})})),_vm._t(\"paths\",_vm._l((_vm.paths),function(path,i){return _c('path-component',{key:i,attrs:{\"svg\":_vm.svgCoordinateSystem,\"layout\":_vm.layout,\"path\":path}})}))]),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport iwanthue, { ColorSpacePreset } from \"iwanthue\";\n\nexport default class Palette {\n  constructor(colors: number = 2, space: ColorSpacePreset = \"fancy-light\") {\n    // TODO: Typings in iwanthue are wrong, see https://github.com/medialab/iwanthue/pull/50\n    this.palette = iwanthue(colors >= 2 ? colors : 2, { seed: 1337 as any, colorSpace: space });\n  }\n\n  color(i: number) {\n    if (i >= this.palette.length)\n      console.warn(\"Color outside of palette bounds requested.\");\n    return this.palette[i % this.palette.length];\n  }\n\n  private readonly palette;\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport { optimize } from \"svgo/dist/svgo.browser.js\";\nimport rgba from \"color-normalize\";\n\n/*\n * Turns an <svg> in an HTML document into a standalone svg.\n */\nexport default class SVGExporter {\n  constructor(svg: Element) {\n    this.svg = svg.cloneNode(true) as Element;\n    this.styles = [svg, ...svg.getElementsByTagName(\"*\")].map(this.computedStyle);\n\n    if (this.svg.tagName !== 'svg') {\n      svg = document.createElement('svg');\n      svg.appendChild(this.svg);\n      this.svg = svg;\n\n      this.styles.unshift({});\n    }\n\n    this.svg.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n    this.svg.setAttribute(\"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\n  }\n\n  private get children() {\n    return [this.svg, ...this.svg.getElementsByTagName(\"*\")];\n  }\n\n  private computedStyle(element: Element) {\n    const style = window.getComputedStyle(element);\n    const computed = {} as { [key: string]: string };\n    for (let i = 0; i < style.length; i++)\n      computed[style[i]] = style.getPropertyValue(style[i]);\n    return computed;\n  }\n\n  /*\n   * Return the index of `e` in `styles`.\n   */\n  private index(e: Element) {\n    const children = this.children;\n    console.assert(children.length == this.styles.length);\n\n    for (let index = 0; index < children.length; index++) {\n      if (children[index] === e)\n        return index;\n    }\n\n    throw Error(\"Element not found in DOM tree.\")\n  }\n\n  /*\n   * Drop all class=\"\" attributes from all elements.\n   */\n  public dropClasses() {\n    for (const child of this.children) {\n      child.removeAttribute('class');\n    }\n  }\n\n  /*\n   * Drop all prefixed styles from all elements, i.e., things such as\n   * `-webkit-...` and `--variable`.\n   */\n  public dropPrefixedStyles() {\n    this.styles = this.styles.map((styles) => {\n      return Object.fromEntries(\n        Object.entries(styles).filter(([key, _value]) => !key.startsWith('-'))\n      );\n    });\n  }\n\n  /*\n   * Drop all elements that are not visible from the element tree.\n   */\n  public dropInvisible() {\n    const children = this.children;\n    console.assert(children.length === this.styles.length);\n\n    const trash = {} as {[index: number]: Element};\n\n    const addToTrash = (element: Element) => {\n      const index = this.index(element);\n\n      if (index in trash)\n        return;\n      trash[index] = element;\n\n      [...element.children].forEach(addToTrash);\n    };\n\n    for (let index = 1; index < children.length; index++) {\n      const child = children[index];\n      const style = this.styles[index];\n      if (style[\"visibility\"] === \"hidden\" || style[\"display\"] === \"none\")\n        addToTrash(child);\n    }\n\n    this.styles = this.styles.filter((_style, i) => !(i in trash));\n\n    for (const element of Object.values(trash)) {\n      if (element.parentNode != null) {\n        element.parentNode.removeChild(element);\n      }\n    }\n\n    console.assert(this.children.length === this.styles.length);\n\n    // Now we can drop all \"visibility: visible\" and \"display: \" which has no\n    // effect in SVG anymore.\n    this.styles = this.styles.map((styles) => {\n      return Object.fromEntries(\n        Object.entries(styles).filter(([key, _value]) => key !== \"visibility\" && key !== \"display\")\n      );\n    });\n  }\n\n  /*\n   * Drop styling that is already equally set on the parent node.\n   */\n  public dropRedundantStyles() {\n    const children = this.children;\n    console.assert(children.length === this.styles.length);\n\n    for (let index = children.length; index--;) {\n      const child = children[index];\n      const parent = child.parentNode as Element;\n\n      if (parent == null) continue;\n\n      const style = this.styles[this.index(parent)];\n      this.styles[index] = Object.fromEntries(\n        Object.entries(this.styles[index]).filter(([key, value]) => style[key] != value)\n      );\n    }\n  }\n\n  /*\n   * Drop custom attributes such as `data-attribute=\"\"`.\n   */\n  public dropCustomAttributes() {\n    for (const child of this.children) {\n      [...child.attributes].forEach((attribute) => {\n        if (attribute.name.includes('-'))\n          child.removeAttribute(attribute.name);\n      });\n    }\n  }\n\n  private static readonly standard = [ \"cx\", \"cy\", \"height\", \"width\", \"x\", \"y\", \"r\", \"rx\", \"ry\", \"d\", \"fill\", \"transform\", \"alignment-baseline\", \"baseline-shift\", \"clip-path\", \"clip-rule\", \"color\", \"color-interpolation\", \"color-interpolation-filters\", \"color-rendering\", \"cursor\", \"direction\", \"display\", \"dominant-baseline\", \"fill-opacity\", \"fill-rule\", \"filter\", \"flood-color\", \"flood-opacity\", \"font-family\", \"font-size\", \"font-size-adjust\", \"font-stretch\", \"font-style\", \"font-variant\", \"font-weight\", \"glyph-orientation-horizontal\", \"glyph-orientation-vertical\", \"image-rendering\", \"letter-spacing\", \"lighting-color\", \"marker-end\", \"marker-mid\", \"marker-start\", \"mask\", \"opacity\", \"overflow\", \"paint-order\", \"pointer-events\", \"shape-rendering\", \"stop-color\", \"stop-opacity\", \"stroke\", \"stroke-dasharray\", \"stroke-dashoffset\", \"stroke-linecap\", \"stroke-linejoin\", \"stroke-miterlimit\", \"stroke-opacity\", \"stroke-width\", \"text-anchor\", \"text-decoration\", \"text-overflow\", \"text-rendering\", \"unicode-bidi\", \"vector-effect\", \"visibility\", \"white-space\", \"word-spacing\", \"writing-mode\", \"display\", \"overflow\", \"visibility\", \"text-overflow\", \"clip-path\", \"clip-rule\", \"mask\", \"color\", \"opacity\", \"color-interpolation-filters\", \"filter\", \"flood-color\", \"flood-opacity\", \"lighting-color\", \"isolation\", \"transform\", \"transform-box\", \"transform-origin\", \"letter-spacing\", \"text-align\", \"text-align-last\", \"text-indent\", \"word-spacing\", \"white-space\", \"vertical-align\", \"dominant-baseline\", \"alignment-baseline\", \"baseline-shift\", \"direction\", \"text-orientation\", \"writing-mode\", \"font\", \"text-decoration\", \"text-decoration-line\", \"text-decoration-style\", \"text-decoration-color\"];\n\n  /*\n   * Drop styles that are not explititly supported by SVG 2, see\n   * https://www.w3.org/TR/SVG/styling.html#RequiredProperties\n   */\n  public dropNonStandardStyles() {\n    this.styles = this.styles.map((styles) => {\n      return Object.fromEntries(\n        Object.entries(styles).filter(([key, _value]) => {\n          if (SVGExporter.standard.includes(key))\n            return true;\n          if (key.startsWith(\"font-\"))\n            return true;\n        })\n      )\n    });\n  }\n\n  /*\n   * Rewrite style as presentation attributes.\n   * Drop all styles that can be presentation attributes from elements where they are not allowed.\n   * This helps some SVG readers and also svgo to optimize the output.\n   */\n  public usePresentationAttributes() {\n    const children = this.children;\n    console.assert(children.length === this.styles.length);\n\n    for (let index = children.length; index--;) {\n      const child = children[index];\n\n      const makePresentation = (key: string, value: string) => {\n        if (!child.hasAttribute(key))\n          child.setAttribute(key, value);\n      };\n\n      this.styles[index] = Object.fromEntries(\n        Object.entries(this.styles[index]).filter(([key, value]) => {\n          if ([\"cx\", \"cy\"].includes(key)) {\n            if ([\"circle\", \"ellipse\"].includes(child.tagName))\n              return makePresentation(key, value);\n            return false;\n          } else if ([\"height\", \"width\", \"x\", \"y\"].includes(key)) {\n            if ([\"foreignObject\", \"image\", \"rect\", \"svg\", \"symbol\", \"use\"].includes(child.tagName))\n              return makePresentation(key, value);\n            return false;\n          } else if ([\"r\"].includes(key)) {\n            if ([\"circle\"].includes(child.tagName))\n              return makePresentation(key, value);\n            return false;\n          } else if ([\"rx\", \"ry\"].includes(key)) {\n            if ([\"ellipse\", \"rect\"].includes(child.tagName))\n              return makePresentation(key, value);\n            return false;\n          } else if ([\"d\"].includes(key)) {\n            if ([\"path\"].includes(child.tagName))\n              makePresentation(key, value);\n            return false;\n          } else if ([\"fill\"].includes(key)) {\n            if (![\"animate\", \"set\", \"animateMotion\"].includes(child.tagName))\n              makePresentation(key, value);\n            return false;\n          } else if ([\"transform\"].includes(key) && value != \"none\") {\n            if (![\"pattern\", \"linearGradien\", \"radialGradient\"].includes(child.tagName))\n              makePresentation(key, value);\n            else if ([\"pattern\"].includes(child.tagName))\n              makePresentation(\"patternTransform\", value);\n            else if ([\"linearGradient\", \"radialGradient\"].includes(child.tagName))\n              makePresentation(\"gradientTransform\", value);\n            return false;\n          } else if ([\"alignment-baseline\", \"baseline-shift\", \"clip-path\", \"clip-rule\", \"color\", \"color-interpolation\", \"color-interpolation-filters\", \"color-rendering\", \"cursor\", \"direction\", \"display\", \"dominant-baseline\", \"fill-opacity\", \"fill-rule\", \"filter\", \"flood-color\", \"flood-opacity\", \"font-family\", \"font-size\", \"font-size-adjust\", \"font-stretch\", \"font-style\", \"font-variant\", \"font-weight\", \"glyph-orientation-horizontal\", \"glyph-orientation-vertical\", \"image-rendering\", \"letter-spacing\", \"lighting-color\", \"marker-end\", \"marker-mid\", \"marker-start\", \"mask\", \"opacity\", \"overflow\", \"paint-order\", \"pointer-events\", \"shape-rendering\", \"stop-color\", \"stop-opacity\", \"stroke\", \"stroke-dasharray\", \"stroke-dashoffset\", \"stroke-linecap\", \"stroke-linejoin\", \"stroke-miterlimit\", \"stroke-opacity\", \"stroke-width\", \"text-anchor\", \"text-decoration\", \"text-overflow\", \"text-rendering\", \"unicode-bidi\", \"vector-effect\", \"visibility\", \"white-space\", \"word-spacing\", \"writing-mode\"].includes(key)) {\n            makePresentation(key, value);\n            return false;\n          }\n          return true;\n        })\n      );\n    }\n  }\n  public simplifyColors() {\n    const children = this.children;\n    console.assert(children.length === this.styles.length);\n\n    const simplify = (child: Element, style: {[key: string]: string}, key: string, okey: string | null = null) => {\n      if (child.getAttribute(key))\n        delete style[key];\n      if (okey != null && child.getAttribute(okey))\n        delete style[okey];\n\n      const value = style[key];\n      if (value == null || value == \"none\")\n        return;\n\n      const color = rgba(value);\n      const opacity = color[3];\n      if (okey != null) {\n        style[okey] = String(Number(child.getAttribute(okey) || style[okey] || 1) * opacity);\n        child.removeAttribute(okey);\n      }\n\n      style[key] = `rgb(${color[0]*255}, ${color[1]*255}, ${color[2]*255})`;\n    };\n\n    for (let index = children.length; index--;) {\n      const child = children[index];\n      const style = this.styles[index];\n\n      simplify(child, style, \"fill\", \"fill-opacity\");\n      simplify(child, style, \"stroke\", \"stroke-opacity\");\n      simplify(child, style, \"color\");\n      simplify(child, style, \"text-decoration\");\n      simplify(child, style, \"text-decoration-color\");\n\n      this.styles[index] = style;\n    }\n  }\n\n  /*\n   * Drop trivial styles.\n   */\n  public dropTrivialStyles() {\n    this.styles = this.styles.map((styles) => {\n      return Object.fromEntries(\n        Object.entries(styles).filter(([key, value]) => {\n          if (key == \"transform\" && value == \"none\")\n            return false;\n          if (key == \"filter\" && value == \"none\")\n            return false;\n\n          return true;\n        })\n      )\n    });\n  }\n\n  /*\n   * Drop styles that confuse inkscape (as of 1.1)\n   */\n  public dropNonInkscapeStyles() {\n    this.styles = this.styles.map((styles) => {\n      return Object.fromEntries(\n        Object.entries(styles).filter(([key, value]) => {\n          if (key == \"font-synthesis\")\n            return false;\n          if (key == \"vertical-align\")\n            return false;\n          if (key == \"transform-origin\")\n            return false;\n          if (key == \"transform-box\")\n            return false;\n          if (key == \"text-overflow\")\n            return false;\n          if (key == \"text-align-last\")\n            return false;\n          if (key == \"mask\")\n            return false;\n          if (key == \"font-optical-sizing\")\n            return false;\n          if (key == \"font-language-override\")\n            return false;\n          if (key == \"font-kerning\")\n            return false;\n          if (key == \"clip-path\")\n            return false;\n          if (key == \"transform\" && value == \"none\")\n            return false;\n\n          if (SVGExporter.standard.includes(key))\n            return true;\n          if (key.startsWith(\"font-\"))\n            return true;\n        })\n      )\n    });\n  }\n\n  public dropInteractiveStyles() {\n    this.styles = this.styles.map((styles) => {\n      return Object.fromEntries(\n        Object.entries(styles).filter(([key, _value]) => {\n          if (key == \"cursor\")\n            return false;\n          if (key == \"pointer-events\")\n            return false;\n\n          return true;\n        })\n      )\n    });\n  }\n\n  /*\n   * Inline all styling into the elements `style` attribute.\n   * This is usually the last method to call before `toString()`.\n   */\n  public inlineStyles() {\n    const children = this.children;\n    console.assert(children.length == this.styles.length);\n\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      const style = Object.entries(this.styles[i]).map(([key, value]) => {\n        return `${key}: ${value};`\n      }).join(\" \");\n      if (style)\n        child.setAttribute('style', style);\n      else\n        child.removeAttribute('style');\n    }\n  }\n\n  /*\n   * Return the extracted SVG as a string.\n   */\n  public toString(svgo: boolean = true) {\n    let svg = this.svg.outerHTML;\n    if (svgo)\n      svg = optimize(svg).data;\n    return svg;\n  }\n\n  // A clone of the original SVG node from the DOM.\n  private svg: Element;\n\n  // The computed style of each node in the original SVG node in traversal order.\n  private styles: Array<{ [key: string]: string }> = [];\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"FlatTriangulation\"},[_vm._t(\"faces\",[_c('g',_vm._l((_vm.faces),function(face,i){return _c('face',{key:i,attrs:{\"vertices\":face,\"svg\":_vm.svg}})}),1)]),_vm._t(\"default\"),_vm._t(\"edges\",[_c('g',_vm._l((_vm.halfEdges),function(halfEdge){return _c('half-edge-component',{key:halfEdge,attrs:{\"layout\":_vm.layout,\"half-edge\":halfEdge,\"source-indicator\":_vm.sourceIndicators.includes(halfEdge),\"options\":_vm.options.get(halfEdge),\"svg\":_vm.svg}})}),1),_c('g',_vm._l((_vm.edges),function(edge){return _c('edge-component',{key:edge.positive,attrs:{\"layout\":_vm.layout,\"edge\":edge,\"svg\":_vm.svg,\"options\":_vm.options.get(edge)}})}),1)]),_vm._t(\"overlay\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ngon',{attrs:{\"vertices\":_vm.vertices,\"svg\":_vm.svg}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('polygon',{attrs:{\"points\":_vm.points}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\n\nimport Point from \"@/geometry/Point\";\n\n@Component\nexport default class Ngon extends Vue {\n  @Prop({ required: true, type: Array }) vertices!: Point[];\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n\n  get points() {\n    return this.vertices.map((xy) => {\n      xy = this.svg.embed(xy); \n      return `${xy.x},${xy.y}`;\n    }).join(\",\");\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Ngon.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Ngon.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Ngon.vue?vue&type=template&id=f4604b2c&\"\nimport script from \"./Ngon.vue?vue&type=script&lang=ts&\"\nexport * from \"./Ngon.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport Point from \"@/geometry/Point\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Ngon from \"@/components/svg/Ngon.vue\";\n\n@Component({\n  components: { Ngon }\n})\nexport default class Face extends Vue {\n  @Prop({ required: true, type: Array }) vertices!: Point[];\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Face.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Face.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Face.vue?vue&type=template&id=0ce8ccfc&scoped=true&\"\nimport script from \"./Face.vue?vue&type=script&lang=ts&\"\nexport * from \"./Face.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Face.vue?vue&type=style&index=0&id=0ce8ccfc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ce8ccfc\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"HalfEdge\"},[(_vm.options.label)?_c('g',{staticClass:\"label\"},[_c('segment-label',{attrs:{\"at\":_vm.segment,\"svg\":_vm.svg}},[_vm._v(_vm._s(_vm.options.label))])],1):_vm._e(),(_vm.options.indicator != null)?_c('arrow',{staticClass:\"indicator\",attrs:{\"segment\":_vm.indicatorPosition(_vm.halfEdge),\"svg\":_vm.svg}}):_vm._e(),(_vm.sourceIndicator)?_c('arrow',{staticClass:\"source\",attrs:{\"segment\":_vm.source,\"svg\":_vm.svg}}):_vm._e(),_c('segment-component',{class:{ selected: _vm.options.selected },attrs:{\"segment\":_vm.segment,\"svg\":_vm.svg}}),(_vm.options.icon)?_c('segment-icon',{attrs:{\"segment\":_vm.segment,\"svg\":_vm.svg,\"icon\":_vm.options.icon}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('line',{ref:\"line\",staticClass:\"segment\",class:{ animated: _vm.animated },style:({'--length': _vm.length}),attrs:{\"x1\":_vm.coords[0],\"y1\":_vm.coords[1],\"x2\":_vm.coords[2],\"y2\":_vm.coords[3]}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Ref, Prop, Vue, Watch } from \"vue-property-decorator\";\n\nimport Segmnt from \"@/geometry/Segment\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\n\n@Component\nexport default class Segment extends Vue {\n  @Prop({ required: true, type: Object }) segment!: Segmnt;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n  @Prop({required: false, type: Boolean, default: false}) animated!: boolean;\n\n  @Ref()\n  line!: SVGLineElement;\n\n  readonly onAnimationEnd = () => this.$emit(\"animationend\");\n\n  @Watch(\"animated\")\n  onAnimated() {\n    if (this.animated)\n      this.line.addEventListener(\"animationend\", this.onAnimationEnd);\n    else\n      this.line.removeEventListener(\"animationend\", this.onAnimationEnd);\n  }\n\n  mounted() {\n    this.onAnimated();\n  }\n\n  // For performance reasons we compute all coordinates at once since this\n  // gets called a lot.\n  get coords() {\n    const embedded = this.svg.embed(this.segment);\n    return [embedded.start.x, embedded.start.y, embedded.end.x, embedded.end.y];\n  }\n\n  get length() {\n    const embedded = this.svg.embed(this.segment);\n    return embedded.length;\n  }\n\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Segment.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Segment.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Segment.vue?vue&type=template&id=35f5d5bd&scoped=true&\"\nimport script from \"./Segment.vue?vue&type=script&lang=ts&\"\nexport * from \"./Segment.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Segment.vue?vue&type=style&index=0&id=35f5d5bd&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"35f5d5bd\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{attrs:{\"transform\":_vm.transformation}},[_c('text',[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Component, Prop } from \"vue-property-decorator\";\nimport Segment from \"@/geometry/Segment\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\n\n@Component\nexport default class HalfEdgeLabel extends Vue {\n\t@Prop({required: true, type: Object}) at!: Segment;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n\n\tget position() {\n\t\tconst midpoint = this.at.middle;\n\t\tlet normal = this.svg.embed(this.at.tangentInStart.rotate90CCW()).normalize();\n\t\treturn this.svg.embed(midpoint).translate(normal.multiply(12));\n\t}\n\n\tget transformation() {\n\t\treturn `translate(${this.position.x} ${this.position.y}) translate(6 4)`;\n\t}\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SegmentLabel.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SegmentLabel.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SegmentLabel.vue?vue&type=template&id=8a8e0b64&scoped=true&\"\nimport script from \"./SegmentLabel.vue?vue&type=script&lang=ts&\"\nexport * from \"./SegmentLabel.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./SegmentLabel.vue?vue&type=style&index=0&id=8a8e0b64&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8a8e0b64\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"arrow\"},[_c('line',{attrs:{\"x1\":_vm.x1,\"y1\":_vm.y1,\"x2\":_vm.x2,\"y2\":_vm.y2}}),_c('path',{attrs:{\"d\":\"M 0 -3 L 12 0 L 0 3 z\",\"transform\":_vm.atEnd,\"stroke-width\":\"0\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Prop, Vue, Component } from \"vue-property-decorator\";\nimport Segment from \"@/geometry/Segment\";\nimport Vector from \"@/geometry/Vector\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\n\n@Component\nexport default class Arrow extends Vue {\n\t@Prop({required: true, type: Object}) segment!: Segment;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n\n  get x1() {\n    return this.svg.embed(this.segment.start).x;\n  }\n\n  get y1() {\n    return this.svg.embed(this.segment.start).y;\n  }\n\n  get endWithoutHead() {\n    return this.svg.embed(this.segment.end).translate(this.svg.embed(this.segment.tangentInEnd).normalize().multiply(12));\n  }\n\n  get x2() {\n    return this.svg.embed(this.endWithoutHead).x;\n  }\n\n  get y2() {\n    return this.svg.embed(this.endWithoutHead).y;\n  }\n\n\tget atEnd() {\n    return `translate(${this.x2} ${this.y2}) rotate(${-this.svg.embed(this.segment).tangentInStart.angleTo(new Vector(this.svg.embed(this.segment).parent, 1, 0))*360 / (2*Math.PI)} 0 0)`;\n\t}\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Arrow.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Arrow.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Arrow.vue?vue&type=template&id=9de7aa18&scoped=true&\"\nimport script from \"./Arrow.vue?vue&type=script&lang=ts&\"\nexport * from \"./Arrow.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Arrow.vue?vue&type=style&index=0&id=9de7aa18&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9de7aa18\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('icon',{attrs:{\"icon\":_vm.icon,\"point\":_vm.center,\"svg\":_vm.svg}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('path',{staticClass:\"icon\",attrs:{\"d\":_vm.icon,\"transform\":_vm.transform}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport Point from \"@/geometry/Point\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\n\n@Component\nexport default class Segment extends Vue {\n  @Prop({ required: true, type: Object }) point!: Point;\n  @Prop({ required: true, type: String }) icon!: string;\n  @Prop({ required: true, type: Object }) svg!: CoordinateSystem;\n\n  // For performance reasons we compute all coordinates at once since this\n  // gets called a lot.\n  get coords() {\n    const embedded = this.svg.embed(this.point);\n    return [embedded.x, embedded.y];\n  }\n\n  get transform() {\n    const width = 20;\n    const height = 20;\n    return `translate(${this.coords[0] - width / 2} ${this.coords[1] - height / 2})`;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Icon.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Icon.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Icon.vue?vue&type=template&id=a9d4a62c&scoped=true&\"\nimport script from \"./Icon.vue?vue&type=script&lang=ts&\"\nexport * from \"./Icon.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Icon.vue?vue&type=style&index=0&id=a9d4a62c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a9d4a62c\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport Segment from \"@/geometry/Segment\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Icon from \"@/components/svg/Icon.vue\";\n\n@Component({\n  components: { Icon },\n})\nexport default class SegmentIcon extends Vue {\n  @Prop({ required: true, type: Object }) segment!: Segment;\n  @Prop({ required: true, type: String }) icon!: string;\n  @Prop({ required: true, type: Object }) svg!: CoordinateSystem;\n\n  get center() {\n    return this.segment.middle;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SegmentIcon.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SegmentIcon.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SegmentIcon.vue?vue&type=template&id=f62cce04&\"\nimport script from \"./SegmentIcon.vue?vue&type=script&lang=ts&\"\nexport * from \"./SegmentIcon.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport Layout from \"@/layout/Layout\";\nimport Segment from \"@/geometry/Segment\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport SegmentComponent from \"@/components/svg/Segment.vue\";\nimport HalfEdge from \"@/flatsurf/HalfEdge\";\nimport SegmentLabel from \"@/components/svg/SegmentLabel.vue\";\nimport Arrow from \"@/components/svg/Arrow.vue\";\nimport IHalfEdgeOptions from \"@/components/flatsurf/options/IHalfEdgeOptions\";\nimport VisualizationOptions from \"@/components/flatsurf/options/VisualizationOptions\";\nimport SegmentIcon from \"@/components/svg/SegmentIcon.vue\";\n\n@Component({\n  components: { Arrow, SegmentComponent, SegmentLabel, SegmentIcon },\n})\nexport default class HalfEdgeComponent extends Vue {\n  @Prop({required: true, type: Object}) layout!: Layout;\n  @Prop({required: true, type: Number}) halfEdge!: HalfEdge;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n  @Prop({required: false, type: Boolean, default: false}) sourceIndicator!: boolean;\n  @Prop({required: false, type: Object, default: () => new VisualizationOptions().get(1) }) options!: IHalfEdgeOptions; \n\n  get segment() {\n    return this.layout.layout(this.halfEdge).segment;\n  }\n\n  indicatorPosition(halfEdge: HalfEdge) {\n    const segment = this.layout.layout(halfEdge).segment;\n    let indicator = halfEdge === this.halfEdge ? this.options.indicator! : 1-this.options.indicator!;\n    if (indicator != null) {\n\t\t  const end = segment.at(indicator);\n\t\t  const start = end.translate(this.svg.embed(segment.tangentInStart.rotate90CCW()).normalize().multiply(10));\n      return new Segment(start, end);\n    }\n\t}\n\n  get source() {\n    const segment = this.segment;\n\t\tconst end = segment.at(0);\n\t\tconst start = end.translate(this.svg.embed(segment.tangentInStart.rotate90CCW()).normalize().multiply(10));\n    return new Segment(start, end);\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HalfEdge.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HalfEdge.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./HalfEdge.vue?vue&type=template&id=467e815b&\"\nimport script from \"./HalfEdge.vue?vue&type=script&lang=ts&\"\nexport * from \"./HalfEdge.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./HalfEdge.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"Edge\"},[(_vm.options.label)?_c('g',{staticClass:\"label\"},[_c('segment-label',{attrs:{\"at\":_vm.segment,\"svg\":_vm.svg}},[_vm._v(_vm._s(_vm.options.label))])],1):_vm._e(),_c('segment-component',{class:{ selected: _vm.options.selected },attrs:{\"segment\":_vm.segment,\"svg\":_vm.svg}}),(_vm.options.icon)?_c('segment-icon',{attrs:{\"segment\":_vm.segment,\"svg\":_vm.svg,\"icon\":_vm.options.icon}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport Layout from \"@/layout/Layout\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport SegmentComponent from \"@/components/svg/Segment.vue\";\nimport Edge from \"@/flatsurf/Edge\";\nimport SegmentLabel from \"@/components/svg/SegmentLabel.vue\";\nimport IHalfEdgeOptions from \"@/components/flatsurf/options/IHalfEdgeOptions\";\nimport VisualizationOptions from \"@/components/flatsurf/options/VisualizationOptions\";\nimport SegmentIcon from \"@/components/svg/SegmentIcon.vue\";\n\n@Component({\n  components: { SegmentComponent, SegmentLabel, SegmentIcon },\n})\nexport default class EdgeComponent extends Vue {\n  @Prop({required: true, type: Object}) layout!: Layout;\n  @Prop({required: true, type: Object}) edge!: Edge;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n  @Prop({required: false, type: Object, default: () => new VisualizationOptions().get(new Edge(1)) }) options!: IHalfEdgeOptions; \n\n  get segment() {\n    return this.layout.layout(this.edge.positive).segment;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Edge.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Edge.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Edge.vue?vue&type=template&id=686ed6c1&\"\nimport script from \"./Edge.vue?vue&type=script&lang=ts&\"\nexport * from \"./Edge.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Edge.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Component, Prop } from \"vue-property-decorator\";\nimport Face from \"./Face.vue\";\nimport HalfEdgeComponent from \"./HalfEdge.vue\";\nimport EdgeComponent from \"./Edge.vue\";\nimport Layout from \"@/layout/Layout\";\nimport VisualizationOptions from \"@/components/flatsurf/options/VisualizationOptions\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport IFlatTriangulationOptions from \"./options/IFlatTriangulationOptions\";\n\n@Component({\n  components: {\n    Face,\n    EdgeComponent,\n    HalfEdgeComponent,\n  }\n})\nexport default class FlatTriangulation extends Vue {\n  @Prop({required: true, type: Object}) layout!: Layout;\n  @Prop({required: false, default: () => new VisualizationOptions(), type: Object}) options!: IFlatTriangulationOptions;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n\n  get faces() {\n    let faces = this.layout.triangulation.faces.cycles;\n    faces = faces.filter((face) => face.every((he) => this.layout.primary.includes(he)));\n    return faces.map((face) => face.map((he) => this.layout.layout(he).segment.end));\n  }\n\n  get halfEdges() {\n    return this.layout.triangulation.halfEdges.filter((halfEdge) => this.options.get(halfEdge).visible);\n  }\n\n  get edges() {\n    return this.layout.triangulation.edges.filter((edge) => this.options.get(edge).visible);\n  }\n\n  // Return a list of vertex indicators where half edges meet that are almost collinear.\n  // TODO: Only show indicators when inner edges are not rendered, see https://github.com/flatsurf/vue-flatsurf/issues/32\n  get sourceIndicators() {\n    return this.halfEdges.filter((a) => {\n      const s = this.layout.layout(a).segment;\n      const v = s.tangentInStart;\n      return this.halfEdges.some((b) => {\n        if (b === a) return false;\n\n        const t = this.layout.layout(b).segment;\n\n        if (!s.start.on(t)) return false;\n\n        const w = t.tangentInStart;\n        const angle = v.angleTo(w);\n        const degree = Math.PI / 180;\n        return angle < degree || angle > 359 * degree;\n      })\n    });\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FlatTriangulation.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FlatTriangulation.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FlatTriangulation.vue?vue&type=template&id=2fd31484&\"\nimport script from \"./FlatTriangulation.vue?vue&type=script&lang=ts&\"\nexport * from \"./FlatTriangulation.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FlatTriangulation.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"FlowComponent\"},[_c('g',{style:({ '--color': _vm.color })},_vm._l((_vm.patches),function(vertices,i){return _c('ngon',{key:i,attrs:{\"vertices\":vertices,\"svg\":_vm.svg}})}),1),_c('g',{staticClass:\"boundary\"},_vm._l((_vm.perimeter),function(connection,i){return _c('saddle-connection-component',{key:i,attrs:{\"connection\":connection,\"layout\":_vm.layout,\"color\":_vm.color,\"svg\":_vm.svg}})}),1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"SaddleConnection\"},[_c('path-component',{attrs:{\"path\":[_vm.connection],\"svg\":_vm.svg,\"layout\":_vm.layout,\"animated\":_vm.animated}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"Path\"},[_c('g',_vm._l((_vm.controlPoints),function(point,i){return _c('point-component',{key:i,attrs:{\"svg\":_vm.svg,\"point\":point,\"radius\":2}})}),1),_c('g',[_vm._l((_vm.segments),function(segment,i){return _c('segment-component',{key:i,attrs:{\"svg\":_vm.svg,\"segment\":segment}})}),(_vm.animated && _vm.segments.length > 1 && _vm.segments[_vm.animation])?_c('g',{staticClass:\"animated\"},[_c('segment-component',{attrs:{\"svg\":_vm.svg,\"segment\":_vm.segments[(_vm.animation + _vm.segments.length - 1) % _vm.segments.length]}}),_c('segment-component',{key:(\"animation-\" + _vm.animation),attrs:{\"svg\":_vm.svg,\"segment\":_vm.segments[_vm.animation],\"animated\":\"\"},on:{\"animationend\":_vm.onAnimationEnd}})],1):_vm._e()],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('circle',{staticClass:\"point\",attrs:{\"cx\":_vm.coords[0],\"cy\":_vm.coords[1],\"r\":_vm.radius || 30}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport Pont from \"@/geometry/Point\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\n\n@Component\nexport default class Point extends Vue {\n  @Prop({ required: true, type: Object }) point!: Pont;\n  @Prop({required: false, type: Number, default: null}) radius!: number | null;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n\n  // For performance reasons we compute all coordinates at once since this\n  // gets called a lot.\n  get coords() {\n    const embedded = this.svg.embed(this.point);\n    return [embedded.x, embedded.y];\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Point.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Point.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Point.vue?vue&type=template&id=5fe1a75e&\"\nimport script from \"./Point.vue?vue&type=script&lang=ts&\"\nexport * from \"./Point.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport flatten from \"lodash-es/flatten\";\n\nimport PointComponent from \"@/components/svg/Point.vue\";\nimport SegmentComponent from \"@/components/svg/Segment.vue\";\nimport Segment from \"@/geometry/Segment\";\nimport SaddleConnection from \"@/flatsurf/SaddleConnection\";\nimport PathData from \"@/flatsurf/Path\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Layout from \"@/layout/Layout\";\nimport Line from \"@/geometry/Line\";\nimport Vector from \"@/geometry/Vector\";\nimport Point from \"@/geometry/Point\";\n\n@Component({\n  components: { PointComponent, SegmentComponent },\n})\nexport default class PathComponent extends Vue {\n  @Prop({required: true}) path!: PathData | Array<Segment | SaddleConnection>;\n  @Prop({required: true}) layout!: Layout;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n  @Prop({required: false, type: Boolean, default: true }) animated!: boolean;\n\n  get segments(): Segment[] {\n    let connections = (this.path instanceof Array) ? this.path : this.path.connections;\n    return flatten(connections.map((connection) => {\n      if (connection instanceof Segment)\n        return [connection];\n      else\n        return this.toSegments(connection);\n    }));\n  }\n\n  get controlPoints(): Point[] {\n    if (this.segments.length === 0)\n      return [];\n\n    const points = [this.segments[0].start];\n\n    for (const segment of this.segments) {\n      points.push(segment.end);\n    }\n\n    return points;\n  }\n\n  animation = 0;\n\n  onAnimationEnd() {\n    const next = (this.animation + 1) % this.segments.length;\n    this.animation = next;\n  }\n\n  toSegments(connection: SaddleConnection): Segment[] {\n    const segments = [];\n\n    const vector = connection.vector;\n    const crossings = [...connection.crossings];\n\n    let start = this.layout.layout(connection.source).segment.start;\n    const end = crossings.length > 0 ? this.layout.layout(connection.target).segment.start : this.layout.layout(connection.source).segment.end;\n\n    // TODO: Use at() instead of halfEdge() to construct the point of intersection. See https://github.com/flatsurf/vue-flatsurf/issues/35.\n    while(crossings.length) {\n\t\t  const crossing = crossings.shift()!;\n      if (this.layout.layout(crossing.halfEdge).inner)\n        continue;\n\n      // Since we are crossing an outer half edge, we compute the intersection\n      // of the saddle connection ray with it and add it to segments.\n      const line = new Line(start, start.translate(vector));\n      const crossingEdge = this.layout.layout(crossing.halfEdge).segment;\n      const crossingLine = new Line(crossingEdge.start, crossingEdge.end);\n      const intersection = line.intersect(crossingLine);\n      if (intersection === null) {\n        throw Error(\"saddle connection must intersect every crossing\");\n      }\n      segments.push(new Segment(start, intersection));\n\t\t  \n      // Now, we move the intersection point to the corresponding half-edge\n      // and repeat.\n      const alongHalfEdge = new Vector(intersection.parent, this.layout.layout(crossing.halfEdge).segment.start, intersection as Point);\n      start = this.layout.layout(-crossing.halfEdge).segment.end.translate(alongHalfEdge);\n    }\n\n    segments.push(new Segment(start, end));\n    \n    return segments;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Path.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Path.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Path.vue?vue&type=template&id=58971826&\"\nimport script from \"./Path.vue?vue&type=script&lang=ts&\"\nexport * from \"./Path.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Path.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Layout from '@/layout/Layout';\nimport { Vue, Component, Prop } from \"vue-property-decorator\";\nimport SaddleConnectionData from \"@/flatsurf/SaddleConnection\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport PathComponent from \"@/components/flatsurf/Path.vue\";\n\n@Component({\n  components: {\n    PathComponent,\n  }\n})\nexport default class SaddleConnection extends Vue {\n  @Prop({ required: true }) connection!: SaddleConnectionData;\n  @Prop({ required: true }) layout!: Layout;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n  @Prop({required: false, default: false, type: Boolean}) animated!: boolean;\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SaddleConnection.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SaddleConnection.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SaddleConnection.vue?vue&type=template&id=50c85f90&\"\nimport script from \"./SaddleConnection.vue?vue&type=script&lang=ts&\"\nexport * from \"./SaddleConnection.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./SaddleConnection.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Flatten from \"@flatten-js/core\";\nimport  { Vue, Component, Prop, Watch } from \"vue-property-decorator\";\nimport FlowComponentData from \"@/flatsurf/FlowComponent\";\nimport { Touch } from \"@/flatsurf/FlowConnection\";\nimport SaddleConnectionComponent from \"./SaddleConnection.vue\";\nimport Layout from \"@/layout/Layout\";\nimport Ngon from \"@/components/svg/Ngon.vue\";\nimport HalfEdge from \"@/flatsurf/HalfEdge\";\nimport Point from \"@/geometry/Point\";\nimport FlatTriangulation from \"@/flatsurf/FlatTriangulation\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\n\n@Component({\n  components: {\n    SaddleConnectionComponent,\n    Ngon,\n  },\n})\nexport default class FlowComponent extends Vue {\n  @Prop({ required: true }) component!: FlowComponentData;\n  @Prop({ required: true }) layout!: Layout;\n  @Prop({ required: true }) surface!: FlatTriangulation;\n  @Prop({ required: false, type: String, default:\"orange\" }) color!: string;\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n\n  ats!: {[key: number]: number[]};\n  // Maps a half edge to the touches on that half edge in order.\n  touches!: {[key: number]: Touch[]};\n\n  get perimeter() {\n    let perimeter = this.component.perimeter;\n    if (this.component.cylinder)\n      // For cylinders do not show the connections at the top & bottom of the cylinder.\n      perimeter = perimeter.filter((connection) => connection.vertical);\n    else\n      // For minimal/undetermined components, do not show the inner structure of the component.\n      perimeter = perimeter.filter((connection) => connection.boundary);\n\n    return perimeter.map((connection) => connection.connection);\n  }\n\n  @Watch(\"layout\", { immediate: true })\n  resetCaches() {\n    this.ats = undefined as any;\n    this.touches = undefined as any;\n    this.ensureCaches();\n  }\n\n  ensureCaches() {\n    if (this.touches == null) {\n      this.touches = {};\n      for (const halfEdge of this.surface.halfEdges)\n        this.touches[halfEdge] = [];\n\n      for (const connection of this.component.perimeter) {\n        for (const touch of connection.touches) {\n          this.touches[touch.halfEdge][touch.index] = touch;\n        }\n      }\n    }\n    if (this.ats == null) {\n      this.ats = {};\n      for (const connection of this.component.perimeter) {\n        for (let i = 0; i < connection.touches.length; i++) {\n          const touch = connection.touches[i];\n          let at = 0;\n          if (i != 0 && i != connection.touches.length - 1) {\n            at = connection.connection.crossings[Math.floor((i - 1) / 2)].at;\n            if (i % 2 == 0)\n              at = 1 - at;\n          }\n          if (this.ats[touch.halfEdge] === undefined) this.ats[touch.halfEdge] = [];\n          this.ats[touch.halfEdge][touch.index] = at;\n        }\n      }\n    }\n  }\n\n  // Return the relative length in [0, 1] where `touch` intersects its half edge.\n  private at(touch: Touch): number {\n    console.assert(this.ats != null);\n    return this.ats[touch.halfEdge][touch.index];\n  }\n\n  // Return the triangle [A, B, C] completing the two touches `a`, `b`.\n  private patch(a: Touch, b: Touch): Point[] | null {\n    // Given `at` in [0, 1] returns the actual point on `halfEdge` that is that far on `halfEdge`.\n    const layout = (halfEdge: HalfEdge, at: number) => this.layout.layout(halfEdge).segment.at(at);\n\n    const isHalfEdge = a.halfEdge === -b.halfEdge;\n\n    const A = layout(a.halfEdge, this.at(a));\n    let B = isHalfEdge ? layout(a.halfEdge, 1) : layout(b.halfEdge, this.at(b));\n    let C = B;\n\n    let scenario = \"undefined\";\n\n    if (isHalfEdge) {\n      console.assert(this.at(a) === 0, \"Edge-parallel connection must start at vertex.\")\n      console.assert(this.at(b) === 0, \"Edge-parallel connection must end at vertex.\");\n    } else {\n      console.assert(a.halfEdge !== b.halfEdge, \"Saddle Connection cannot cross the half edge %s twice in a row.\", a.halfEdge);\n    }\n\n    const atouches = this.touches[a.halfEdge];\n    const btouches = this.touches[b.halfEdge];\n\n    if (isHalfEdge) {\n      return null;\n    } else {\n      if (b.index === btouches.length - 1) {\n        if (this.at(b) === 1) {\n          // The vertex B of the patch is an actual vertex of the triangulation. We will search for C on A's half edge.\n\n          // Search for C on A's half edge.\n          console.assert(this.at(a) !== 0);\n          if (a.index === 0) {\n            // Everything next to A is part of this patch.\n            console.assert(this.at(a) !== 0);\n            C = layout(a.halfEdge, 0);\n          } else {\n            C = layout(a.halfEdge, this.at(atouches[a.index - 1]));\n          }\n        } else {\n          // Everything next to B is part of this patch.\n          scenario = \"remaining face\";\n          C = layout(b.halfEdge, 1);\n          if (this.at(b) === 0)\n            return null;\n        }\n      } else {\n        if (this.at(b) === this.at(btouches[b.index + 1])) {\n          // The vertex B of this patch is a vertex of the component.\n          console.assert(this.at(b) === 0 || this.at(b) === 1, \"Vertices of components must be aligned with the vertices of the triangulation.\");\n\n          // Search for C on A's half edge.\n          console.assert(this.at(a) !== 0);\n          if (a.index === 0) {\n            // Everything next to A is part of this patch.\n            console.assert(this.at(a) !== 0);\n            // TODO: Is this always taken care of by something else? See https://github.com/flatsurf/vue-flatsurf/issues/34.\n            C = layout(a.halfEdge, 0);\n            return null;\n          } else {\n            // TODO: Is this always taken care of by something else? See https://github.com/flatsurf/vue-flatsurf/issues/34.\n            C = layout(a.halfEdge, this.at(atouches[a.index - 1]));\n            return null;\n          }\n        } else {\n          console.assert(this.at(btouches[b.index + 1]) > this.at(b), \"Touches are not ordered correctly on half edge %s. The %sth touch at %s should not be after the %sth touch at %s.\", b.halfEdge, btouches[b.index + 1].index, this.at(btouches[b.index + 1]), b.index, this.at(b));\n          C = layout(b.halfEdge, this.at(btouches[b.index + 1]));\n        }\n      }\n    }\n\n    console.assert(!A.equalTo(B), \"Patch of kind '%s' coming from the touches (%s, %s) at %s and (%s, %s) at %s has the same point twice A == B, i.e., %s == %s.\", scenario, a.halfEdge, a.index, this.at(a), b.halfEdge, b.index, this.at(b), A.toString(), B.toString());\n    console.assert(!A.equalTo(C), `Patch of kind '%s' coming from the touches (%s, %s) at %s and (%s, %s) at %s has the same point twice A == C, i.e., %s == %s.`, scenario, a.halfEdge, a.index, this.at(a), b.halfEdge, b.index, this.at(b), A.toString(), C.toString());\n    console.assert(!B.equalTo(C), `Patch of kind '%s' coming from the touches (%s, %s) at %s and (%s, %s) at %s has the same point twice B == C, i.e., %s == %s.`, scenario, a.halfEdge, a.index, this.at(a), b.halfEdge, b.index, this.at(b), B.toString(), C.toString());\n\n    return [A, B, C];\n  }\n\n  private patchHalfEdge(halfEdge: HalfEdge): Point[] | null {\n    // Given `at` in [0, 1] returns the actual point on `halfEdge` that is that far on `halfEdge`.\n    const layout = (halfEdge: HalfEdge, at: number) => this.layout.layout(halfEdge).segment.at(at);\n\n    const face = [halfEdge, this.surface.faces.image(halfEdge), this.surface.faces.preimage(halfEdge)];\n\n    const A = layout(halfEdge, 0);\n    const B = layout(halfEdge, 1);\n    let C = B;\n    let scenario = \"undefined\";\n\n    // Search for the third point of the patch on the following half edge in the face.\n    let touches = this.touches[face[1]]\n    if (touches.length === 0) {\n      // Since nothing intersects the following half edge in this face, this\n      // patch is the entire face.\n      scenario = \"entire face\";\n      C = layout(face[1], 1);\n      if (face[0] !== Math.min(...face))\n        return null;\n    } else if (this.at(touches[0]) === 0) {\n      // Something starts at the vertex joining this half edge with the\n      // following half edge...\n      touches = this.touches[-face[2]];\n      if (touches.every((touch) => this.at(touch) === 0 || this.at(touch) === 1)) {\n        // ...it is just the following half edge itself.\n        scenario = \"entire face 2\";\n        // TODO: Is this always taken care of by something else? See https://github.com/flatsurf/vue-flatsurf/issues/34.\n        C = layout(face[1], 1);\n        if (face[0] !== Math.min(...face))\n          return null;\n      } else {\n        // It's another connection. So the patch ends at the beginning of the\n        // next half edge, none of that half edge is in the patch, i.e., the\n        // third point of the patch must be on the other half edge of this\n        // face.\n        scenario = \"on previous half edge\";\n        for (const touch of touches) {\n          if (this.at(touch) !== 0) {\n            // TODO: Is this always taken care of by something else? See https://github.com/flatsurf/vue-flatsurf/issues/34.\n            C = layout(face[2], 1 - this.at(touch));\n            return null;\n          }\n        }\n      }\n    } else {\n      scenario = \"on following half edge\";\n      C = layout(face[1], this.at(touches[0]));\n    }\n\n    console.assert(!A.equalTo(B), `Patch of kind '%s' coming from the half edge %s has the same point twice A == B, i.e., %s == %s.`, scenario, halfEdge, A.toString(), B.toString());\n    console.assert(!A.equalTo(C), `Patch of kind '%s' coming from the half edge %s has the same point twice A == C, i.e., %s == %s.`, scenario, halfEdge, A.toString(), C.toString());\n    console.assert(!B.equalTo(C), `Patch of kind '%s' coming from the half edge %s has the same point twice B == C, i.e., %s == %s.`, scenario, halfEdge, B.toString(), C.toString());\n\n    return [A, B, C];\n  }\n\n  get triangles(): Point[][] {\n    const triangles = [];\n\n    for (const connection of this.component.perimeter) {\n      for (let i = 0; i < connection.touches.length; i+=2) {\n        const patch = this.patch(connection.touches[i], connection.touches[i + 1])\n        if (patch !== null)\n          triangles.push(patch);\n      }\n    }\n\n    for (const inside of this.component.inside) {\n      const patch = this.patchHalfEdge(inside);\n      if (patch != null)\n        triangles.push(patch);\n    }\n\n    return triangles;\n  }\n\n  get patches(): Point[][] {\n    const patches = [];\n    const triangles = [...this.triangles];\n\n    const epsilon = (Flatten.Utils as any).getTolerance();\n\n    // Glue triangle to ngon if possible.\n    const glue = (ngon: Point[], triangle: Point[]) => {\n      console.assert(triangle.length === 3);\n      for (const step of [1, 2]) {\n        for (const t of [0, 1, 2]) {\n          for (let n = 0; n < ngon.length; n++) {\n            if (triangle[t].equalTo(ngon[n], epsilon) && triangle[(t + step) % 3].equalTo(ngon[(n + 1) % ngon.length], epsilon)) {\n              // Add the third point of the triangle that gets glued to the ngon.\n              ngon.splice(n + 1, 0, triangle[(t + 2*step) % 3]);\n\n              // Simplify the ngon if it contains the same point twice.\n              for (let nn = 0; nn < ngon.length; nn++) {\n                if (ngon[nn].equalTo(ngon[(nn + 2) % ngon.length], epsilon)) {\n                  if (nn + 1 == ngon.length) {\n                    ngon.splice(0, 2);\n                  } else if (nn + 2 == ngon.length) {\n                    ngon.splice(0, 1);\n                    ngon.pop();\n                  } else\n                    ngon.splice(nn, 2);\n                  break;\n                }\n              }\n\n              return true;\n            }\n          }\n        }\n      }\n\n      return false;\n    };\n\n    while(triangles.length) {\n      // Create an ngon by gluing triangles that share two points.\n      let patch = triangles.pop()!;\n      for (let t = triangles.length; t--;) {\n        if (glue(patch, triangles[t])) {\n          triangles[t] = triangles[triangles.length - 1];\n          triangles.pop();\n          t = triangles.length;\n        }\n      }\n\n      patches.push(patch);\n    }\n\n    return patches;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FlowComponent.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FlowComponent.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FlowComponent.vue?vue&type=template&id=6e0e20fe&scoped=true&\"\nimport script from \"./FlowComponent.vue?vue&type=script&lang=ts&\"\nexport * from \"./FlowComponent.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FlowComponent.vue?vue&type=style&index=0&id=6e0e20fe&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6e0e20fe\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport FlatTriangulation from \"@/flatsurf/FlatTriangulation\";\nimport FlowComponent from \"@/flatsurf/FlowComponent\";\nimport SaddleConnection from \"@/flatsurf/SaddleConnection\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Layout from \"@/layout/Layout\";\nimport VisualizationOptions from \"./options/VisualizationOptions\";\nimport Palette from \"@/Palette\";\nimport Path from \"@/flatsurf/Path\";\nimport SVGExporter from \"@/export/SVGExporter\";\n\nimport FlatTriangulationComponent from \"@/components/flatsurf/FlatTriangulation.vue\";\nimport FlowComponentComponent from \"@/components/flatsurf/FlowComponent.vue\";\nimport SaddleConnectionComponent from \"@/components/flatsurf/SaddleConnection.vue\";\nimport PathComponent from \"@/components/flatsurf/Path.vue\";\n\n@Component({\n  components: {\n    FlatTriangulationComponent,\n    FlowComponentComponent,\n    SaddleConnectionComponent,\n    PathComponent,\n  }\n})\nexport default class Flatsurf extends Vue {\n  @Prop({ required: true, type: Object }) triangulation!: FlatTriangulation;\n  @Prop({ required: true, type: Object }) layout!: Layout;\n  @Prop({ required: false, type: Object, default: null }) viewportCoordinateSystem!: CoordinateSystem | null;\n  @Prop({ required: false, type: Object, default: new VisualizationOptions() }) visualizationOptions!: VisualizationOptions;\n  // TODO: Filter depending on automorphisms, see https://github.com/flatsurf/vue-flatsurf/issues/33\n  @Prop({ required: false, default: () => [], type: Array }) flowComponents!: FlowComponent[];\n  @Prop({ required: false, default: () => [], type: Array }) saddleConnections!: SaddleConnection[];\n  @Prop({ required: false, default: () => [], type: Array }) paths!: Path[];\n\n  get palette() {\n    return new Palette(this.flowComponents.length);\n  }\n\n  get svgCoordinateSystem() {\n    return this.viewportCoordinateSystem || this.triangulation.coordinateSystem;\n  }\n\n  async svg() {\n    await this.$nextTick();\n\n    const exporter = new SVGExporter(this.$el);\n    exporter.simplifyColors();\n    exporter.dropNonStandardStyles();\n    exporter.dropNonInkscapeStyles();\n    exporter.dropTrivialStyles();\n    exporter.dropRedundantStyles();\n    exporter.dropClasses();\n    exporter.dropPrefixedStyles();\n    exporter.dropInvisible();\n    exporter.dropInteractiveStyles();\n    exporter.dropCustomAttributes();\n    exporter.usePresentationAttributes();\n    exporter.inlineStyles();\n    return exporter.toString();\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Flatsurf.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Flatsurf.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Flatsurf.vue?vue&type=template&id=32ccfd78&\"\nimport script from \"./Flatsurf.vue?vue&type=script&lang=ts&\"\nexport * from \"./Flatsurf.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\n\nimport Layout from \"@/layout/Layout\";\nimport Polygon from \"@/geometry/Polygon\";\nimport FlowComponent from \"@/flatsurf/FlowComponent\"\nimport SaddleConnection from \"@/flatsurf/SaddleConnection\";\nimport FlatTriangulation from \"@/flatsurf/FlatTriangulation\";\nimport FlowConnection from \"@/flatsurf/FlowConnection\";\nimport VisualizationOptions from \"@/components/flatsurf/options/VisualizationOptions\";\nimport Vertical from \"@/flatsurf/Vertical\";\nimport Path from \"@/flatsurf/Path\";\n\nimport wait from \"@/wait\";\n\nimport PanZoom from \"./PanZoom.vue\";\nimport Flatsurf from \"./flatsurf/Flatsurf.vue\";\nimport IViewer from \"./IViewer\";\n\n@Component({\n  components: {\n    PanZoom,\n    Flatsurf,\n  }\n})\nexport default class Viewer extends Vue implements IViewer {\n  @Prop({ required: true, type: Object }) triangulation!: FlatTriangulation;\n  @Prop({ required: false, default: null, type: Object }) vertical!: Vertical | null;\n  @Prop({ required: false, default: () => [], type: Array }) flowComponents!: FlowComponent[];\n  @Prop({ required: false, default: () => [], type: Array }) saddleConnections!: SaddleConnection[];\n  @Prop({ required: false, default: () => [], type: Array }) paths!: Path[];\n  @Prop({ required: true, type: Object }) layout!: Layout;\n\n  protected visualizationOptions = new VisualizationOptions();\n\n  private focus: Polygon | null = null;\n\n  get idealCoordinateSystem() {\n    return this.vertical?.coordinateSystem || this.triangulation.coordinateSystem;\n  }\n\n  // TODO: This works around a flakiness of pan-zoom. Without this the focus is sometimes not recomputed correctly, see https://github.com/flatsurf/vue-flatsurf/issues/31\n  @Watch(\"idealCoordinateSystem\")\n  onCoordinateSystemChanged() {\n    this.$nextTick(() => {\n      this.focus = this.layout.hull;\n    });\n  }\n\n  public refocus(focus?: Polygon) {\n    if (focus == null)\n      focus = this.layout.hull;\n    if (this.focus == null || !this.focus.equalTo(focus))\n      this.focus = focus;\n  }\n\n  get visibleFlowComponents() {\n    return this.flowComponents.filter((component) =>\n      !component.perimeter.some((connection: FlowConnection) =>\n        ! this.layout.primary.includes(connection.connection.source) && !this.layout.primary.includes(connection.connection.target)\n    ))\n  }\n\n  @Watch(\"layout\", { immediate: true })\n  onLayoutChanged() {\n    if (this.focus == null)\n      this.refocus();\n  }\n\n  async svg() {\n    while (this.layout == null)\n      await wait(this, \"layout\");\n\n    await this.$nextTick();\n\n    return await (this.$refs.flatsurf as any).svg();\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Viewer.vue?vue&type=template&id=cbcccbda&\"\nimport script from \"./Viewer.vue?vue&type=script&lang=ts&\"\nexport * from \"./Viewer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nexport class OperationAborted extends Error {}\n\nexport default class CancellationToken {\n  public cancellationRequested() {\n    return new Promise<boolean>((resolve, reject) => {\n      if (this.aborted) reject(new OperationAborted());\n      setTimeout(() => resolve(this.cancelled), 0);\n    });\n  }\n\n  public cancel() {\n    this.cancelled = true;\n  }\n\n  public abort() {\n    this.aborted = true;\n  }\n\n  private cancelled = false;\n  private aborted = false;\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nexport default class Progress {\n  constructor(name: string = \"\", steps: number = 0) {\n    this.name = name;\n    this.steps = steps;\n  }\n\n  public task(name: string, steps: number) {\n    this.steps += steps;\n    this.name = name;\n  }\n\n  public progress() {\n    this.step++;\n  }\n\n  public get stats(): { name: string, step?: number, steps?: number } {\n    return {\n      name: this.name,\n      step: (this.steps != null && this.step < this.steps) ? this.step : undefined,\n      steps: this.steps,\n    }\n  }\n\n  private step = 0;\n  private steps = 0;\n  private name: string;\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.cancellation != null && _vm.visible)?_c('v-overlay',{staticClass:\"loading-overlay\",attrs:{\"opacity\":.2,\"z-index\":0}},[_c('v-container',[_c('v-row',[_c('v-col',[_vm._v(\" \"+_vm._s(_vm.name)+\"… \"),_c('v-progress-circular',{attrs:{\"indeterminate\":_vm.value == null,\"value\":_vm.value}})],1)],1),_c('v-row',[_c('v-col',[_c('v-btn',{attrs:{\"color\":\"error\",\"dark\":\"\",\"disabled\":_vm.cancellation.cancelled},on:{\"click\":function () { return _vm.cancellation.cancel(); }}},[_vm._v(\"Cancel\")])],1)],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport CancellationToken from \"../src/CancellationToken\";\nimport Progress from \"../src/Progress\";\n\n@Component\nexport default class Overlay extends Vue {\n  @Prop({required: true}) cancellation!: CancellationToken | null;\n  @Prop({required: true}) progress!: Progress | null;\n\n  visible = false;\n\n  @Watch(\"cancellation\", {immediate: true})\n  onCancellation(value: CancellationToken) {\n    if (value == null)\n      this.visible = false;\n    else\n      setTimeout(() => {\n        if (this.cancellation === value)\n          this.visible = true\n      }, 150);\n  }\n\n  get name() {\n    return this.progress!.stats.name;\n  }\n\n  get value() : number | null {\n    if (this.progress!.stats.step == null || this.progress!.stats.steps == null)\n      return null;\n    return this.progress!.stats.step / this.progress!.stats.steps * 100;\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Overlay.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Overlay.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Overlay.vue?vue&type=template&id=69084d4e&scoped=true&\"\nimport script from \"./Overlay.vue?vue&type=script&lang=ts&\"\nexport * from \"./Overlay.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Overlay.vue?vue&type=style&index=0&id=69084d4e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"69084d4e\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCol,VContainer,VOverlay,VProgressCircular,VRow})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.layout != null)?_c('g',[_vm._l((_vm.halfEdges),function(halfEdge){return _c('g',{key:halfEdge,staticClass:\"click-area\",on:{\"mousemove\":function (e) { return _vm.hover(halfEdge, e); },\"mouseleave\":function($event){return _vm.unhover(halfEdge)},\"click\":function($event){return _vm.glue(halfEdge)}}},[_c('segment-component',{attrs:{\"segment\":_vm.segment(halfEdge),\"svg\":_vm.svg}})],1)}),_vm._l((_vm.edges),function(edge){return _c('g',{key:edge.positive,staticClass:\"click-area\",on:{\"mousemove\":function (e) { return _vm.hover(edge, e); },\"mouseleave\":function($event){return _vm.unhover(edge)},\"click\":function($event){return _vm.glue(edge)}}},[_c('segment-component',{attrs:{\"segment\":_vm.segment(edge),\"svg\":_vm.svg}})],1)})],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport HalfEdge from \"@/flatsurf/HalfEdge\";\nimport Edge from \"@/flatsurf/Edge\";\nimport Automorphism from \"@/flatsurf/Automorphism\";\n\nexport default class LayoutOptions {\n  public constructor(glue?: (edge: Edge) => boolean | null, automorphisms?: Automorphism[]) {\n    this.glued = glue || (() => null);\n    this.automorphisms = automorphisms || [];\n  }\n\n  // Whether an HalfEdge should be visually glued (true), unglued (false) or\n  // whether this sholud be left to the implementation (null).\n  public glue(halfEdge: HalfEdge): boolean | null {\n    return this.glued(new Edge(halfEdge));\n  }\n\n  public orbit(halfEdge: HalfEdge): HalfEdge[] {\n    const orbit = [halfEdge];\n\n    for (let i = 0; i < orbit.length; i++) {\n      const preimage = orbit[i];\n      for (const automorphism of this.automorphisms) {\n        const image = automorphism.halfEdgeMap[preimage];\n        if (image != null && !orbit.includes(image))\n          orbit.push(image);\n      }\n    }\n\n    return orbit;\n  }\n\n  private readonly glued: (edge: Edge) => boolean | null;\n  private readonly automorphisms: Automorphism[];\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\n\nimport { mdiLinkOff, mdiLink, mdiAlert } from \"@mdi/js\";\n\nimport nop from \"lodash-es/noop\";\nimport clamp from \"lodash-es/clamp\";\nimport wait from \"@/wait\";\n\nimport SegmentComponent from \"@/components/svg/Segment.vue\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Layout from \"@/layout/Layout\";\nimport LayoutOptions from \"@/layout/LayoutOptions\";\nimport HalfEdge from \"@/flatsurf/HalfEdge\";\nimport VisualizationOptions from \"@/components/flatsurf/options/VisualizationOptions\";\nimport Point from \"@/geometry/Point\";\nimport Segment from \"@/geometry/Segment\";\nimport Polygon from \"@/geometry/Polygon\";\nimport Vector from \"@/geometry/Vector\";\nimport Edge from \"@/flatsurf/Edge\";\nimport IGlueInteraction, { GlueSelection } from \"@/components/interactions/IGlueInteraction\";\n\n@Component({\n  components: { SegmentComponent },\n})\nexport default class GlueInteraction extends Vue implements IGlueInteraction {\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n  @Prop({ required: true, type: Object }) layout!: Layout;\n  @Prop({required: true, type: Function}) relayout!: (layoutOptions?: LayoutOptions) => Promise<Layout>;\n  @Prop({required: true, type: Object }) options!: VisualizationOptions;\n  @Prop({required: false, default: () => null, type: Object}) focus!: Polygon | null;\n  @Prop({required: false, default: () => nop, type: Function}) refocus!: (focus: Polygon) => void;\n\n  glued: GlueSelection = {}\n\n  events: Array<{\n    kind: \"HOVER\",\n    id: number,\n    halfEdge: HalfEdge,\n    at: number\n  } | {\n    kind: \"GLUE\",\n    id: number,\n    edge: Edge\n  }> = [];\n\n  async glue(edge: Edge): Promise<void>;\n  async glue(edge: HalfEdge): Promise<void>;\n  async glue(halfEdge: Edge | HalfEdge) {\n    if (halfEdge instanceof Edge)\n      return await this.glue(halfEdge.positive);\n\n    const edge = new Edge(halfEdge);\n\n    const glued = {...this.glued};\n    if (glued[edge.positive] === undefined)\n      glued[edge.positive] = true;\n    else if (glued[edge.positive] === true)\n      glued[edge.positive] = false;\n    else\n      delete glued[edge.positive];\n\n    this.glued = glued;\n\n    console.assert(this.events.every((e) => e.kind !== \"GLUE\"), \"Overlapping glue events.\");\n\n    const ev = {\n      kind: \"GLUE\" as \"GLUE\",\n      id: Math.random(),\n      edge,\n    };\n\n    this.events = [...this.events];\n\n    if (this.glued[edge.positive] === true && this.layout.layout(edge.positive).inner)\n      return;\n    if (this.glued[edge.positive] === false && !this.layout.layout(edge.positive).inner)\n      return;\n\n    this.events.push(ev);\n\n    try {\n      const previousStart = this.svg.embed(this.layout.layout(halfEdge).segment.start);\n      const previousFocus = this.focus;\n\n      const layout = await this.reglue();\n\n      // TODO: Also don't do this if we cannot relate the coordinate systems before and after. We could possibly relate everything in the viewport coordinate system anyway. See https://github.com/flatsurf/vue-flatsurf/issues/36.\n      if (previousStart != null && previousFocus != null) {\n        // Move the viewport such that the selected half edge does not seem to move.\n        const shift = new Vector(\n            this.svg,\n            new Point(this.svg, previousStart.value),\n            layout.layout(halfEdge).segment.start);\n        this.refocus(previousFocus.translate(shift));\n      }\n    } finally {\n      setTimeout(() => {\n        this.events = this.events.filter((e) => e.id != ev.id);\n      }, 800);\n    }\n  }\n\n  async reglue() {\n    return this.relayout(new LayoutOptions(\n      (e: Edge) => this.glued[e.positive] === undefined ? null : this.glued[e.positive],\n      // TODO: Pass automorphisms here somehow. See https://github.com/flatsurf/vue-flatsurf/issues/33.\n      []));\n  }\n\n  get halfEdges() {\n    return this.layout.triangulation.halfEdges.filter((halfEdge) => !this.layout.layout(halfEdge).inner);\n  }\n\n  get edges() {\n    return this.layout.triangulation.edges.filter((edge) => this.layout.layout(edge.positive).inner);\n  }\n\n  segment(halfEdge: HalfEdge): Segment {\n    return this.layout!.layout(halfEdge).segment;\n  }\n\n  hover(halfEdge: Edge | HalfEdge, e: MouseEvent): void {\n    if (halfEdge instanceof Edge)\n      return this.hover(halfEdge.positive, e);\n\n    this.unhover();\n\n    this.events.push({\n      kind: \"HOVER\",\n      id: Math.random(),\n      halfEdge,\n      at: this.segment(halfEdge).relativize(this.toPoint(e)),\n    });\n  }\n\n  unhover(): void {\n    this.events = this.events.filter((e) => e.kind !== \"HOVER\");\n  }\n\n  @Watch(\"events\")\n  @Watch(\"layout\")\n  onEvent() {\n    const hover = this.events.some((e) => e.kind === \"HOVER\");\n    const glue = this.events.some((e) => e.kind === \"GLUE\");\n\n    for (const edge of this.layout.triangulation.edges) {\n      const icon = (() => {\n        if (hover || glue) {\n          if (this.glued[edge.positive] === undefined)\n            return null;\n          const glue = this.glued[edge.positive];\n          if (glue != this.layout.layout(edge.positive).inner)\n            return mdiAlert;\n          return glue ? mdiLink : mdiLinkOff;\n        } else {\n          return null;\n        }\n      })();\n\n      this.options.icon(edge.positive, icon);\n      this.options.icon(edge.negative, icon);\n      this.options.icon(edge, icon);\n\n      const indicator = (() => {\n        for (const e of this.events) {\n          if (e.kind === \"HOVER\") {\n            const at = clamp(e.at, 0, 1);\n            if (e.halfEdge === edge.positive)\n              return at;\n            if (e.halfEdge === edge.negative)\n              return 1 - at;\n          }\n        }\n        return null;\n      })();\n      this.options.indicate(edge.positive, indicator);\n      this.options.indicate(edge.negative, indicator == null ? null : 1 - indicator);\n\n      const selected = this.events.some((e) => e.kind === \"GLUE\" && e.edge.positive === edge.positive);\n\n      this.options.select(edge, selected);\n      this.options.select(edge.positive, selected);\n      this.options.select(edge.negative, selected);\n    }\n  }\n\n  toPoint(e: MouseEvent): Point {\n    let svg = this.$el;\n    while (svg.tagName !== \"svg\")\n      svg = svg.parentElement!;\n    return new Point(this.svg, e.clientX - svg.getBoundingClientRect().left, e.clientY - svg.getBoundingClientRect().top);\n  }\n\n  async query(when: \"now\" | \"changed\") {\n    if (when === \"changed\")\n      await wait(this, \"glued\");\n    return this.glued;\n  }\n\n  async force(glued: GlueSelection) {\n    this.glued = glued;\n    return await this.reglue();\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GlueInteraction.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GlueInteraction.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./GlueInteraction.vue?vue&type=template&id=b20b3038&scoped=true&\"\nimport script from \"./GlueInteraction.vue?vue&type=script&lang=ts&\"\nexport * from \"./GlueInteraction.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./GlueInteraction.vue?vue&type=style&index=0&id=b20b3038&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b20b3038\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.layout != null)?_c('g',{attrs:{\"tabindex\":\"0\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.edit(false)}}},[_c('g',{staticClass:\"path\",attrs:{\"animated\":_vm.animated}},[_c('path-component',{attrs:{\"path\":_vm.path,\"svg\":_vm.svg,\"layout\":_vm.layout}})],1),(_vm.editable)?_c('g',{on:{\"click\":function($event){return _vm.append()}}},[_c('g',{staticClass:\"preview\"},[(_vm.points.length !== 0 && _vm.nextSegment == null)?_c('point-component',{attrs:{\"point\":_vm.fromPathPoint(_vm.cross(_vm.points[_vm.points.length - 1])),\"radius\":10,\"svg\":_vm.svg}}):_vm._e(),(_vm.nextSegment != null)?_c('segment-component',{attrs:{\"svg\":_vm.svg,\"segment\":_vm.nextSegment}}):_vm._e()],1),_c('g',{staticClass:\"select-half-edge\"},_vm._l((_vm.triangulation.halfEdges),function(halfEdge){return _c('g',{key:halfEdge,on:{\"mousemove\":function (e) { return _vm.hover(halfEdge, e); },\"mouseout\":_vm.unhover}},[_c('segment-component',{attrs:{\"svg\":_vm.svg,\"segment\":_vm.layout.layout(halfEdge).segment}})],1)}),0),_c('g',{staticClass:\"select-vertex\"},_vm._l((_vm.vertices),function(vertex,i){return _c('g',{key:i,on:{\"mousemove\":function (e) { return _vm.hover(vertex); },\"mouseout\":_vm.unhover}},[_c('point-component',{attrs:{\"point\":_vm.layout.layout(vertex[0]).segment.start,\"svg\":_vm.svg,\"radius\":20}})],1)}),0),_c('g',{staticClass:\"select-vertex\"},_vm._l((_vm.controlPoints),function(point,i){return _c('g',{key:i,on:{\"mousemove\":function (e) { return _vm.hover(point); },\"mouseout\":_vm.unhover}},[_c('point-component',{attrs:{\"svg\":_vm.svg,\"point\":_vm.fromPathPoint(point),\"radius\":20}})],1)}),0)]):_vm._e()]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* ******************************************************************************\n * Copyright (c) 2020-2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\n// Currently, HalfEdge is just a plain number since wrapping it into an object\n// makes our live much harder in several places, e.g., it cannot be used as a\n// key in an object anymore.\n\ntype HalfEdge = number;\n\nexport type HalfEdgeSchema = number;\n\nexport default HalfEdge;\n\nexport function isHalfEdge(x: any): x is HalfEdge {\n  return typeof(x) === \"number\";\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport noop from \"lodash-es/noop\";\nimport wait from \"@/wait\";\n\nimport PointComponent from \"@/components/svg/Point.vue\";\nimport SegmentComponent from \"@/components/svg/Segment.vue\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Layout from \"@/layout/Layout\";\nimport FlatTriangulation from \"@/flatsurf/FlatTriangulation\";\nimport VisualizationOptions from \"@/components/flatsurf/options/VisualizationOptions\";\nimport Point from \"@/geometry/Point\";\nimport Segment from \"@/geometry/Segment\";\nimport HalfEdge, { isHalfEdge } from \"@/flatsurf/HalfEdge\";\nimport IPathInteraction, { PathPoint } from \"@/components/interactions/IPathInteraction\";\nimport PathComponent from \"@/components/flatsurf/Path.vue\";\n\n\n@Component({\n  components: { PointComponent, SegmentComponent, PathComponent },\n})\nexport default class PathInteraction extends Vue implements IPathInteraction {\n  @Prop({required: true, type: Object}) svg!: CoordinateSystem;\n  @Prop({ required: true, type: Object }) layout!: Layout;\n  @Prop({ required: true, type: Object }) triangulation!: FlatTriangulation;\n  @Prop({required: true, type: Object }) options!: VisualizationOptions;\n  @Prop({required: false, type: Boolean, default: true }) animated!: boolean;\n\n  // The path constructed so far, given by the points on the path.\n  public points: PathPoint[] = [];\n\n  // The point to be added to the path.\n  // For the purpose of previewing.\n  next: PathPoint | null = null;\n\n  editable: boolean = true;\n\n  // Make path editable.\n  edit(editable: boolean): void {\n    this.editable = editable;\n    this.next = null;\n  }\n\n  // Append a point to the path.\n  append(): void {\n    if (this.next !== null) {\n      this.points.push(this.next);\n      this.next = null;\n    }\n  }\n\n  // Preview the effect of adding item to the path.\n  hover(vertex: HalfEdge[]): void;\n  hover(halfEdge: HalfEdge, e: MouseEvent): void;\n  hover(face: HalfEdge[], e: MouseEvent): void;\n  hover(point: PathPoint): void;\n  hover(item: HalfEdge | HalfEdge[] | PathPoint, e?: MouseEvent): void {\n    if (!this.editable)\n      return;\n\n    const next = this.toPathPoint(item, e);\n\n    this.next = null;\n\n    if (this.points.length === 0) {\n      this.next = this.cross(next);\n      return;\n    }\n\n    const previous = this.cross(this.points[this.points.length - 1]);\n    const segment = this.toSegment(this.cross(previous), next);\n\n    const sector = (vertex: HalfEdge[]) => [vertex[0], this.triangulation.vertices.image(vertex[vertex.length - 1])];\n\n    // Determine intersections of this segment with all outer half edges.\n    let intersections = this.triangulation.halfEdges\n      .filter((halfEdge) => !this.layout!.layout(halfEdge).inner)\n      .filter((halfEdge) => this.layout!.layout(halfEdge).segment.intersects(segment));\n\n    // Ignore half edges that we intersect at the starting point.\n    if (\"halfEdge\" in previous) {\n      intersections = intersections.filter((halfEdge) => halfEdge !== previous.halfEdge);\n    } else if (\"face\" in previous) {\n    } else {\n      const boundary = [sector(previous.vertex)[0], -sector(previous.vertex)[1]]\n      intersections = intersections.filter((halfEdge) => !boundary.includes(halfEdge));\n    }\n\n    // Ignore half edges that we intersect at the end point.\n    if (\"halfEdge\" in next) {\n      intersections = intersections.filter((halfEdge) => halfEdge !== next.halfEdge);\n    } else if (\"face\" in next) {\n    } else {\n      const boundary = [sector(next.vertex)[0], -sector(next.vertex)[1]]\n      intersections = intersections.filter((halfEdge) => !boundary.includes(halfEdge));\n    }\n\n    if (intersections.length !== 0) {\n      return;\n    }\n\n    if (segment.length < 1e-3) {\n      return;\n    }\n\n    // Check that the segment is on the interior of the polygon.\n    if (\"halfEdge\" in previous) {\n      if (this.layout!.layout(previous.halfEdge).inner)\n        noop();\n      else if (\"halfEdge\" in next && next.halfEdge === previous.halfEdge)\n        noop();\n      else if (\"vertex\" in next && sector(next.vertex)[0] === previous.halfEdge)\n        noop();\n      else if (\"vertex\" in next && sector(next.vertex)[1] === -previous.halfEdge)\n        noop();\n      else {\n        if (this.triangulation.vector(previous.halfEdge).angleTo(segment.tangentInStart) <= Math.PI) {\n          return;\n        }\n      }\n    } else if (\"face\" in previous) {\n    } else {\n      if (this.layout!.layout(previous.vertex[0]).inner)\n        noop();\n      else if (\"halfEdge\" in next && next.halfEdge === sector(previous.vertex)[0])\n        noop();\n      else if (\"halfEdge\" in next && next.halfEdge === -sector(previous.vertex)[1])\n        noop();\n      else if (\"vertex\" in next && sector(next.vertex)[0] == -sector(previous.vertex)[1])\n        noop();\n      else if (\"vertex\" in next && sector(next.vertex)[1] == -sector(previous.vertex)[0])\n        noop();\n      else {\n        const boundary = sector(previous.vertex).map((halfEdge) => this.triangulation.vector(halfEdge));\n        if (boundary[0].angleTo(boundary[1]) > boundary[0].angleTo(segment.tangentInStart)) {\n          return;\n        }\n      }\n    }\n\n    this.next = next;\n  }\n\n  // Clear path preview created by hover().\n  unhover(): void {\n    this.next = null;\n  }\n\n  // Return the segment to be added to the path.\n  get nextSegment(): Segment | null {\n    if (this.points.length === 0)\n      return null;\n    if (this.next == null)\n      return null;\n\n    return this.toSegment(this.points[this.points.length - 1], this.next);\n  }\n\n  // Return the visible vertices, represented by their outgoing half edges.\n  get vertices(): HalfEdge[][] {\n    const vertices: HalfEdge[][] = [];\n\n    const present = (source: HalfEdge) => vertices.filter((vertex) => vertex.includes(source)).length !== 0;\n    const vertex = (source: HalfEdge) => {\n      const vertex = [source];\n      while (true) {\n        const next = this.triangulation.vertices.image(vertex[vertex.length - 1]);\n        if (!this.layout!.layout(next).inner)\n          break;\n        if (next === source)\n          break;\n        vertex.push(next);\n      }\n      return vertex;\n    };\n\n    for (const source of this.triangulation.halfEdges) {\n      if (this.layout!.layout(source).inner)\n        continue;\n      if (present(source))\n        continue;\n      vertices.push(vertex(source));\n    }\n\n    for (const source of this.triangulation.halfEdges) {\n      if (present(source))\n        continue;\n      vertices.push(vertex(source));\n    }\n\n    return vertices;\n  }\n\n  // Return the visible half edges.\n  get halfEdges(): HalfEdge[] {\n    // TODO: Drop duplicates. See https://github.com/flatsurf/vue-flatsurf/issues/37.\n    return this.triangulation.halfEdges;\n  }\n\n  // Return the visible faces, represented by the half edges on their boundary.\n  get faces(): HalfEdge[][] {\n    return this.triangulation.faces.cycles;\n  }\n\n  // Return the line segments that make up this path.\n  get path(): Segment[] {\n    const path: Segment[] = [];\n\n    let previous: PathPoint | null = null;\n\n    for (let point of this.points) {\n      if (previous != null)\n        path.push(this.toSegment(previous, point));\n      previous = point;\n    }\n\n    return path;\n  }\n\n  // Return the end points that make up this path.\n  get controlPoints(): PathPoint[] {\n    const controlPoints: PathPoint[] = [];\n\n    for (let i = 0; i < this.points.length; i++) {\n      const point = this.points[i];\n      if (i === 0) {\n        controlPoints.push(this.cross(point));\n      } else if (i === this.points.length - 1) {\n        controlPoints.push(point);\n      } else {\n        controlPoints.push(point);\n        if (this.cross(point) !== point)\n          controlPoints.push(this.cross(point));\n      }\n    }\n\n    return controlPoints;\n  }\n\n  // Return the segment connection two poinst on the path.\n  toSegment(a: PathPoint, b: PathPoint) {\n    return new Segment(this.fromPathPoint(this.cross(a)), this.fromPathPoint(b));\n  }\n\n  // Return the location of the mouse pointer in SVG coordinates.\n  toPoint(e: MouseEvent): Point {\n    let svg = this.$el;\n    while (svg.tagName !== \"svg\")\n      svg = svg.parentElement!;\n    return new Point(this.svg, e.clientX - svg.getBoundingClientRect().left, e.clientY - svg.getBoundingClientRect().top);\n  }\n\n  // Return the location of the mouse pointer as a new point to append to the path.\n  toPathPoint(item: HalfEdge | HalfEdge[] | PathPoint, e?: MouseEvent): PathPoint {\n    if (isHalfEdge(item)) {\n      const halfEdge = item as HalfEdge;\n      const at = this.layout!.layout(halfEdge).segment.relativize(this.toPoint(e!));\n      return {halfEdge, at};\n    } else if (\"halfEdge\" in item || \"vertex\" in item || \"face\" in item) {\n      return item;\n    } else if (e === undefined) {\n      const vertex = item as HalfEdge[];\n      return { vertex };\n    } else {\n      const face = item as HalfEdge[];\n      console.assert(face.length >= 2);\n\n      const point = this.toPoint(e);\n      const segments = [\n        this.layout!.layout(face[0]).segment,\n        this.layout!.layout(face[1]).segment,\n      ];\n\n      return { face, at: [\n        segments[0].relativize(point),\n          segments[1].relativize(point),\n      ]};\n    }\n  }\n\n  // Return a point on the path as a location in the SVG coordinate system.\n  fromPathPoint(point: PathPoint): Point {\n    if (\"face\" in point) {\n      const boundary = point.face;\n      const at = point.at;\n      return this.layout!.layout(boundary[0]).segment.start\n        .translate(this.layout!.layout(boundary[0]).segment.tangentInStart.multiply(at[0]))\n        .translate(this.layout!.layout(boundary[1]).segment.tangentInStart.multiply(at[1]));\n    } else if (\"halfEdge\" in point) {\n      return this.layout!.layout(point.halfEdge).segment.at(point.at);\n    } else {\n      return this.layout!.layout(point.vertex[0]).segment.start;\n    }\n  }\n\n  cross(point: PathPoint): PathPoint {\n    if (\"halfEdge\" in point)\n      return {\n        halfEdge: -point.halfEdge,\n        at: 1 - point.at,\n      };\n    else\n      return point;\n  }\n\n  public async query(when: \"now\" | \"completed\" | \"changed\") {\n    if (when === \"completed\") {\n      while (this.editable === true)\n        await wait(this, \"editable\");\n    } else if (when === \"changed\") {\n      if (this.editable === false)\n        this.editable = true;\n      await wait(this, [\"editable\", \"path\"]);\n    }\n    return this.points;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PathInteraction.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PathInteraction.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PathInteraction.vue?vue&type=template&id=0eb297f6&scoped=true&\"\nimport script from \"./PathInteraction.vue?vue&type=script&lang=ts&\"\nexport * from \"./PathInteraction.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PathInteraction.vue?vue&type=style&index=0&id=0eb297f6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0eb297f6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-bottom-navigation',{attrs:{\"color\":\"primary\",\"value\":_vm.$route.path,\"fixed\":\"\",\"app\":\"\"},on:{\"change\":function (path) { return _vm.$router.push({ path: path, query: _vm.$route.query }); }}},[_c('v-btn',{attrs:{\"value\":\"/edit\"}},[_c('span',[_vm._v(\"Surface\")]),_c('v-badge',{attrs:{\"value\":_vm.error != null,\"color\":\"error\",\"icon\":\"mdi-error\",\"overlap\":\"\"}},[_c('v-icon',[_vm._v(\"mdi-layers\")])],1)],1),_c('v-btn',{attrs:{\"value\":\"/view\"}},[_c('span',[_vm._v(\"Visualization\")]),_c('v-icon',[_vm._v(\"mdi-eye\")])],1),_c('v-btn',{attrs:{\"value\":\"/svg\"}},[_c('span',[_vm._v(\"SVG\")]),_c('v-icon',[_vm._v(\"mdi-svg\")])],1),_c('v-btn',{attrs:{\"value\":\"/widget\"}},[_c('span',[_vm._v(\"Widget\")]),_c('v-icon',[_vm._v(\"mdi-widgets\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\n\n@Component\nexport default class BottomNavigation extends Vue {\n  get error() {\n    return this.$store.state.error;\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BottomNavigation.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BottomNavigation.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./BottomNavigation.vue?vue&type=template&id=389f93e3&\"\nimport script from \"./BottomNavigation.vue?vue&type=script&lang=ts&\"\nexport * from \"./BottomNavigation.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBadge } from 'vuetify/lib/components/VBadge';\nimport { VBottomNavigation } from 'vuetify/lib/components/VBottomNavigation';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBadge,VBottomNavigation,VBtn,VIcon})\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Provide, Vue } from \"vue-property-decorator\";\n\nimport PanZoom from \"@/components/PanZoom.vue\";\nimport Viewer from \"@/components/Viewer.vue\";\nimport CancellationToken from \"@/CancellationToken\";\nimport Progress from \"@/Progress\";\nimport Overlay from \"./Overlay.vue\";\nimport GlueInteraction from \"@/components/interactions/GlueInteraction.vue\";\nimport PathInteraction from \"@/components/interactions/PathInteraction.vue\";\nimport BottomNavigation from \"./BottomNavigation.vue\";\n\n@Component({\n  components: {\n    BottomNavigation,\n    Overlay,\n    PanZoom,\n    Viewer,\n    GlueInteraction,\n    PathInteraction\n  }\n})\nexport default class App extends Vue {\n  overlay = null as CancellationToken | null;\n  progress = null as Progress | null;\n\n  @Provide()\n  async run(callback: (cancellation: CancellationToken, progress: Progress) => Promise<void>) {\n    // Any previous run is supposedly cancelled already so we can safely throw\n    // away its cancellation and progress tokens.\n    const cancellation = new CancellationToken();\n    this.overlay = cancellation;\n    this.progress = new Progress();\n    try {\n      await callback(this.overlay, this.progress);\n    } finally {\n      if (this.overlay === cancellation)\n        // We came here because this process completed. Remove the overlay.\n        this.overlay = null;\n    }\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=e8df219a&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=e8df219a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e8df219a\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VMain } from 'vuetify/lib/components/VMain';\ninstallComponents(component, {VApp,VContainer,VMain})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$store.state.triangulation != null)?_c('layouter',{attrs:{\"triangulation\":_vm.$store.state.triangulation,\"layout\":_vm.$store.state.layout},on:{\"layout\":_vm.layoutChanged},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar layout = ref.layout;\nvar relayout = ref.relayout;\nreturn [_c('viewer-component',{staticClass:\"surface\",attrs:{\"triangulation\":_vm.$store.state.triangulation,\"flow-components\":_vm.flowComponents,\"layout\":layout,\"vertical\":_vm.$store.state.vertical},scopedSlots:_vm._u([{key:\"interaction\",fn:function(ref){\nvar svg = ref.svg;\nvar triangulation = ref.triangulation;\nvar options = ref.options;\nvar refocus = ref.refocus;\nvar focus = ref.focus;\nreturn [_c('triangulation-interaction',{attrs:{\"layout\":layout,\"options\":options,\"outer\":_vm.show.includes('outer'),\"inner\":_vm.show.includes('triangulation')}}),_c('label-interaction',{attrs:{\"layout\":layout,\"options\":options,\"outer\":_vm.show.includes('outer-labels'),\"numeric\":_vm.show.includes('numeric-labels')}}),(_vm.action == 'path')?_c('path-interaction',{attrs:{\"layout\":layout,\"svg\":svg,\"triangulation\":triangulation,\"options\":options}}):(_vm.action == 'glue')?_c('glue-interaction',{attrs:{\"relayout\":relayout,\"svg\":svg,\"options\":options,\"focus\":focus,\"refocus\":refocus,\"layout\":layout}}):_vm._e()]}}],null,true)})]}}],null,false,374882210)}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport VisualizationOptions from \"../flatsurf/options/VisualizationOptions\";\nimport Layout from \"@/layout/Layout\";\n\n@Component\nexport default class TriangulationInteraction extends Vue {\n  @Prop({ required: true, type: Object }) options!: VisualizationOptions;\n  @Prop({ required: true, type: Object }) layout!: Layout;\n  @Prop({ required: false, default: true, type: Boolean }) outer!: boolean;\n  @Prop({ required: false, default: false, type: Boolean }) inner!: boolean;\n\n  @Watch(\"layout\", {immediate: true})\n  @Watch(\"outer\")\n  @Watch(\"inner\")\n  @Watch(\"options\")\n  resetVisiblity() {\n    for (const halfEdge of this.layout.triangulation.halfEdges)\n      this.options.show(halfEdge, this.layout.layout(halfEdge).inner ? false : this.outer);\n\n    for (const edge of this.layout.triangulation.edges)\n      this.options.show(edge, this.layout.layout(edge.positive).inner ? this.inner : false);\n  }\n\n  render() {}\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport VisualizationOptions from \"../flatsurf/options/VisualizationOptions\";\nimport Layout from \"@/layout/Layout\";\nimport Edge from \"@/flatsurf/Edge\";\n\nfunction nextLabel(label: string) {\n  let chars = label.split('').map((c) => c.charCodeAt(0) - 65);\n  chars[chars.length - 1]++;\n  for (let i = chars.length; i--;) {\n    if (chars[i] == 25) {\n      chars[i] = 0;\n      if (i == 0)\n        chars = [0, ...chars];\n      else\n        chars[i - 1]++;\n    }\n  }\n\n  return chars.map((code) => String.fromCharCode(65 + code)).join('');\n}\n\n@Component\nexport default class TriangulationVisibilityInteraction extends Vue {\n  @Prop({ required: true, type: Object }) options!: VisualizationOptions;\n  @Prop({ required: true, type: Object }) layout!: Layout;\n  @Prop({ required: false, default: false, type: Boolean }) outer!: boolean;\n  @Prop({ required: false, default: false, type: Boolean }) numeric!: boolean;\n\n  @Watch(\"layout\", {immediate: true})\n  @Watch(\"outer\")\n  @Watch(\"numeric\")\n  @Watch(\"options\")\n  resetVisiblity() {\n    let alpha = \"A\";\n\n    for (const halfEdge of this.layout.triangulation.halfEdges) {\n      if (halfEdge < 0)\n        continue;\n\n      const edge = new Edge(halfEdge);\n\n      if (this.outer) {\n        if (!this.layout.layout(halfEdge).inner) {\n          // TODO: Do not give labels to invisible components. See https://github.com/flatsurf/vue-flatsurf/issues/36.\n          this.options.label(halfEdge, alpha);\n          this.options.label(-halfEdge, alpha);\n          this.options.label(edge, null);\n          alpha = nextLabel(alpha);\n          continue;\n        }\n      }\n      if (this.numeric) {\n        this.options.label(halfEdge, String(halfEdge));\n        this.options.label(-halfEdge, this.layout.layout(halfEdge).inner ? null : String(-halfEdge));\n        this.options.label(edge, String(edge.positive));\n        continue;\n      }\n\n      this.options.label(halfEdge, null);\n      this.options.label(-halfEdge, null);\n      this.options.label(edge, null);\n    }\n  }\n\n  render() {}\n}\n\n","/* ******************************************************************************\n * Copyright (c) 2020-2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport minBy from \"lodash-es/minBy\";\nimport Flatten from \"@flatten-js/core\";\n\nimport Vector from \"@/geometry/Vector\";\nimport HalfEdge from \"@/flatsurf/HalfEdge\";\nimport HalfEdgeLayout from './HalfEdgeLayout';\nimport Point from '@/geometry/Point';\nimport Segment from '@/geometry/Segment';\nimport Polygon from '@/geometry/Polygon';\nimport FlatTriangulation from '@/flatsurf/FlatTriangulation';\nimport Progress from \"@/Progress\";\nimport CancellationToken from \"@/CancellationToken\";\nimport LayoutOptions from \"./LayoutOptions\";\n\nexport default class CellLayout {\n  // Create a layout by walking the boundary of the cell in counter-clockwise\n  // order on the inside and summing up the associated vectors to determine the\n  // segment corresponding to each half edge.\n  public constructor(surface: FlatTriangulation, cell: HalfEdge[], origin: Point);\n  public constructor(surface: FlatTriangulation, layout: Record<HalfEdge, HalfEdgeLayout>);\n  public constructor(surface: FlatTriangulation, cell: HalfEdge[] | Record<HalfEdge, HalfEdgeLayout>, origin?: Point) {\n    this.surface = surface;\n\n    if (cell instanceof Array) {\n      console.assert(origin);\n      let end = origin!;\n      this.layout = Object.fromEntries(cell.map((he: HalfEdge) => {\n        const start = end;\n        end = end.translate(surface.vector(he));\n        return [he, {\n          segment: new Segment(origin!.parent, start.value, end.value),\n          inner: false,\n        }];\n      }));\n    } else {\n      this.layout = cell;\n    }\n\n    this.boundingRectArea = this.polygon.boundingRect.area();\n  }\n\n  // Translate this cell so that half edge coincides with segment.\n  translate(delta: Vector): void;\n  translate(halfEdge: HalfEdge, segment: Segment): void;\n  translate(halfEdge: HalfEdge | Vector, segment?: Segment) {\n    if (halfEdge instanceof Vector) {\n      const delta = halfEdge as Vector;\n      this.halfEdges.map((halfEdge) => {\n        this.layout[halfEdge].segment = this.layout[halfEdge].segment.translate(delta);\n      });\n    } else {\n      const before = this.layout[halfEdge].segment;\n      const delta = new Vector(before.parent, before.start, segment!.start);\n      \n      // https://github.com/alexbol99/flatten-js/pull/75\n      console.assert(before.translate(delta).equalTo(segment!, (Flatten.Utils as any).getTolerance()));\n\n      this.translate(delta);\n    }\n  }\n\n  // Return the HalfEdges that glue correctly between this layout and `other`\n  // currently or return an empty array if something overlaps or touches\n  // incorrectly.\n  glues(other: CellLayout): HalfEdge[] {\n    const otherPolygon = other.polygon;\n\n    const glued = [];\n\n    for (const halfEdge of this.halfEdges) {\n      if (this.layout[halfEdge].segment.intersects(otherPolygon)) {\n        // This half edge and the other cell have at least a point in common.\n\n        if (this.layout[halfEdge].segment.middle.on(otherPolygon)) {\n          if (other.halfEdges.includes(-halfEdge)) {\n            // If this half edge has its counterpart in the other cell, then we\n            // want them to be glued correctly.\n            if (this.layout[halfEdge].segment.equalTo(other.layout[-halfEdge].segment.reverse(), Flatten.Utils.getTolerance())) {\n              glued.push(halfEdge);\n              continue;\n            } else {\n              return [];\n            }\n          } else {\n            return [];\n          }\n        }\n\n        const intersections = this.layout[halfEdge].segment.intersect(otherPolygon);\n        if (intersections.length === 0) {\n          // This half edge is completely inside the other cell.\n          return [];\n        }\n\n        // Check whether the intersection points are consistently glued.\n        for (const intersection of intersections) {\n          const touchConsistent = (source: HalfEdge) => {\n              for (const vertex of this.surface.vertices.cycles) {\n                if (!vertex.includes(source)) continue;\n\n                for (const touch of vertex) {\n                  if (!other.halfEdges.includes(touch)) continue;\n\n                  if (intersection.equalTo(other.layout[touch].segment.start, Flatten.Utils.getTolerance()))\n                    return true;\n              }\n            };\n            // Not touching at a vertex or not touching at this vertex.\n            return false;\n          }\n\n          if (intersection.equalTo(this.layout[halfEdge].segment.start, Flatten.Utils.getTolerance())) {\n            // The cells touch at the starting point of this half edge. We\n            // check whether what it touches is the same vertex in the other\n            // cell.\n            if (!touchConsistent(halfEdge)) {\n              return [];\n            }\n          }\n          else if (intersection.equalTo(this.layout[halfEdge].segment.end, Flatten.Utils.getTolerance())) {\n            // The cells touch at the end point of this half edge. We\n            // check whether what it touches is the same vertex in the other\n            // cell.\n            if (!touchConsistent(-halfEdge)) {\n              return [];\n            }\n          } else {\n            // The cells touch not at the end point of a half edge.\n            return [];\n          }\n        }\n      }\n    }\n\n    console.assert(glued.length !== 0);\n    return glued;\n  }\n\n  touches(other: CellLayout): HalfEdge[] {\n    const otherPolygon = other.polygon;\n    return this.halfEdges.filter((halfEdge) => {\n      return !this.layout[halfEdge].inner && this.layout[halfEdge].segment.intersects(otherPolygon) || this.layout[halfEdge].segment.touch(otherPolygon);\n    });\n  }\n\n  // Return the boundary polygon of this cell (might not be connected.)\n  get polygon(): Polygon {\n    const polygon = new Flatten.Polygon();\n    this.boundaries.map((boundary) => {\n      polygon.addFace(boundary.map((side) => this.parent.embed(this.layout[side].segment).value));\n    });\n    return new Polygon(this.parent, polygon);\n  }\n\n  // Return the boundary polygons of this cell.\n  get boundaries() : HalfEdge[][] {\n    let pending = new Set(this.halfEdges.filter((he) => !this.layout[he].inner));\n    const boundaries = [] as HalfEdge[][];\n\n    while(pending.size) {\n      let start!: number;\n      for (start of pending) break;\n\n      const boundary = [] as HalfEdge[];\n      let next = start;\n      do {\n        next = -next;\n\n        do {\n          next = this.surface.vertices.preimage(next);\n        } while(this.layout[next].inner);\n\n        boundary.push(next);\n        pending.delete(next);\n      } while (next !== start);\n\n      boundaries.push(boundary);\n    }\n\n    return boundaries;\n  }\n\n  private get parent() {\n    return this.layout[this.halfEdges[0]].segment.parent;\n  }\n\n  public toString(): string {\n    return \"{\" + this.halfEdges.map((he) => `${he}: ${this.layout[he].segment}`).join(\", \") + \"}\";\n  }\n\n  get halfEdges(): HalfEdge[] {\n    return Object.keys(this.layout).map((halfEdge) => Number(halfEdge));\n  }\n\n  // Merge two of the cells by identifying two opposite half edges.\n  static async merge(cells: CellLayout[], options: LayoutOptions, cache: Record<HalfEdge, number | null> = {}, cancellation = new CancellationToken(), _progress = new Progress()): Promise<CellLayout[]> {\n    if (cells.length === 1)\n      return cells;\n\n    let scores = [] as {\n      glue: HalfEdge;\n      cell: CellLayout;\n      other: CellLayout;\n      score: number;\n    }[];\n\n    for (const cell of cells) {\n      if (await cancellation.cancellationRequested())\n        break;\n\n      for (const glue of cell.halfEdges) {\n        if (glue < 0) continue;\n        const other = cells.find((other) => other.halfEdges.includes(-glue))!;\n        if (cell === other) continue;\n\n        if (cache[glue] === undefined) {\n          cache[glue] = CellLayout.score(glue, cell, other, cells, options);\n        }\n\n        const score = cache[glue];\n\n        if (score === null)\n          continue;\n\n        scores.push({ glue, cell, other, score });\n      }\n    }\n\n    if (scores.length === 0)\n      return cells;\n\n    const best = minBy(scores, 'score')!;\n\n    for (const glue of options.orbit(best.glue)) {\n      const cell = cells.find((cell) => cell.halfEdges.includes(glue))!;\n      const other = cells.find((other) => other.halfEdges.includes(-glue))!;\n\n      console.assert(cell !== other);\n\n      const glued = CellLayout.glue(glue, cell, other);\n      glued.primary = best.glue === glue;\n\n      for (let halfEdge of glued.halfEdges) {\n        delete cache[halfEdge];\n        delete cache[-halfEdge];\n      }\n\n      cells = [glued, ...cells.filter((c) => c !== cell && c !== other)];\n    }\n\n    return cells;\n  }\n\n  // Return the score (lower is better) to the visual glueing of glue of\n  // parent and -glue of other; or return null if the two cannot be glued\n  // without overlaps in the resulting picture.\n  private static score(glue: HalfEdge, parent: CellLayout, other: CellLayout, cells: CellLayout[], options: LayoutOptions): number | null {\n    console.assert(parent.halfEdges.includes(glue) && other.halfEdges.includes(-glue));\n    console.assert(!parent.layout[glue].inner)\n    console.assert(!other.layout[-glue].inner);\n\n    if (!parent.primary)\n      return null;\n\n    other.translate(-glue, parent.layout[glue].segment.reverse());\n    const glues = parent.glues(other);\n    if (glues.length === 0) {\n      return null;\n    }\n\n    // Forbid gluing cells that contain identified edges.\n    for (const preimage of parent.halfEdges)\n      for (const image of options.orbit(preimage))\n        if (other.halfEdges.includes(image))\n          return null;\n\n    // Prefer edges that have been explicitly selected.\n    if (options.glue(glue) === true)\n      return -1;\n    if (options.glue(glue) === false)\n      return null;\n\n    // Prefer edges that keep Delaunay cells intact.\n    {\n      const ca = parent.surface.vector(glue);\n      const cb = parent.surface.vector(parent.surface.vertices.image(glue));\n      const dc = parent.surface.vector(-parent.surface.faces.image(-glue));\n\n      const a = dc.add(ca);\n      const b = dc.add(cb);\n      const c = dc;\n\n      const det = (x00: number, x01: number, x02: number, x10: number, x11: number, x12: number, x20: number, x21: number, x22: number) => x00 * (x11 * x22 - x12 * x21) - x10 * (x01 * x22 - x21 * x02) + x20 * (x01 * x12 - x11 * x02);\n\n      const delaunay = det(a.x, a.y, a.x * a.x + a.y * a.y, b.x, b.y, b.x * b.x + b.y * b.y, c.x, c.y, c.x * c.x + c.y * c.y);\n\n      if (Math.abs(delaunay) < (Flatten.Utils as any).getTolerance())\n        return 0;\n    }\n\n    // Prefer edges that minimize the area of a bounding rectangle of the glued area.\n    {\n      const ungluedArea = cells.map((cell) => cell.boundingRectArea).reduce((a, b) => a+b);\n\n      const gluedArea = cells.filter((cell) => cell !== parent && cell !== other).map((cell) => cell.boundingRectArea).reduce((a, b) => a + b, 0)\n        + CellLayout.glue(glues, parent, other).boundingRectArea;\n\n      return gluedArea / ungluedArea;\n    }\n  }\n\n  // Glue parent and other along glue and return the resulting cell.\n  private static glue(glues: HalfEdge[], parent: CellLayout, other: CellLayout): CellLayout;\n  private static glue(glue: HalfEdge, parent: CellLayout, other: CellLayout): CellLayout;\n  private static glue(glues: HalfEdge | HalfEdge[], parent: CellLayout, other: CellLayout): CellLayout {\n    if (!Array.isArray(glues)) {\n      other.translate(-glues, parent.layout[glues].segment.reverse());\n      return CellLayout.glue(parent.glues(other), parent, other);\n    } else {\n      console.assert(glues.length !== 0)\n      other.translate(-glues[0], parent.layout[glues[0]].segment.reverse());\n\n      // https://github.com/alexbol99/flatten-js/pull/75\n      for (const glue of glues)\n        console.assert(parent.layout[glue].segment.equalTo(other.layout[-glue].segment.reverse(), (Flatten.Utils as any).getTolerance()));\n\n      console.assert(Object.keys(parent.layout).every((he) => !other.layout.hasOwnProperty(he)));\n      console.assert(Object.keys(other.layout).every((he) => !parent.layout.hasOwnProperty(he)));\n\n      const glued = {...parent.layout, ...other.layout};\n      for (const glue of glues) {\n        glued[glue] = { segment: parent.layout[glue].segment, inner: true }\n        glued[-glue] = { segment: other.layout[-glue].segment, inner: true }\n      }\n\n      return new CellLayout(parent.surface, glued);\n    }\n  }\n\n  // Find a cell of unpacked that can be packed with the cells in packed, i.e.,\n  // than can be shifted to a place so it does not overlap with any of the\n  // cells in packed.\n  // Returns the cell as \"unpackedCell\" and a \"packedCell\" relative to which it\n  // should be positioned, e.g., because both have a half edge in common.\n  // Also returns a pair of half edges of the respective cells that should be\n  // aligned in the output to make the resulting picture easier to parse.\n  private static packable(unpacked: CellLayout[], packed: CellLayout[]) {\n    for (let i = 0; i < unpacked.length; i++) {\n      const unpackedCell = unpacked[i];\n\n      // Find a half edge that connects to something that has already been packed\n      for (let unpackedHalfEdge of unpackedCell.halfEdges) {\n        for (let packedCell of packed) {\n          for (let packedHalfEdge of packedCell.halfEdges) {\n            if (unpackedHalfEdge === -packedHalfEdge) {\n              unpacked.splice(i, 1);\n              return {\n                unpackedCell,\n                packedCell,\n                unpackedHalfEdge,\n                packedHalfEdge,\n              };\n            }\n          }\n        }\n      }\n    }\n\n    // The surface is not connected.\n    // Find half edges that go in opposite directions.\n    // (It is not clear that this is a good approach actually but it is\n    // somewhat similar to the above.)\n    const unpackedCell = unpacked.pop()!;\n    const packedCell = packed[0];\n    const pairsOfHalfEdges = unpackedCell.halfEdges.filter((unpackedHalfEdge) => !unpackedCell.layout[unpackedHalfEdge].inner).flatMap(unpackedHalfEdge => \n        packedCell.halfEdges.filter((packedHalfEdge) => !packedCell.layout[packedHalfEdge].inner).map(packedHalfEdge => ({unpackedHalfEdge, packedHalfEdge})));\n    const {unpackedHalfEdge, packedHalfEdge} = minBy(pairsOfHalfEdges, ({unpackedHalfEdge, packedHalfEdge}) => {\n      let angle = unpackedCell.layout[unpackedHalfEdge].segment.tangentInStart.angleTo(\n        packedCell.layout[packedHalfEdge].segment.tangentInEnd);\n      if (angle > Math.PI)\n        angle -= 2*Math.PI;\n      angle = Math.abs(angle);\n      return angle;\n    })!; \n      \n    return {\n      unpackedCell,\n      packedCell,\n      unpackedHalfEdge,\n      packedHalfEdge,\n    };\n  }\n\n  static pack(cells: CellLayout[], progress: Progress): CellLayout[] {\n    if (cells.length <= 1) return cells;\n\n    const packedCells = [cells.pop()] as CellLayout[];\n\n    progress.task(\"Packing Cells\", cells.length);\n\n    while (cells.length) {\n      progress.progress();\n\n      const {unpackedCell, packedCell, unpackedHalfEdge, packedHalfEdge } = CellLayout.packable(cells, packedCells)!;\n\n      const unpackedSegment = unpackedCell.layout[unpackedHalfEdge].segment;\n      const packedSegment = packedCell.layout[packedHalfEdge].segment.reverse();\n      console.log(packedSegment.tangentInStart.angleTo(unpackedSegment.tangentInStart));\n      console.log(`${unpackedHalfEdge} ${packedHalfEdge}`)\n\n      // Move the cell such that the half edges touch in one point (typically, they will completely overlap then.)\n      unpackedCell.translate(unpackedHalfEdge,\n        unpackedSegment.\n          translate(new Vector(unpackedSegment.parent, unpackedSegment.start, new Point(unpackedSegment.parent, 0, 0))).\n          translate(new Vector(packedSegment.parent, new Point(packedSegment.parent, 0, 0), packedSegment.start)));\n\n      // We determine a distance that two edges have to be separated from each\n      // other to make it clear that they are not glued.\n      // The idea is that the entire `packedCells` presumably fills a notebook\n      // cell, probably 800 x 600 pixels. A gap of 10 pixels (minus SVG\n      // borders) can easily be recognized as a gap.\n      const screen = packedCells.map((cell) => cell.polygon.value.box).reduce((box, cell) => box.merge(cell), new Flatten.Box());\n      const step = Math.max((screen.xmax - screen.xmin) / 800, (screen.ymax - screen.ymin) / 600) * 10;\n      const delta = unpackedSegment.tangentInStart.rotate90CCW().multiply(step);\n      \n      do {\n        unpackedCell.translate(delta);\n      } while(packedCells.some((packed) => unpackedCell.touches(packed).length))\n\n      packedCells.push(unpackedCell);\n    }\n\n    return packedCells;\n  }\n\n  protected readonly surface: FlatTriangulation;\n  protected readonly boundingRectArea: number;\n  public readonly layout: Record<HalfEdge, HalfEdgeLayout>;\n  // Whether this cell should be consider the primary copy of cells that are\n  // isomorphic under the automorphisms.\n  public primary: boolean = true;\n}\n","/* ******************************************************************************\n * Copyright (c) 2020-2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Point from '@/geometry/Point';\nimport FlatTriangulation from \"@/flatsurf/FlatTriangulation\";\nimport HalfEdge from '@/flatsurf/HalfEdge';\nimport CellLayout from './CellLayout';\nimport HalfEdgeLayout from './HalfEdgeLayout';\nimport Box from '@/geometry/Box';\nimport Polygon from \"@/geometry/Polygon\";\nimport CancellationToken from \"@/CancellationToken\";\nimport Progress from \"@/Progress\";\nimport LayoutOptions from './LayoutOptions';\n\nexport default class Layout {\n  private constructor(triangulation: FlatTriangulation, options: LayoutOptions) {\n    this.triangulation = triangulation;\n    this.options = options;\n    this.primary = [];\n  }\n\n  public static async layout(triangulation: FlatTriangulation, options: LayoutOptions, cancellation = new CancellationToken(), progress = new Progress()) {\n    const layout = new Layout(triangulation, options);\n    await layout.recompute(cancellation, progress);\n    return layout;\n  }\n\n  private async recompute(cancellation: CancellationToken, progress: Progress) {\n    // Layout Algorithm:\n    // (1) Start from elementary cells, i.e., triangular faces.\n    // (2) Greedily glue any two cells as long as no overlap is produced,\n    //     prefering metrics such as the gluing that minimizes the area of a\n    //     bounding rectangle.\n    // (3) Pack the resulting cells into a box by randomly aligning\n    //     corresponding half edges to create a single polygon (with self intersections)\n    //     and move the pieces away from each other orthogonally until no overlaps\n    //     happen anymore.\n\n    // (1) Elementary Cells\n    if (this.triangulation.halfEdges.length === 0) {\n      this.halfEdges = {};\n      return;\n    }\n\n    const origin = new Point(this.triangulation.vector(this.triangulation.halfEdges[0]).parent, 0, 0);\n    let cells = this.triangulation.faces.cycles.map((face) => new CellLayout(this.triangulation, face, origin));\n\n    // (2) Glue Cells\n    progress.task(\"Gluing Cells\", cells.length - 1);\n    const cache = {};\n    for (const _ of Array(cells.length - 1)) {\n      progress.progress();\n      cells = await CellLayout.merge(cells, this.options, cache, cancellation, progress);\n    }\n\n    // (3) Pack Cells\n    cells = CellLayout.pack(cells.filter((cell) => cell.primary), progress);\n\n    this.halfEdges = Object.assign({}, ...cells.map((cell) => cell.layout));\n    this.primary = cells.filter((cell) => cell.primary).map((cell) => cell.halfEdges).flat();\n\n    for (const he of this.triangulation.halfEdges) {\n      if (this.options.glue(he) === true && !this.layout(he).inner)\n        console.log(`Half edge ${he} should be visually glued in the layout but this was not possible.`);\n      if (this.options.glue(he) === false && this.layout(he).inner)\n        console.error(`Half edge ${he} should not be visually glued in the layout but it is.`);\n    }\n  }\n\n  public layout(halfEdge: HalfEdge): HalfEdgeLayout & { primary: boolean } {\n    return {\n      ...this.halfEdges[halfEdge],\n      primary: this.primary.includes(halfEdge),\n    };\n  }\n\n  public get hull(): Polygon {\n    return Polygon.convexHull(this.primary.map((halfEdge) => [this.halfEdges[halfEdge].segment.start, this.halfEdges[halfEdge].segment.end]).flat());\n  }\n\n  public get bbox(): Box {\n    return Box.bbox(this.primary.map((halfEdge) => this.halfEdges[halfEdge].segment));\n  }\n\n  public readonly triangulation: FlatTriangulation;\n  private readonly options: LayoutOptions;\n  private halfEdges!: Record<HalfEdge, HalfEdgeLayout>;\n  // Which half edges should be considered the primary copies of half edges\n  // identified by the automorphisms.\n  public primary!: HalfEdge[];\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport { Component, Inject, Prop, Vue, Watch } from \"vue-property-decorator\";\n\nimport wait from \"@/wait\";\n\nimport FlatTriangulation from \"@/flatsurf/FlatTriangulation\";\nimport Layout from \"@/layout/Layout\";\nimport CancellationToken, {OperationAborted} from \"@/CancellationToken\";\nimport Progress from \"@/Progress\";\nimport LayoutOptions from \"@/layout/LayoutOptions\";\nimport Automorphism from \"@/flatsurf/Automorphism\";\n\nasync function runSilently(callback: (cancellation: CancellationToken, progress: Progress) => Promise<void>) {\n  await callback(new CancellationToken(), new Progress());\n}\n\n@Component\nexport default class Layouter extends Vue {\n  @Prop({ required: true, type: Object }) triangulation!: FlatTriangulation;\n  @Prop({ required: false, type: Array, default: () => [] }) automorphisms!: Automorphism[];\n  @Prop({ required: false, type: Object, default: null }) layout!: Layout | null;\n\n  options: LayoutOptions = new LayoutOptions();\n  effectiveLayout: Layout | null = null;\n\n  @Inject({ from: 'run', default: () => runSilently })\n  run!: (callback: (cancellation: CancellationToken, progress: Progress) => Promise<void>) => Promise<void>;\n\n  render() {\n    if (this.effectiveLayout != null && this.$scopedSlots.default != null) {\n      return this.$scopedSlots.default({\n        layout: this.effectiveLayout,\n        relayout: this.relayout,\n      });\n    }\n  }\n\n  private pendingRelayout = new CancellationToken();\n\n  async relayout(layoutOptions?: LayoutOptions): Promise<Layout> {\n    if (layoutOptions === undefined) {\n      if (this.effectiveLayout != null)\n        return this.effectiveLayout;\n      layoutOptions = new LayoutOptions(() => null, this.automorphisms);\n    }\n\n    this.options = layoutOptions;\n\n    this.pendingRelayout.abort();\n    await this.run(async (cancellation, progress) => {\n      this.pendingRelayout = cancellation;\n      try {\n        this.effectiveLayout = await Layout.layout(this.triangulation, this.options, cancellation, progress);\n      } catch (e) {\n        if (e instanceof OperationAborted) return;\n        throw e;\n      }\n    });\n\n    this.$emit(\"layout\", this.effectiveLayout);\n    return this.effectiveLayout!;\n  }\n\n  @Watch(\"triangulation\", { immediate: true })\n  onSurfaceChanged() {\n    this.effectiveLayout = this.layout;\n    this.relayout();\n  }\n\n  public async query(when: \"now\" | \"changed\") {\n    if (when === \"changed\")\n      await wait(this, \"effectiveLayout\");\n    return this.effectiveLayout;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport ViewerComponent from \"@/components/Viewer.vue\";\nimport GlueInteraction from \"@/components/interactions/GlueInteraction.vue\";\nimport PathInteraction from \"@/components/interactions/PathInteraction.vue\";\nimport TriangulationInteraction from \"@/components/interactions/TriangulationInteraction\";\nimport LabelInteraction from \"@/components/interactions/LabelInteraction\";\nimport Layouter from \"@/components/Layouter\";\nimport Layout from \"@/layout/Layout\";\n\n@Component({\n  components: {\n    ViewerComponent,\n    GlueInteraction,\n    PathInteraction,\n    TriangulationInteraction,\n    LabelInteraction,\n    Layouter,\n  }\n})\nexport default class Viewer extends Vue {\n  @Prop({ required: true, type: String }) action!: string;\n  @Prop({ required: true, type: Array }) show!: string[];\n\n  get flowComponents() {\n    if (this.show.includes('flow-components'))\n      return this.$store.state.flowComponents;\n    return [];\n  }\n\n  layoutChanged(layout: Layout) {\n    this.$store.commit('layout', { layout });\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Viewer.vue?vue&type=template&id=3b8bdf4e&scoped=true&\"\nimport script from \"./Viewer.vue?vue&type=script&lang=ts&\"\nexport * from \"./Viewer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Viewer.vue?vue&type=style&index=0&id=3b8bdf4e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3b8bdf4e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-speed-dial',{attrs:{\"top\":\"\",\"left\":\"\",\"fixed\":\"\",\"direction\":\"bottom\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(){return [_c('v-btn',{attrs:{\"color\":_vm.showActions ? 'secondary' : 'primary',\"fab\":\"\",\"small\":\"\"}},[(_vm.showActions)?_c('v-icon',[_vm._v(\"mdi-close\")]):_c('v-icon',[_vm._v(_vm._s(_vm.actions[_vm.action]))])],1)]},proxy:true}]),model:{value:(_vm.showActions),callback:function ($$v) {_vm.showActions=$$v},expression:\"showActions\"}},_vm._l((Object.entries(_vm.actions)),function(ref){\nvar action = ref[0];\nvar icon = ref[1];\nreturn _c('div',{key:action},[_c('v-btn',{attrs:{\"color\":\"primary\",\"small\":\"\",\"fab\":\"\"},on:{\"click\":function($event){return _vm.goto(action)}}},[_c('v-icon',[_vm._v(_vm._s(icon))])],1)],1)}),0),_c('v-speed-dial',{attrs:{\"top\":\"\",\"right\":\"\",\"fixed\":\"\",\"direction\":\"bottom\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(){return [_c('v-btn',{attrs:{\"color\":_vm.showParts ? 'secondary' : 'primary',\"fab\":\"\",\"small\":\"\"}},[(_vm.showParts)?_c('v-icon',[_vm._v(\"mdi-close\")]):_c('v-icon',[_vm._v(\"mdi-eye\")])],1)]},proxy:true}]),model:{value:(_vm.showParts),callback:function ($$v) {_vm.showParts=$$v},expression:\"showParts\"}},_vm._l((Object.entries(_vm.parts)),function(ref){\nvar part = ref[0];\nvar icon = ref[1];\nreturn _c('div',{key:part},[_c('v-btn',{attrs:{\"color\":_vm.show.includes(part) ? 'primary' : 'secondary',\"small\":\"\",\"fab\":\"\"},on:{\"click\":function($event){return _vm.goto(undefined, part)}}},[_c('v-icon',[_vm._v(_vm._s(icon))])],1)],1)}),0)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\n@Component\nexport default class ViewerMenu extends Vue {\n  showActions = false;\n  showParts = false;\n\n  @Prop({ required: true, type: String }) action!: string;\n  @Prop({ required: true, type: Array }) show!: string[];\n\n  actions = {\n    'glue': 'mdi-link-variant',\n    'path': 'mdi-map-marker-path',\n    'view': 'mdi-hand-back-right-outline',\n  }\n\n  parts = {\n    'outer': 'mdi-border-all-variant',\n    'triangulation': 'mdi-triforce',\n    'flow-components': 'mdi-waves-arrow-up',\n    'numeric-labels': 'mdi-numeric',\n    'outer-labels': 'mdi-alphabetical',\n  }\n\n  goto(action?: string, part?: string) {\n    let show = [...this.show];\n    if (part != null) {\n      if (show.includes(part))\n        show = show.filter((p) => p != part);\n      else\n        show.push(part);\n    }\n      \n    this.$router.replace({\n      path: this.$route.path,\n      query: {\n        ...this.$route.query,\n        action: action || this.action,\n        show\n      }})\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ViewerMenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ViewerMenu.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ViewerMenu.vue?vue&type=template&id=7882159d&\"\nimport script from \"./ViewerMenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./ViewerMenu.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSpeedDial } from 'vuetify/lib/components/VSpeedDial';\ninstallComponents(component, {VBtn,VIcon,VSpeedDial})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',[_c('v-textarea',{staticClass:\"editor\",attrs:{\"label\":\"Surface Description (YAML)\",\"error-messages\":_vm.error,\"filled\":\"\",\"rows\":_vm.raw.split('\\n').length},model:{value:(_vm.raw),callback:function ($$v) {_vm.raw=$$v},expression:\"raw\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\n\n@Component\nexport default class Editor extends Vue {\n  get error() {\n    return this.$store.state.error;\n  }\n\n  get raw() {\n    return this.$store.state.raw;\n  }\n\n  set raw(raw: string) {\n    this.$store.dispatch(\"reset\", {raw});\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Editor.vue?vue&type=template&id=db891704&scoped=true&\"\nimport script from \"./Editor.vue?vue&type=script&lang=ts&\"\nexport * from \"./Editor.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Editor.vue?vue&type=style&index=0&id=db891704&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"db891704\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VCard,VTextarea})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-navigation-drawer',{attrs:{\"permanent\":\"\",\"app\":\"\"}},[_c('v-list',{attrs:{\"nav\":\"\",\"dense\":\"\"}},[_c('v-list-item',[_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\" PREDEFINED SURFACES \")])],1)],1),_c('v-list-item-group',{attrs:{\"color\":\"primary\"},model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}},_vm._l((Object.keys(_vm.predefined)),function(name){return _c('v-list-item',{key:name,attrs:{\"value\":name,\"disabled\":_vm.selected == name}},[_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(name)}})],1)],1)}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default \"vertices:\\n- - 1\\n  - -3\\n  - 2\\n  - -1\\n  - 3\\n  - -2\\nvectors:\\n  1:\\n    x: 0.0\\n    y: -1.7320508075688772\\n  2:\\n    x: 1.5\\n    y: 0.8660254037844386\\n  3:\\n    x: -1.5\\n    y: 0.8660254037844386\\ncomponents:\\n- cylinder: true\\n  perimeter:\\n  - source: 3\\n    target: -3\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -1.5\\n      y: 0.8660254037844386\\n    crossings: []\\n    touches:\\n    - halfEdge: 3\\n      index: 0\\n    - halfEdge: -3\\n      index: 1\\n  - source: 1\\n    target: -1\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.0\\n      y: -1.7320508075688772\\n    crossings: []\\n    touches:\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: -1\\n      index: 1\\n  - source: -3\\n    target: 3\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 1.5\\n      y: -0.8660254037844386\\n    crossings: []\\n    touches:\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 3\\n      index: 1\\n  - source: -1\\n    target: 1\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.0\\n      y: 1.7320508075688772\\n    crossings: []\\n    touches:\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 1\\n      index: 1\\n  inside:\\n  - 1\\n  - -1\\n  - 2\\n  - -2\\n  - 3\\n  - -3\\n\";","export default \"vertices:\\n- - 1\\n  - -3\\n  - -9\\n  - 6\\n  - -7\\n  - 4\\n- - -1\\n  - -5\\n  - 9\\n  - -8\\n  - 7\\n  - 2\\n- - -2\\n  - -6\\n  - 5\\n  - -4\\n  - 8\\n  - 3\\nvectors:\\n  1:\\n    x: 1.0\\n    y: 0.0\\n  2:\\n    x: -0.5\\n    y: 0.8660254037844386\\n  3:\\n    x: -0.5\\n    y: -0.8660254037844386\\n  4:\\n    x: 0.5\\n    y: -0.8660254037844386\\n  5:\\n    x: 0.5\\n    y: 0.8660254037844386\\n  6:\\n    x: -1.0\\n    y: 0.0\\n  7:\\n    x: 0.5\\n    y: 0.8660254037844386\\n  8:\\n    x: -1.0\\n    y: 0.0\\n  9:\\n    x: 0.5\\n    y: -0.8660254037844386\\ncomponents:\\n- cylinder: true\\n  perimeter:\\n  - source: -9\\n    target: 4\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -1.5\\n      y: 0.8660254037844386\\n    crossings:\\n    - halfEdge: -5\\n      at: 0.5\\n    touches:\\n    - halfEdge: -9\\n      index: 0\\n    - halfEdge: -5\\n      index: 1\\n    - halfEdge: 5\\n      index: 0\\n    - halfEdge: 4\\n      index: 1\\n  - source: -7\\n    target: -3\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.0\\n      y: -1.7320508075688772\\n    crossings:\\n    - halfEdge: -8\\n      at: 0.5\\n    touches:\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: -8\\n      index: 1\\n    - halfEdge: 8\\n      index: 0\\n    - halfEdge: -3\\n      index: 1\\n  - source: 4\\n    target: -9\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 1.5\\n      y: -0.8660254037844386\\n    crossings:\\n    - halfEdge: 5\\n      at: 0.5\\n    touches:\\n    - halfEdge: 4\\n      index: 0\\n    - halfEdge: 5\\n      index: 1\\n    - halfEdge: -5\\n      index: 0\\n    - halfEdge: -9\\n      index: 1\\n  - source: -3\\n    target: -7\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.0\\n      y: 1.7320508075688772\\n    crossings:\\n    - halfEdge: 8\\n      at: 0.5\\n    touches:\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 8\\n      index: 1\\n    - halfEdge: -8\\n      index: 0\\n    - halfEdge: -7\\n      index: 1\\n  inside:\\n  - 1\\n  - -1\\n  - 2\\n  - -2\\n  - 3\\n  - -3\\n  - 4\\n  - -4\\n  - 6\\n  - -6\\n  - 7\\n  - -7\\n  - 9\\n  - -9\\n\";","export default \"vertices:\\n- - 1\\n  - -3\\n  - -9\\n  - -11\\n  - 14\\n  - -15\\n  - 12\\n  - 6\\n  - -7\\n  - 4\\n- - -1\\n  - -5\\n  - 9\\n  - -8\\n  - -14\\n  - 13\\n  - -12\\n  - 10\\n  - 7\\n  - 2\\n- - -2\\n  - -6\\n  - -13\\n  - 11\\n  - 5\\n  - -4\\n  - -10\\n  - 15\\n  - 8\\n  - 3\\nvectors:\\n  1:\\n    x: 1.0\\n    y: 0.0\\n  2:\\n    x: -0.5\\n    y: 0.36327126400268045\\n  3:\\n    x: -0.5\\n    y: -0.36327126400268045\\n  4:\\n    x: 0.5\\n    y: -0.36327126400268045\\n  5:\\n    x: 0.5\\n    y: 0.36327126400268045\\n  6:\\n    x: -0.19098300562505258\\n    y: -0.5877852522924731\\n  7:\\n    x: -0.30901699437494745\\n    y: 0.9510565162951535\\n  8:\\n    x: -0.19098300562505258\\n    y: 0.5877852522924731\\n  9:\\n    x: -0.30901699437494745\\n    y: -0.9510565162951535\\n  10:\\n    x: 0.19098300562505258\\n    y: 0.5877852522924731\\n  11:\\n    x: 0.19098300562505258\\n    y: -0.5877852522924731\\n  12:\\n    x: -0.8090169943749475\\n    y: -0.5877852522924731\\n  13:\\n    x: 0.6180339887498949\\n    y: 0.0\\n  14:\\n    x: -0.8090169943749475\\n    y: 0.5877852522924731\\n  15:\\n    x: 0.6180339887498949\\n    y: 0.0\\ncomponents:\\n- cylinder: true\\n  perimeter:\\n  - source: 5\\n    target: 3\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.0\\n      y: 0.7265425280053609\\n    crossings:\\n    - halfEdge: -1\\n      at: 0.5\\n    touches:\\n    - halfEdge: 5\\n      index: 0\\n    - halfEdge: -1\\n      index: 1\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: 3\\n      index: 1\\n  - source: 8\\n    target: 11\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: -0.6909830056250525\\n      y: 0.2245139882897927\\n    crossings:\\n    - halfEdge: 9\\n      at: 0.5\\n    touches:\\n    - halfEdge: 8\\n      index: 0\\n    - halfEdge: 9\\n      index: 1\\n    - halfEdge: -9\\n      index: 0\\n    - halfEdge: 11\\n      index: 1\\n  - source: -6\\n    target: -2\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -1.118033988749895\\n      y: 0.36327126400268045\\n    crossings:\\n    - halfEdge: 12\\n      at: 0.7639320225002103\\n    - halfEdge: -10\\n      at: 0.6909830056250525\\n    - halfEdge: -7\\n      at: 0.7639320225002103\\n    touches:\\n    - halfEdge: -6\\n      index: 0\\n    - halfEdge: 12\\n      index: 1\\n    - halfEdge: -12\\n      index: 0\\n    - halfEdge: -10\\n      index: 1\\n    - halfEdge: 10\\n      index: 0\\n    - halfEdge: -7\\n      index: 1\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -2\\n      index: 0\\n  - source: 3\\n    target: 5\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.0\\n      y: -0.7265425280053609\\n    crossings:\\n    - halfEdge: 1\\n      at: 0.5\\n    touches:\\n    - halfEdge: 3\\n      index: 0\\n    - halfEdge: 1\\n      index: 1\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 5\\n      index: 1\\n  - source: 11\\n    target: 8\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.6909830056250525\\n      y: -0.2245139882897927\\n    crossings:\\n    - halfEdge: -9\\n      at: 0.5\\n    touches:\\n    - halfEdge: 11\\n      index: 0\\n    - halfEdge: -9\\n      index: 1\\n    - halfEdge: 9\\n      index: 0\\n    - halfEdge: 8\\n      index: 1\\n  - source: -10\\n    target: -4\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 1.118033988749895\\n      y: -0.36327126400268045\\n    crossings:\\n    - halfEdge: -12\\n      at: 0.7639320225002103\\n    - halfEdge: -6\\n      at: 0.6909830056250525\\n    - halfEdge: 7\\n      at: 0.7639320225002103\\n    touches:\\n    - halfEdge: -10\\n      index: 0\\n    - halfEdge: -12\\n      index: 1\\n    - halfEdge: 12\\n      index: 0\\n    - halfEdge: -6\\n      index: 1\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: 7\\n      index: 1\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: -4\\n      index: 0\\n  inside:\\n  - 2\\n  - -2\\n  - 3\\n  - -3\\n  - 4\\n  - -4\\n  - 5\\n  - -5\\n  - 8\\n  - -8\\n  - 11\\n  - -11\\n  - 13\\n  - -13\\n  - 14\\n  - -14\\n  - 15\\n  - -15\\n- cylinder: true\\n  perimeter:\\n  - source: -2\\n    target: -4\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 1.8090169943749475\\n      y: -0.13875727571288776\\n    crossings:\\n    - halfEdge: 7\\n      at: 0.3503729060226986\\n    - halfEdge: 10\\n      at: 0.5393446629166316\\n    - halfEdge: -12\\n      at: 0.5\\n    - halfEdge: -6\\n      at: 0.46065533708336837\\n    - halfEdge: 7\\n      at: 0.6496270939773015\\n    touches:\\n    - halfEdge: -2\\n      index: 0\\n    - halfEdge: 7\\n      index: 2\\n    - halfEdge: -7\\n      index: 3\\n    - halfEdge: 10\\n      index: 2\\n    - halfEdge: -10\\n      index: 1\\n    - halfEdge: -12\\n      index: 2\\n    - halfEdge: 12\\n      index: 1\\n    - halfEdge: -6\\n      index: 2\\n    - halfEdge: 6\\n      index: 1\\n    - halfEdge: 7\\n      index: 4\\n    - halfEdge: -7\\n      index: 1\\n    - halfEdge: -4\\n      index: 1\\n  - source: -4\\n    target: -10\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -1.118033988749895\\n      y: 0.36327126400268045\\n    crossings:\\n    - halfEdge: -7\\n      at: 0.2360679774997897\\n    - halfEdge: 6\\n      at: 0.30901699437494745\\n    - halfEdge: 12\\n      at: 0.2360679774997897\\n    touches:\\n    - halfEdge: -4\\n      index: 2\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 7\\n      index: 5\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: -6\\n      index: 3\\n    - halfEdge: 12\\n      index: 0\\n    - halfEdge: -12\\n      index: 3\\n    - halfEdge: -10\\n      index: 0\\n  - source: -4\\n    target: -2\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -1.8090169943749475\\n      y: 0.13875727571288776\\n    crossings:\\n    - halfEdge: -7\\n      at: 0.3503729060226986\\n    - halfEdge: 6\\n      at: 0.5393446629166316\\n    - halfEdge: 12\\n      at: 0.5\\n    - halfEdge: -10\\n      at: 0.46065533708336837\\n    - halfEdge: -7\\n      at: 0.6496270939773015\\n    touches:\\n    - halfEdge: -4\\n      index: 0\\n    - halfEdge: -7\\n      index: 2\\n    - halfEdge: 7\\n      index: 3\\n    - halfEdge: 6\\n      index: 2\\n    - halfEdge: -6\\n      index: 1\\n    - halfEdge: 12\\n      index: 2\\n    - halfEdge: -12\\n      index: 1\\n    - halfEdge: -10\\n      index: 2\\n    - halfEdge: 10\\n      index: 1\\n    - halfEdge: -7\\n      index: 4\\n    - halfEdge: 7\\n      index: 1\\n    - halfEdge: -2\\n      index: 1\\n  - source: -2\\n    target: -6\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 1.118033988749895\\n      y: -0.36327126400268045\\n    crossings:\\n    - halfEdge: 7\\n      at: 0.2360679774997897\\n    - halfEdge: 10\\n      at: 0.30901699437494745\\n    - halfEdge: -12\\n      at: 0.2360679774997897\\n    touches:\\n    - halfEdge: -2\\n      index: 2\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -7\\n      index: 5\\n    - halfEdge: 10\\n      index: 0\\n    - halfEdge: -10\\n      index: 3\\n    - halfEdge: -12\\n      index: 0\\n    - halfEdge: 12\\n      index: 3\\n    - halfEdge: -6\\n      index: 0\\n  inside: []\\n\";","export default \"vertices:\\n- - 1\\n  - -3\\n  - -4\\n  - -9\\n  - 8\\n  - -7\\n  - 9\\n  - 5\\n  - 2\\n  - -1\\n  - 3\\n  - -2\\n  - -6\\n  - -8\\n  - 7\\n  - 6\\n  - -5\\n  - 4\\nvectors:\\n  1:\\n    x: -0.6909830056250525\\n    y: 0.2245139882897927\\n  2:\\n    x: 0.6909830056250525\\n    y: -0.9510565162951535\\n  3:\\n    x: 0.0\\n    y: 0.7265425280053609\\n  4:\\n    x: -0.6909830056250525\\n    y: 0.9510565162951535\\n  5:\\n    x: -0.4270509831248423\\n    y: -0.5877852522924731\\n  6:\\n    x: 1.118033988749895\\n    y: -0.36327126400268045\\n  7:\\n    x: 0.4270509831248423\\n    y: -0.5877852522924731\\n  8:\\n    x: 0.6909830056250525\\n    y: 0.2245139882897927\\n  9:\\n    x: -1.118033988749895\\n    y: 0.36327126400268045\\ncomponents:\\n- cylinder: true\\n  perimeter:\\n  - source: 8\\n    target: -8\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.6909830056250525\\n      y: 0.2245139882897927\\n    crossings: []\\n    touches:\\n    - halfEdge: 8\\n      index: 0\\n    - halfEdge: -8\\n      index: 1\\n  - source: -6\\n    target: 6\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -1.118033988749895\\n      y: 0.36327126400268045\\n    crossings: []\\n    touches:\\n    - halfEdge: -6\\n      index: 0\\n    - halfEdge: 6\\n      index: 0\\n  - source: -8\\n    target: 8\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.6909830056250525\\n      y: -0.2245139882897927\\n    crossings: []\\n    touches:\\n    - halfEdge: -8\\n      index: 0\\n    - halfEdge: 8\\n      index: 1\\n  - source: -9\\n    target: 9\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 1.118033988749895\\n      y: -0.36327126400268045\\n    crossings: []\\n    touches:\\n    - halfEdge: -9\\n      index: 0\\n    - halfEdge: 9\\n      index: 0\\n  inside:\\n  - -6\\n  - 7\\n  - -7\\n  - 8\\n  - -8\\n  - -9\\n- cylinder: true\\n  perimeter:\\n  - source: -5\\n    target: 5\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.4270509831248423\\n      y: 0.5877852522924731\\n    crossings: []\\n    touches:\\n    - halfEdge: -5\\n      index: 0\\n    - halfEdge: 5\\n      index: 1\\n  - source: 9\\n    target: -9\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -1.118033988749895\\n      y: 0.36327126400268045\\n    crossings: []\\n    touches:\\n    - halfEdge: 9\\n      index: 0\\n    - halfEdge: -9\\n      index: 0\\n  - source: 1\\n    target: -1\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: -0.6909830056250525\\n      y: 0.2245139882897927\\n    crossings: []\\n    touches:\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: -1\\n      index: 1\\n  - source: 5\\n    target: -5\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.4270509831248423\\n      y: -0.5877852522924731\\n    crossings: []\\n    touches:\\n    - halfEdge: 5\\n      index: 0\\n    - halfEdge: -5\\n      index: 1\\n  - source: 6\\n    target: -6\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 1.118033988749895\\n      y: -0.36327126400268045\\n    crossings: []\\n    touches:\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: -6\\n      index: 0\\n  - source: -1\\n    target: 1\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.6909830056250525\\n      y: -0.2245139882897927\\n    crossings: []\\n    touches:\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 1\\n      index: 1\\n  inside:\\n  - 1\\n  - -1\\n  - 2\\n  - -2\\n  - 3\\n  - -3\\n  - 4\\n  - -4\\n  - 5\\n  - -5\\n  - 6\\n  - 9\\n\";","export default \"vertices:\\n- - 1\\n  - -3\\n  - -9\\n  - -15\\n  - 12\\n  - 6\\n  - -7\\n  - -13\\n  - 10\\n  - 4\\n- - -1\\n  - -5\\n  - -12\\n  - 11\\n  - -10\\n  - 14\\n  - 9\\n  - -8\\n  - 7\\n  - 2\\n- - -2\\n  - -6\\n  - 5\\n  - -4\\n  - -11\\n  - 15\\n  - -14\\n  - 13\\n  - 8\\n  - 3\\nvectors:\\n  1:\\n    x: 1.0\\n    y: 0.0\\n  2:\\n    x: -0.19098300562505258\\n    y: 0.5877852522924731\\n  3:\\n    x: -0.8090169943749475\\n    y: -0.5877852522924731\\n  4:\\n    x: 0.8090169943749475\\n    y: -0.5877852522924731\\n  5:\\n    x: 0.19098300562505258\\n    y: 0.5877852522924731\\n  6:\\n    x: -1.0\\n    y: 0.0\\n  7:\\n    x: 0.8090169943749475\\n    y: 0.5877852522924731\\n  8:\\n    x: -0.5\\n    y: 0.36327126400268045\\n  9:\\n    x: -0.30901699437494745\\n    y: -0.9510565162951535\\n  10:\\n    x: 0.30901699437494745\\n    y: -0.9510565162951535\\n  11:\\n    x: 0.5\\n    y: 0.36327126400268045\\n  12:\\n    x: -0.8090169943749475\\n    y: 0.5877852522924731\\n  13:\\n    x: 0.30901699437494745\\n    y: 0.9510565162951535\\n  14:\\n    x: -0.6180339887498949\\n    y: 0.0\\n  15:\\n    x: 0.30901699437494745\\n    y: -0.9510565162951535\\ncomponents:\\n- cylinder: true\\n  perimeter:\\n  - source: -8\\n    target: 8\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.5\\n      y: -0.36327126400268045\\n    crossings: []\\n    touches:\\n    - halfEdge: -8\\n      index: 0\\n    - halfEdge: 8\\n      index: 1\\n  - source: 13\\n    target: -5\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -0.5\\n      y: 1.5388417685876268\\n    crossings:\\n    - halfEdge: -7\\n      at: 0.6180339887498949\\n    - halfEdge: 6\\n      at: 0.6180339887498949\\n    touches:\\n    - halfEdge: 13\\n      index: 0\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: -6\\n      index: 0\\n    - halfEdge: -5\\n      index: 0\\n  - source: 2\\n    target: -2\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: -0.19098300562505258\\n      y: 0.5877852522924731\\n    crossings: []\\n    touches:\\n    - halfEdge: 2\\n      index: 0\\n    - halfEdge: -2\\n      index: 1\\n  - source: 8\\n    target: -8\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.5\\n      y: 0.36327126400268045\\n    crossings: []\\n    touches:\\n    - halfEdge: 8\\n      index: 0\\n    - halfEdge: -8\\n      index: 1\\n  - source: 9\\n    target: 5\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 0.5\\n      y: -1.5388417685876268\\n    crossings:\\n    - halfEdge: -3\\n      at: 0.6180339887498949\\n    - halfEdge: 1\\n      at: 0.6180339887498949\\n    touches:\\n    - halfEdge: 9\\n      index: 0\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 3\\n      index: 0\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 5\\n      index: 0\\n  - source: -2\\n    target: 2\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.19098300562505258\\n      y: -0.5877852522924731\\n    crossings: []\\n    touches:\\n    - halfEdge: -2\\n      index: 0\\n    - halfEdge: 2\\n      index: 1\\n  inside:\\n  - 2\\n  - -2\\n  - 5\\n  - -5\\n  - 8\\n  - -8\\n- cylinder: true\\n  perimeter:\\n  - source: -14\\n    target: 14\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.6180339887498949\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: -14\\n      index: 0\\n    - halfEdge: 14\\n      index: 1\\n  - source: -10\\n    target: 10\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: -0.30901699437494745\\n      y: 0.9510565162951535\\n    crossings: []\\n    touches:\\n    - halfEdge: -10\\n      index: 0\\n    - halfEdge: 10\\n      index: 1\\n  - source: -15\\n    target: 15\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: -0.30901699437494745\\n      y: 0.9510565162951535\\n    crossings: []\\n    touches:\\n    - halfEdge: -15\\n      index: 0\\n    - halfEdge: 15\\n      index: 1\\n  - source: 5\\n    target: 9\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -0.5\\n      y: 1.5388417685876268\\n    crossings:\\n    - halfEdge: -1\\n      at: 0.38196601125010515\\n    - halfEdge: 3\\n      at: 0.38196601125010515\\n    touches:\\n    - halfEdge: 5\\n      index: 0\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: 3\\n      index: 0\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 9\\n      index: 0\\n  - source: 14\\n    target: -14\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.6180339887498949\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: 14\\n      index: 0\\n    - halfEdge: -14\\n      index: 1\\n  - source: 15\\n    target: -15\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.30901699437494745\\n      y: -0.9510565162951535\\n    crossings: []\\n    touches:\\n    - halfEdge: 15\\n      index: 0\\n    - halfEdge: -15\\n      index: 1\\n  - source: 10\\n    target: -10\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.30901699437494745\\n      y: -0.9510565162951535\\n    crossings: []\\n    touches:\\n    - halfEdge: 10\\n      index: 0\\n    - halfEdge: -10\\n      index: 1\\n  - source: -5\\n    target: 13\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 0.5\\n      y: -1.5388417685876268\\n    crossings:\\n    - halfEdge: -6\\n      at: 0.38196601125010515\\n    - halfEdge: 7\\n      at: 0.38196601125010515\\n    touches:\\n    - halfEdge: -5\\n      index: 0\\n    - halfEdge: -6\\n      index: 0\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 13\\n      index: 0\\n  inside:\\n  - 4\\n  - -4\\n  - 9\\n  - -9\\n  - 10\\n  - -10\\n  - 11\\n  - -11\\n  - 12\\n  - -12\\n  - 13\\n  - -13\\n  - 14\\n  - -14\\n  - 15\\n  - -15\\n\";","export default \"vertices:\\n- - 1\\n  - -3\\n  - -5\\n  - -11\\n  - 9\\n  - 8\\n  - -7\\n  - 6\\n- - -1\\n  - 4\\n  - 3\\n  - -2\\n  - -8\\n  - -10\\n  - 5\\n  - -4\\n  - -6\\n  - 12\\n  - 11\\n  - 10\\n  - -9\\n  - -12\\n  - 7\\n  - 2\\nvectors:\\n  1:\\n    x: -0.19098300562505258\\n    y: 0.5877852522924731\\n  2:\\n    x: 0.0\\n    y: -1.1755705045849463\\n  3:\\n    x: 0.19098300562505258\\n    y: 0.5877852522924731\\n  4:\\n    x: 1.8090169943749475\\n    y: -0.5877852522924731\\n  5:\\n    x: -1.618033988749895\\n    y: 1.1755705045849463\\n  6:\\n    x: 1.618033988749895\\n    y: 0.0\\n  7:\\n    x: -0.5\\n    y: 0.36327126400268045\\n  8:\\n    x: 0.5\\n    y: -1.5388417685876268\\n  9:\\n    x: -0.6180339887498949\\n    y: 0.0\\n  10:\\n    x: 1.118033988749895\\n    y: -1.5388417685876268\\n  11:\\n    x: -0.5\\n    y: -0.36327126400268045\\n  12:\\n    x: -1.118033988749895\\n    y: -0.36327126400268045\\ncomponents:\\n- cylinder: true\\n  perimeter:\\n  - source: -7\\n    target: 7\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.5\\n      y: -0.36327126400268045\\n    crossings: []\\n    touches:\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 7\\n      index: 1\\n  - source: -12\\n    target: -3\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -0.5\\n      y: 1.5388417685876268\\n    crossings:\\n    - halfEdge: -6\\n      at: 0.7639320225002103\\n    - halfEdge: -4\\n      at: 0.7639320225002103\\n    touches:\\n    - halfEdge: -12\\n      index: 0\\n    - halfEdge: -6\\n      index: 0\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: -4\\n      index: 0\\n    - halfEdge: 4\\n      index: 0\\n    - halfEdge: -3\\n      index: 0\\n  - source: 1\\n    target: -1\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: -0.19098300562505258\\n      y: 0.5877852522924731\\n    crossings: []\\n    touches:\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: -1\\n      index: 1\\n  - source: 7\\n    target: -7\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.5\\n      y: 0.36327126400268045\\n    crossings: []\\n    touches:\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -7\\n      index: 1\\n  - source: 8\\n    target: -8\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 0.5\\n      y: -1.5388417685876268\\n    crossings: []\\n    touches:\\n    - halfEdge: 8\\n      index: 0\\n    - halfEdge: -8\\n      index: 0\\n  - source: -1\\n    target: 1\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.19098300562505258\\n      y: -0.5877852522924731\\n    crossings: []\\n    touches:\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 1\\n      index: 1\\n  inside:\\n  - 1\\n  - -1\\n  - 2\\n  - -2\\n  - 3\\n  - -3\\n  - 7\\n  - -7\\n  - 8\\n- cylinder: true\\n  perimeter:\\n  - source: -9\\n    target: 9\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.6180339887498949\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: -9\\n      index: 0\\n    - halfEdge: 9\\n      index: 1\\n  - source: -11\\n    target: 11\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: -0.6180339887498949\\n      y: 1.902113032590307\\n    crossings:\\n    - halfEdge: 12\\n      at: 0.5\\n    - halfEdge: -6\\n      at: 0.38196601125010515\\n    - halfEdge: -4\\n      at: 0.38196601125010515\\n    - halfEdge: 5\\n      at: 0.5\\n    touches:\\n    - halfEdge: -11\\n      index: 0\\n    - halfEdge: 12\\n      index: 1\\n    - halfEdge: -12\\n      index: 1\\n    - halfEdge: -6\\n      index: 1\\n    - halfEdge: 6\\n      index: 1\\n    - halfEdge: -4\\n      index: 1\\n    - halfEdge: 4\\n      index: 1\\n    - halfEdge: 5\\n      index: 1\\n    - halfEdge: -5\\n      index: 0\\n    - halfEdge: 11\\n      index: 1\\n  - source: -8\\n    target: 8\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -0.5\\n      y: 1.5388417685876268\\n    crossings: []\\n    touches:\\n    - halfEdge: -8\\n      index: 0\\n    - halfEdge: 8\\n      index: 0\\n  - source: 9\\n    target: -9\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.6180339887498949\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: 9\\n      index: 0\\n    - halfEdge: -9\\n      index: 1\\n  - source: 11\\n    target: -11\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 0.6180339887498949\\n      y: -1.902113032590307\\n    crossings:\\n    - halfEdge: -5\\n      at: 0.5\\n    - halfEdge: 4\\n      at: 0.6180339887498949\\n    - halfEdge: 6\\n      at: 0.6180339887498949\\n    - halfEdge: -12\\n      at: 0.5\\n    touches:\\n    - halfEdge: 11\\n      index: 0\\n    - halfEdge: -5\\n      index: 1\\n    - halfEdge: 5\\n      index: 0\\n    - halfEdge: 4\\n      index: 2\\n    - halfEdge: -4\\n      index: 0\\n    - halfEdge: 6\\n      index: 2\\n    - halfEdge: -6\\n      index: 0\\n    - halfEdge: -12\\n      index: 2\\n    - halfEdge: 12\\n      index: 0\\n    - halfEdge: -11\\n      index: 1\\n  - source: -3\\n    target: -12\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 0.5\\n      y: -1.5388417685876268\\n    crossings:\\n    - halfEdge: 4\\n      at: 0.2360679774997897\\n    - halfEdge: 6\\n      at: 0.2360679774997897\\n    touches:\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 4\\n      index: 0\\n    - halfEdge: -4\\n      index: 2\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: -6\\n      index: 2\\n    - halfEdge: -12\\n      index: 0\\n  inside:\\n  - -8\\n  - 9\\n  - -9\\n  - 10\\n  - -10\\n  - 11\\n  - -11\\n\";","export default \"vertices:\\n- - 1\\n  - -3\\n  - -9\\n  - -21\\n  - 12\\n  - -13\\n  - 18\\n  - -19\\n  - -24\\n  - 22\\n  - 14\\n  - 6\\n  - -7\\n  - -17\\n  - 10\\n  - 4\\n- - -1\\n  - -5\\n  - -12\\n  - -23\\n  - 24\\n  - 16\\n  - 7\\n  - 2\\n- - -2\\n  - -6\\n  - -15\\n  - 13\\n  - 5\\n  - -4\\n  - -11\\n  - -22\\n  - 23\\n  - 21\\n  - -20\\n  - 17\\n  - -16\\n  - 19\\n  - 8\\n  - 3\\n- - -8\\n  - -18\\n  - 15\\n  - -14\\n  - 11\\n  - -10\\n  - 20\\n  - 9\\nvectors:\\n  1:\\n    x: 1.0\\n    y: 0.0\\n  2:\\n    x: -0.2928932188134525\\n    y: 0.2928932188134525\\n  3:\\n    x: -0.7071067811865476\\n    y: -0.2928932188134525\\n  4:\\n    x: 0.7071067811865476\\n    y: -0.2928932188134525\\n  5:\\n    x: 0.2928932188134525\\n    y: 0.2928932188134525\\n  6:\\n    x: -0.2928932188134525\\n    y: -0.7071067811865476\\n  7:\\n    x: 0.0\\n    y: 1.0\\n  8:\\n    x: 0.0\\n    y: 0.41421356237309503\\n  9:\\n    x: -0.7071067811865476\\n    y: -0.7071067811865476\\n  10:\\n    x: 0.7071067811865476\\n    y: -0.7071067811865476\\n  11:\\n    x: 0.0\\n    y: 0.41421356237309503\\n  12:\\n    x: 0.0\\n    y: 1.0\\n  13:\\n    x: 0.2928932188134525\\n    y: -0.7071067811865476\\n  14:\\n    x: -0.7071067811865476\\n    y: -0.7071067811865476\\n  15:\\n    x: 0.41421356237309503\\n    y: 0.0\\n  16:\\n    x: 0.2928932188134525\\n    y: 0.2928932188134525\\n  17:\\n    x: -0.2928932188134525\\n    y: 0.7071067811865476\\n  18:\\n    x: -0.7071067811865476\\n    y: 0.7071067811865476\\n  19:\\n    x: 0.7071067811865476\\n    y: -0.2928932188134525\\n  20:\\n    x: -0.41421356237309503\\n    y: 0.0\\n  21:\\n    x: -0.2928932188134525\\n    y: -0.7071067811865476\\n  22:\\n    x: -0.7071067811865476\\n    y: -0.2928932188134525\\n  23:\\n    x: -0.2928932188134525\\n    y: 0.2928932188134525\\n  24:\\n    x: 1.0\\n    y: 0.0\\ncomponents:\\n- cylinder: true\\n  perimeter:\\n  - source: 5\\n    target: 3\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.0\\n      y: 0.585786437626905\\n    crossings:\\n    - halfEdge: -1\\n      at: 0.2928932188134525\\n    touches:\\n    - halfEdge: 5\\n      index: 1\\n    - halfEdge: -1\\n      index: 1\\n    - halfEdge: 1\\n      index: 1\\n    - halfEdge: 3\\n      index: 1\\n  - source: 8\\n    target: 21\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -0.41421356237309503\\n      y: 0.41421356237309503\\n    crossings:\\n    - halfEdge: 9\\n      at: 0.2928932188134525\\n    touches:\\n    - halfEdge: 8\\n      index: 0\\n    - halfEdge: 9\\n      index: 0\\n    - halfEdge: -9\\n      index: 1\\n    - halfEdge: 21\\n      index: 0\\n  - source: 23\\n    target: -23\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -0.2928932188134525\\n      y: 0.2928932188134525\\n    crossings: []\\n    touches:\\n    - halfEdge: 23\\n      index: 0\\n    - halfEdge: -23\\n      index: 0\\n  - source: 2\\n    target: -2\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -0.2928932188134525\\n      y: 0.2928932188134525\\n    crossings: []\\n    touches:\\n    - halfEdge: 2\\n      index: 0\\n    - halfEdge: -2\\n      index: 0\\n  - source: 3\\n    target: 5\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.0\\n      y: -0.585786437626905\\n    crossings:\\n    - halfEdge: 1\\n      at: 0.7071067811865476\\n    touches:\\n    - halfEdge: 3\\n      index: 0\\n    - halfEdge: 1\\n      index: 2\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 5\\n      index: 2\\n  - source: 13\\n    target: 5\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 1.0\\n      y: -1.0\\n    crossings:\\n    - halfEdge: 12\\n      at: 0.41421356237309503\\n    - halfEdge: -21\\n      at: 0.41421356237309503\\n    - halfEdge: -9\\n      at: 0.2928932188134525\\n    - halfEdge: -3\\n      at: 0.41421356237309503\\n    - halfEdge: 1\\n      at: 0.41421356237309503\\n    touches:\\n    - halfEdge: 13\\n      index: 0\\n    - halfEdge: 12\\n      index: 0\\n    - halfEdge: -12\\n      index: 0\\n    - halfEdge: -21\\n      index: 0\\n    - halfEdge: 21\\n      index: 1\\n    - halfEdge: -9\\n      index: 0\\n    - halfEdge: 9\\n      index: 1\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 3\\n      index: 2\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: -1\\n      index: 2\\n    - halfEdge: 5\\n      index: 0\\n  inside:\\n  - 2\\n  - 5\\n  - -5\\n  - 23\\n- cylinder: true\\n  perimeter:\\n  - source: -2\\n    target: 17\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.585786437626905\\n      y: 0.0\\n    crossings:\\n    - halfEdge: 7\\n      at: 0.2928932188134525\\n    touches:\\n    - halfEdge: -2\\n      index: 0\\n    - halfEdge: 7\\n      index: 1\\n    - halfEdge: -7\\n      index: 1\\n    - halfEdge: 17\\n      index: 1\\n  - source: 17\\n    target: -16\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -1.0\\n      y: 1.0\\n    crossings:\\n    - halfEdge: -7\\n      at: 0.41421356237309503\\n    - halfEdge: 6\\n      at: 0.41421356237309503\\n    - halfEdge: 14\\n      at: 0.2928932188134525\\n    - halfEdge: 22\\n      at: 0.41421356237309503\\n    - halfEdge: -24\\n      at: 0.41421356237309503\\n    touches:\\n    - halfEdge: 17\\n      index: 2\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 7\\n      index: 2\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: -6\\n      index: 1\\n    - halfEdge: 14\\n      index: 0\\n    - halfEdge: -14\\n      index: 1\\n    - halfEdge: 22\\n      index: 0\\n    - halfEdge: -22\\n      index: 0\\n    - halfEdge: -24\\n      index: 0\\n    - halfEdge: 24\\n      index: 0\\n    - halfEdge: -16\\n      index: 0\\n  - source: 17\\n    target: -2\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.585786437626905\\n      y: 0.0\\n    crossings:\\n    - halfEdge: -7\\n      at: 0.7071067811865476\\n    touches:\\n    - halfEdge: 17\\n      index: 0\\n    - halfEdge: -7\\n      index: 2\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -2\\n      index: 1\\n  - source: -2\\n    target: 2\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 0.2928932188134525\\n      y: -0.2928932188134525\\n    crossings: []\\n    touches:\\n    - halfEdge: -2\\n      index: 2\\n    - halfEdge: 2\\n      index: 0\\n  - source: -23\\n    target: 23\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 0.2928932188134525\\n      y: -0.2928932188134525\\n    crossings: []\\n    touches:\\n    - halfEdge: -23\\n      index: 0\\n    - halfEdge: 23\\n      index: 0\\n  - source: -11\\n    target: -6\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 0.41421356237309503\\n      y: -0.41421356237309503\\n    crossings:\\n    - halfEdge: -14\\n      at: 0.2928932188134525\\n    touches:\\n    - halfEdge: -11\\n      index: 0\\n    - halfEdge: -14\\n      index: 0\\n    - halfEdge: 14\\n      index: 1\\n    - halfEdge: -6\\n      index: 0\\n  inside:\\n  - -2\\n  - 16\\n  - -16\\n  - -23\\n- cylinder: true\\n  perimeter:\\n  - source: -20\\n    target: 20\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.41421356237309503\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: -20\\n      index: 0\\n    - halfEdge: 20\\n      index: 1\\n  - source: 15\\n    target: -15\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.41421356237309503\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: 15\\n      index: 0\\n    - halfEdge: -15\\n      index: 1\\n  - source: -6\\n    target: -11\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -0.41421356237309503\\n      y: 0.41421356237309503\\n    crossings:\\n    - halfEdge: 14\\n      at: 0.7071067811865476\\n    touches:\\n    - halfEdge: -6\\n      index: 0\\n    - halfEdge: 14\\n      index: 1\\n    - halfEdge: -14\\n      index: 0\\n    - halfEdge: -11\\n      index: 0\\n  - source: 5\\n    target: 13\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -1.0\\n      y: 1.0\\n    crossings:\\n    - halfEdge: -1\\n      at: 0.585786437626905\\n    - halfEdge: 3\\n      at: 0.585786437626905\\n    - halfEdge: 9\\n      at: 0.7071067811865476\\n    - halfEdge: 21\\n      at: 0.585786437626905\\n    - halfEdge: -12\\n      at: 0.585786437626905\\n    touches:\\n    - halfEdge: 5\\n      index: 0\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: 3\\n      index: 0\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 9\\n      index: 1\\n    - halfEdge: -9\\n      index: 0\\n    - halfEdge: 21\\n      index: 1\\n    - halfEdge: -21\\n      index: 0\\n    - halfEdge: -12\\n      index: 0\\n    - halfEdge: 12\\n      index: 0\\n    - halfEdge: 13\\n      index: 0\\n  - source: -15\\n    target: 15\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.41421356237309503\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: -15\\n      index: 0\\n    - halfEdge: 15\\n      index: 1\\n  - source: 20\\n    target: -20\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.41421356237309503\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: 20\\n      index: 0\\n    - halfEdge: -20\\n      index: 1\\n  - source: 21\\n    target: 8\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 0.41421356237309503\\n      y: -0.41421356237309503\\n    crossings:\\n    - halfEdge: -9\\n      at: 0.7071067811865476\\n    touches:\\n    - halfEdge: 21\\n      index: 0\\n    - halfEdge: -9\\n      index: 1\\n    - halfEdge: 9\\n      index: 0\\n    - halfEdge: 8\\n      index: 0\\n  - source: -16\\n    target: 17\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 1.0\\n      y: -1.0\\n    crossings:\\n    - halfEdge: 24\\n      at: 0.585786437626905\\n    - halfEdge: -22\\n      at: 0.585786437626905\\n    - halfEdge: -14\\n      at: 0.7071067811865476\\n    - halfEdge: -6\\n      at: 0.585786437626905\\n    - halfEdge: 7\\n      at: 0.585786437626905\\n    touches:\\n    - halfEdge: -16\\n      index: 0\\n    - halfEdge: 24\\n      index: 0\\n    - halfEdge: -24\\n      index: 0\\n    - halfEdge: -22\\n      index: 0\\n    - halfEdge: 22\\n      index: 0\\n    - halfEdge: -14\\n      index: 1\\n    - halfEdge: 14\\n      index: 0\\n    - halfEdge: -6\\n      index: 1\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 17\\n      index: 0\\n  inside:\\n  - 4\\n  - -4\\n  - 8\\n  - -8\\n  - 10\\n  - -10\\n  - 11\\n  - -11\\n  - 13\\n  - -13\\n  - 15\\n  - -15\\n  - 17\\n  - -17\\n  - 18\\n  - -18\\n  - 19\\n  - -19\\n  - 20\\n  - -20\\n\";","export default \"vertices:\\n- - 1\\n  - -3\\n  - -9\\n  - -21\\n  - 14\\n  - 6\\n  - -7\\n  - -17\\n  - -27\\n  - 25\\n  - -26\\n  - 23\\n  - 12\\n  - -13\\n  - 18\\n  - -19\\n  - 10\\n  - 4\\n- - -1\\n  - -5\\n  - -12\\n  - 16\\n  - 7\\n  - 2\\n- - -2\\n  - -6\\n  - -15\\n  - -25\\n  - 24\\n  - 13\\n  - 5\\n  - -4\\n  - -11\\n  - 21\\n  - -20\\n  - 17\\n  - -16\\n  - -23\\n  - 22\\n  - 19\\n  - 8\\n  - 3\\n- - -8\\n  - -18\\n  - -24\\n  - 27\\n  - 20\\n  - 9\\n- - -10\\n  - -22\\n  - 26\\n  - 15\\n  - -14\\n  - 11\\nvectors:\\n  1:\\n    x: 1.0\\n    y: 0.0\\n  2:\\n    x: -0.32635182233306964\\n    y: 0.565257937423568\\n  3:\\n    x: -0.6736481776669303\\n    y: -0.565257937423568\\n  4:\\n    x: 0.6736481776669303\\n    y: -0.565257937423568\\n  5:\\n    x: 0.32635182233306964\\n    y: 0.565257937423568\\n  6:\\n    x: -0.8263518223330697\\n    y: -0.3007674663608706\\n  7:\\n    x: 0.5\\n    y: 0.8660254037844386\\n  8:\\n    x: -0.5\\n    y: 0.41954981558864\\n  9:\\n    x: -0.17364817766693036\\n    y: -0.984807753012208\\n  10:\\n    x: 0.17364817766693036\\n    y: -0.984807753012208\\n  11:\\n    x: 0.5\\n    y: 0.41954981558864\\n  12:\\n    x: -0.5\\n    y: 0.8660254037844386\\n  13:\\n    x: 0.8263518223330697\\n    y: -0.3007674663608706\\n  14:\\n    x: -0.9396926207859084\\n    y: 0.3420201433256687\\n  15:\\n    x: 0.11334079845283873\\n    y: -0.6427876096865394\\n  16:\\n    x: 0.6527036446661393\\n    y: 0.0\\n  17:\\n    x: -0.1527036446661393\\n    y: 0.8660254037844386\\n  18:\\n    x: -0.9396926207859084\\n    y: -0.3420201433256687\\n  19:\\n    x: 0.4396926207859084\\n    y: 0.7615699589143088\\n  20:\\n    x: -0.6133407984528387\\n    y: -0.22323779409789932\\n  21:\\n    x: 0.4396926207859084\\n    y: -0.7615699589143088\\n  22:\\n    x: 0.6133407984528387\\n    y: -0.22323779409789932\\n  23:\\n    x: 0.1527036446661393\\n    y: 0.8660254037844386\\n  24:\\n    x: -0.11334079845283873\\n    y: -0.6427876096865394\\n  25:\\n    x: 0.8793852415718167\\n    y: 0.0\\n  26:\\n    x: -0.766044443118978\\n    y: -0.6427876096865394\\n  27:\\n    x: -0.766044443118978\\n    y: 0.6427876096865394\\ncomponents:\\n- cylinder: true\\n  perimeter:\\n  - source: 25\\n    target: -25\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.8793852415718167\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: 25\\n      index: 0\\n    - halfEdge: -25\\n      index: 1\\n  - source: -15\\n    target: 13\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -1.7057370639048863\\n      y: 0.3007674663608706\\n    crossings:\\n    - halfEdge: 26\\n      at: 0.8006595491452156\\n    - halfEdge: -23\\n      at: 0.8263518223330697\\n    - halfEdge: -12\\n      at: 0.8006595491452156\\n    touches:\\n    - halfEdge: -15\\n      index: 0\\n    - halfEdge: 26\\n      index: 0\\n    - halfEdge: -26\\n      index: 0\\n    - halfEdge: -23\\n      index: 0\\n    - halfEdge: 23\\n      index: 0\\n    - halfEdge: -12\\n      index: 0\\n    - halfEdge: 12\\n      index: 0\\n    - halfEdge: 13\\n      index: 0\\n  - source: -25\\n    target: 25\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.8793852415718167\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: -25\\n      index: 0\\n    - halfEdge: 25\\n      index: 1\\n  - source: -27\\n    target: -13\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 1.7057370639048863\\n      y: -0.3007674663608706\\n    crossings:\\n    - halfEdge: -24\\n      at: 0.766044443118978\\n    touches:\\n    - halfEdge: -27\\n      index: 0\\n    - halfEdge: -24\\n      index: 0\\n    - halfEdge: 24\\n      index: 0\\n    - halfEdge: -13\\n      index: 0\\n  inside:\\n  - 13\\n  - -13\\n  - 25\\n  - -25\\n- cylinder: true\\n  perimeter:\\n  - source: 1\\n    target: -1\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 1.0\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: 1\\n      index: 0\\n    - halfEdge: -1\\n      index: 1\\n  - source: 16\\n    target: -16\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.6527036446661393\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: 16\\n      index: 0\\n    - halfEdge: -16\\n      index: 1\\n  - source: 17\\n    target: 22\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -3.2057370639048863\\n      y: 0.565257937423568\\n    crossings:\\n    - halfEdge: -7\\n      at: 0.8793852415718167\\n    - halfEdge: -2\\n      at: 0.7733184030943225\\n    - halfEdge: 3\\n      at: 0.5739779522395382\\n    - halfEdge: 9\\n      at: 0.713011023880231\\n    - halfEdge: 21\\n      at: 0.5739779522395382\\n    - halfEdge: -11\\n      at: 0.7733184030943225\\n    - halfEdge: 10\\n      at: 0.8793852415718167\\n    touches:\\n    - halfEdge: 17\\n      index: 0\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -2\\n      index: 0\\n    - halfEdge: 2\\n      index: 0\\n    - halfEdge: 3\\n      index: 0\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 9\\n      index: 0\\n    - halfEdge: -9\\n      index: 0\\n    - halfEdge: 21\\n      index: 0\\n    - halfEdge: -21\\n      index: 0\\n    - halfEdge: -11\\n      index: 0\\n    - halfEdge: 11\\n      index: 0\\n    - halfEdge: 10\\n      index: 0\\n    - halfEdge: -10\\n      index: 0\\n    - halfEdge: 22\\n      index: 0\\n  - source: -16\\n    target: 16\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.6527036446661393\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: -16\\n      index: 0\\n    - halfEdge: 16\\n      index: 1\\n  - source: -1\\n    target: 1\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -1.0\\n      y: 0.0\\n    crossings: []\\n    touches:\\n    - halfEdge: -1\\n      index: 0\\n    - halfEdge: 1\\n      index: 1\\n  - source: 4\\n    target: 14\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 3.2057370639048863\\n      y: -0.565257937423568\\n    crossings:\\n    - halfEdge: 5\\n      at: 0.7168814171420514\\n    - halfEdge: 12\\n      at: 0.7733184030943225\\n    - halfEdge: 23\\n      at: 0.6736481776669303\\n    - halfEdge: -26\\n      at: 0.7733184030943225\\n    - halfEdge: -15\\n      at: 0.7168814171420514\\n    touches:\\n    - halfEdge: 4\\n      index: 0\\n    - halfEdge: 5\\n      index: 0\\n    - halfEdge: -5\\n      index: 0\\n    - halfEdge: 12\\n      index: 0\\n    - halfEdge: -12\\n      index: 0\\n    - halfEdge: 23\\n      index: 0\\n    - halfEdge: -23\\n      index: 0\\n    - halfEdge: -26\\n      index: 0\\n    - halfEdge: 26\\n      index: 0\\n    - halfEdge: -15\\n      index: 0\\n    - halfEdge: 15\\n      index: 0\\n    - halfEdge: 14\\n      index: 0\\n  inside:\\n  - 1\\n  - -1\\n  - 14\\n  - -14\\n  - 16\\n  - -16\\n  - 22\\n  - -22\\n- cylinder: true\\n  perimeter:\\n  - source: 22\\n    target: -4\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 1.1133407984528387\\n      y: 0.19631202149074067\\n    crossings:\\n    - halfEdge: -10\\n      at: 0.32635182233306964\\n    touches:\\n    - halfEdge: 22\\n      index: 0\\n    - halfEdge: -10\\n      index: 2\\n    - halfEdge: 10\\n      index: 1\\n    - halfEdge: -4\\n      index: 1\\n  - source: -4\\n    target: -2\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -3.2057370639048863\\n      y: 0.565257937423568\\n    crossings:\\n    - halfEdge: 10\\n      at: 0.4679111137620439\\n    - halfEdge: -19\\n      at: 0.532088886237956\\n    - halfEdge: 18\\n      at: 0.8793852415718167\\n    - halfEdge: 24\\n      at: 0.9076037345479523\\n    - halfEdge: -27\\n      at: 0.8793852415718167\\n    - halfEdge: -17\\n      at: 0.532088886237956\\n    - halfEdge: -7\\n      at: 0.4679111137620439\\n    touches:\\n    - halfEdge: -4\\n      index: 2\\n    - halfEdge: 10\\n      index: 0\\n    - halfEdge: -10\\n      index: 3\\n    - halfEdge: -19\\n      index: 0\\n    - halfEdge: 19\\n      index: 0\\n    - halfEdge: 18\\n      index: 0\\n    - halfEdge: -18\\n      index: 0\\n    - halfEdge: 24\\n      index: 0\\n    - halfEdge: -24\\n      index: 0\\n    - halfEdge: -27\\n      index: 0\\n    - halfEdge: 27\\n      index: 0\\n    - halfEdge: -17\\n      index: 0\\n    - halfEdge: 17\\n      index: 1\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 7\\n      index: 1\\n    - halfEdge: -2\\n      index: 0\\n  - source: 8\\n    target: 21\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: -1.1133407984528387\\n      y: 0.19631202149074067\\n    crossings:\\n    - halfEdge: 9\\n      at: 0.32635182233306964\\n    touches:\\n    - halfEdge: 8\\n      index: 0\\n    - halfEdge: 9\\n      index: 1\\n    - halfEdge: -9\\n      index: 1\\n    - halfEdge: 21\\n      index: 1\\n  - source: -4\\n    target: 22\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -1.1133407984528387\\n      y: -0.19631202149074067\\n    crossings:\\n    - halfEdge: 10\\n      at: 0.6736481776669303\\n    touches:\\n    - halfEdge: -4\\n      index: 0\\n    - halfEdge: 10\\n      index: 2\\n    - halfEdge: -10\\n      index: 1\\n    - halfEdge: 22\\n      index: 1\\n  - source: 22\\n    target: 17\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 3.2057370639048863\\n      y: -0.565257937423568\\n    crossings:\\n    - halfEdge: -10\\n      at: 0.12061475842818323\\n    - halfEdge: 11\\n      at: 0.22668159690567746\\n    - halfEdge: -21\\n      at: 0.4260220477604618\\n    - halfEdge: -9\\n      at: 0.2869889761197691\\n    - halfEdge: -3\\n      at: 0.4260220477604618\\n    - halfEdge: 2\\n      at: 0.22668159690567746\\n    - halfEdge: 7\\n      at: 0.12061475842818323\\n    touches:\\n    - halfEdge: 22\\n      index: 2\\n    - halfEdge: -10\\n      index: 0\\n    - halfEdge: 10\\n      index: 3\\n    - halfEdge: 11\\n      index: 0\\n    - halfEdge: -11\\n      index: 0\\n    - halfEdge: -21\\n      index: 0\\n    - halfEdge: 21\\n      index: 2\\n    - halfEdge: -9\\n      index: 0\\n    - halfEdge: 9\\n      index: 2\\n    - halfEdge: -3\\n      index: 0\\n    - halfEdge: 3\\n      index: 0\\n    - halfEdge: 2\\n      index: 0\\n    - halfEdge: -2\\n      index: 1\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -7\\n      index: 1\\n    - halfEdge: 17\\n      index: 0\\n  - source: 21\\n    target: 8\\n    vertical: true\\n    boundary: false\\n    vector:\\n      x: 1.1133407984528387\\n      y: -0.19631202149074067\\n    crossings:\\n    - halfEdge: -9\\n      at: 0.6736481776669303\\n    touches:\\n    - halfEdge: 21\\n      index: 0\\n    - halfEdge: -9\\n      index: 2\\n    - halfEdge: 9\\n      index: 0\\n    - halfEdge: 8\\n      index: 1\\n  inside:\\n  - 8\\n  - -8\\n  - 20\\n  - -20\\n- cylinder: true\\n  perimeter:\\n  - source: -6\\n    target: 6\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: 0.8263518223330697\\n      y: 0.3007674663608706\\n    crossings: []\\n    touches:\\n    - halfEdge: -6\\n      index: 0\\n    - halfEdge: 6\\n      index: 1\\n  - source: 14\\n    target: 4\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -3.2057370639048863\\n      y: 0.565257937423568\\n    crossings:\\n    - halfEdge: 15\\n      at: 0.28311858285794855\\n    - halfEdge: 26\\n      at: 0.22668159690567746\\n    - halfEdge: -23\\n      at: 0.32635182233306964\\n    - halfEdge: -12\\n      at: 0.22668159690567746\\n    - halfEdge: -5\\n      at: 0.28311858285794855\\n    touches:\\n    - halfEdge: 14\\n      index: 0\\n    - halfEdge: 15\\n      index: 0\\n    - halfEdge: -15\\n      index: 1\\n    - halfEdge: 26\\n      index: 0\\n    - halfEdge: -26\\n      index: 1\\n    - halfEdge: -23\\n      index: 0\\n    - halfEdge: 23\\n      index: 1\\n    - halfEdge: -12\\n      index: 0\\n    - halfEdge: 12\\n      index: 1\\n    - halfEdge: -5\\n      index: 0\\n    - halfEdge: 5\\n      index: 0\\n    - halfEdge: 4\\n      index: 0\\n  - source: -13\\n    target: -27\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: -1.7057370639048863\\n      y: 0.3007674663608706\\n    crossings:\\n    - halfEdge: 24\\n      at: 0.23395555688102196\\n    touches:\\n    - halfEdge: -13\\n      index: 0\\n    - halfEdge: 24\\n      index: 0\\n    - halfEdge: -24\\n      index: 1\\n    - halfEdge: -27\\n      index: 0\\n  - source: 6\\n    target: -6\\n    vertical: false\\n    boundary: false\\n    vector:\\n      x: -0.8263518223330697\\n      y: -0.3007674663608706\\n    crossings: []\\n    touches:\\n    - halfEdge: 6\\n      index: 0\\n    - halfEdge: -6\\n      index: 1\\n  - source: -2\\n    target: -4\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 3.2057370639048863\\n      y: -0.565257937423568\\n    crossings:\\n    - halfEdge: 7\\n      at: 0.532088886237956\\n    - halfEdge: 17\\n      at: 0.4679111137620439\\n    - halfEdge: 27\\n      at: 0.12061475842818323\\n    - halfEdge: -24\\n      at: 0.09239626545204768\\n    - halfEdge: -18\\n      at: 0.12061475842818323\\n    - halfEdge: 19\\n      at: 0.4679111137620439\\n    - halfEdge: -10\\n      at: 0.532088886237956\\n    touches:\\n    - halfEdge: -2\\n      index: 0\\n    - halfEdge: 7\\n      index: 0\\n    - halfEdge: -7\\n      index: 0\\n    - halfEdge: 17\\n      index: 0\\n    - halfEdge: -17\\n      index: 0\\n    - halfEdge: 27\\n      index: 0\\n    - halfEdge: -27\\n      index: 1\\n    - halfEdge: -24\\n      index: 0\\n    - halfEdge: 24\\n      index: 1\\n    - halfEdge: -18\\n      index: 0\\n    - halfEdge: 18\\n      index: 0\\n    - halfEdge: 19\\n      index: 0\\n    - halfEdge: -19\\n      index: 0\\n    - halfEdge: -10\\n      index: 0\\n    - halfEdge: 10\\n      index: 0\\n    - halfEdge: -4\\n      index: 0\\n  - source: 13\\n    target: -15\\n    vertical: true\\n    boundary: true\\n    vector:\\n      x: 1.7057370639048863\\n      y: -0.3007674663608706\\n    crossings:\\n    - halfEdge: 12\\n      at: 0.19934045085478438\\n    - halfEdge: 23\\n      at: 0.17364817766693036\\n    - halfEdge: -26\\n      at: 0.19934045085478438\\n    touches:\\n    - halfEdge: 13\\n      index: 0\\n    - halfEdge: 12\\n      index: 0\\n    - halfEdge: -12\\n      index: 1\\n    - halfEdge: 23\\n      index: 0\\n    - halfEdge: -23\\n      index: 1\\n    - halfEdge: -26\\n      index: 0\\n    - halfEdge: 26\\n      index: 1\\n    - halfEdge: -15\\n      index: 0\\n  inside:\\n  - 4\\n  - -4\\n  - 6\\n  - -6\\nvertical:\\n  x: -1.7057370639048863\\n  y: 0.3007674663608706\\n\";","export default \"vertices:\\n- - 1\\n  - -3\\n  - 2\\n  - -1\\n  - 3\\n  - -2\\n- - 4\\n  - -5\\n  - 6\\n  - -4\\n  - 5\\n  - -6\\nvectors:\\n  1:\\n    x: 1.0\\n    y: 1.0\\n  2:\\n    x: -1.0\\n    y: 0.0\\n  3:\\n    x: 0.0\\n    y: -1.0\\n  4:\\n    x: 1.0\\n    y: 1.0\\n  5:\\n    x: 0.0\\n    y: -1.0\\n  6:\\n    x: -1.0\\n    y: 0.0\\n\";","export default \"triangulation: |\\n  FlatTriangulationCombinatorial(vertices = (1, 8, -7,\\n  9, -3, 10, -9, 11, -2, 12, -11, 7)(-1, -8, 6, -5, 3, -10, 5, -4, 2, -12, 4, -\\n  6), faces = (1, -6, -8)(-1, 7, 8)(2, 11, 12)(-2, -4, -12)(3, 9, 10)(-3, -5, -\\n  10)(4, 5, 6)(-7, -11, -9)) with vectors {1: (1, 0), 2: ((1/2 ~ 0.50000000), -\\n  (1/2*x ~ 0.86602540)), 3: ((1/2 ~ 0.50000000), (1/2*x ~ 0.86602540)), 4: ((3/\\n  2 ~ 1.5000000)*ℝ(2.00114=9228629358915783047p-62 + ℝ(0.303644…)p-62),\\n  (1/2*x ~ 0.86602540)*ℝ(2.00114=9228629358915783047p-62 + ℝ(0.303644…)p-\\n  62)), 5: (-(3/2 ~ 1.5000000)*ℝ(2.00114=9228629358915783047p-62 + ℝ(0.\\n  303644…)p-62), (1/2*x ~ 0.86602540)*ℝ(2.00114=9228629358915783047p-62 +\\n  ℝ(0.303644…)p-62)), 6: (0, -(x ~ 1.7320508)*ℝ(2.00114=\\n  9228629358915783047p-62 + ℝ(0.303644…)p-62)), 7: (0, -(x ~ 1.7320508)*ℝ\\n  (2.00114=9228629358915783047p-62 + ℝ(0.303644…)p-62)), 8: (1, (x ~ 1.\\n  7320508)*ℝ(2.00114=9228629358915783047p-62 + ℝ(0.303644…)p-62)), 9: (-\\n  (3/2 ~ 1.5000000)*ℝ(2.00114=9228629358915783047p-62 + ℝ(0.303644…)p-62)\\n  , (1/2*x ~ 0.86602540)*ℝ(2.00114=9228629358915783047p-62 + ℝ(0.303644…)\\n  p-62)), 10: ((3/2 ~ 1.5000000)*ℝ(2.00114=9228629358915783047p-62 + ℝ(0.\\n  303644…)p-62) - (1/2 ~ 0.50000000), -(1/2*x ~ 0.86602540) - (1/2*x ~ 0.\\n  86602540)*ℝ(2.00114=9228629358915783047p-62 + ℝ(0.303644…)p-62)), 11: (\\n  (3/2 ~ 1.5000000)*ℝ(2.00114=9228629358915783047p-62 + ℝ(0.303644…)p-62)\\n  , (1/2*x ~ 0.86602540)*ℝ(2.00114=9228629358915783047p-62 + ℝ(0.303644…)\\n  p-62)), 12: (-(1/2 ~ 0.50000000) - (3/2 ~ 1.5000000)*ℝ(2.00114=\\n  9228629358915783047p-62 + ℝ(0.303644…)p-62), (1/2*x ~ 0.86602540) - (1/2*\\n  x ~ 0.86602540)*ℝ(2.00114=9228629358915783047p-62 + ℝ(0.303644…)p-62))}\\n\";","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Torus from \"!!raw-loader!./torus.txt\";\nimport Triangle_1_1_1 from \"!!raw-loader!./1-1-1.txt\";\nimport Triangle_1_1_3 from \"!!raw-loader!./1-1-3.txt\";\nimport Triangle_1_1_3_Without_Marked_Point from \"!!raw-loader!./1-1-3-without-marked-point.txt\";\nimport Triangle_1_2_2 from \"!!raw-loader!./1-2-2.txt\";\nimport Triangle_1_2_2_Without_Marked_Point from \"!!raw-loader!./1-2-2-without-marked-point.txt\";\nimport Triangle_1_2_5 from \"!!raw-loader!./1-2-5.txt\";\nimport Triangle_2_3_4 from \"!!raw-loader!./2-3-4.txt\";\nimport Disconnected from \"!!raw-loader!./disconnected.txt\";\nimport Quadrilateral_1_2_2_1 from \"!!raw-loader!./1_2_2_1.txt\";\n\nimport { Component, Vue } from \"vue-property-decorator\";\n\n@Component\nexport default class EditorMenu extends Vue {\n  predefined = {\n    \"Torus\": Torus,\n    \"Triangle (1, 1, 1)\": Triangle_1_1_1,\n    \"Triangle (1, 1, 3) with Marked Points\": Triangle_1_1_3,\n    \"Triangle (1, 1, 3) w/o Marked Points\": Triangle_1_1_3_Without_Marked_Point,\n    \"Triangle (1, 2, 2) with Marked Points\": Triangle_1_2_2,\n    \"Triangle (1, 2, 2) w/o Marked Points\": Triangle_1_2_2_Without_Marked_Point,\n    \"Triangle (1, 2, 5) with Marked Points\": Triangle_1_2_5,\n    \"Triangle (2, 3, 4)\": Triangle_2_3_4,\n    \"Disconnected Surface\": Disconnected,\n    \"Quadrilateral (1, 2, 2, 1) as a Raw Flatsurf String\": Quadrilateral_1_2_2_1,\n  } as {[name: string]: string};\n\n  get selected(): string {\n    for(const [name, yaml] of Object.entries(this.predefined))\n      if (yaml == this.$store.state.raw)\n        return name;\n    return \"other\";\n  }\n\n  set selected(name: string) {\n    this.$store.dispatch(\"reset\", {raw: this.predefined[name]});\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EditorMenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EditorMenu.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./EditorMenu.vue?vue&type=template&id=0ca81ee5&\"\nimport script from \"./EditorMenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./EditorMenu.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\ninstallComponents(component, {VList,VListItem,VListItemContent,VListItemGroup,VListItemTitle,VNavigationDrawer})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.triangulation != null)?_c('layouter',{attrs:{\"triangulation\":_vm.triangulation,\"layout\":_vm.layout},on:{\"layout\":function (l) { return _vm.layout = l; }},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar layout = ref.layout;\nreturn [_c('v-row',[_c('v-col',{staticClass:\"col-md-4 col-12\"},[_c('v-card',[_c('v-card-text',[_c('v-subheader',[_vm._v(\"Width\")]),_c('v-slider',{attrs:{\"min\":32,\"max\":8192,\"thumb-label\":\"always\"},model:{value:(_vm.width),callback:function ($$v) {_vm.width=$$v},expression:\"width\"}}),_c('v-subheader',[_vm._v(\"Height\")]),_c('v-slider',{attrs:{\"min\":32,\"max\":8192,\"thumb-label\":\"always\"},model:{value:(_vm.height),callback:function ($$v) {_vm.height=$$v},expression:\"height\"}})],1)],1)],1),_c('v-col',{staticClass:\"col-md-8 col-12\"},[(layout != null && _vm.viewport != null)?_c('v-card',[_c('v-card-title',[_c('v-tabs',{attrs:{\"fixed-tabs\":\"\"},model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},[_c('v-tabs-slider'),_c('v-tab',{staticClass:\"primary--text\"},[_c('v-icon',[_vm._v(\"mdi-image\")])],1),_c('v-tab',{staticClass:\"primary--text\"},[_c('v-icon',[_vm._v(\"mdi-format-align-left\")])],1)],1)],1),_c('v-card-text',[_c('v-tabs-items',{model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},[_c('v-tab-item',{key:\"0\"},[_c('v-card',[_c('v-img',{staticClass:\"mx-auto\",attrs:{\"src\":(\"data:image/svg+xml;base64,\" + (_vm.base64(_vm.svg))),\"max-width\":_vm.width,\"max-height\":_vm.height}})],1)],1),_c('v-tab-item',{key:\"1\"},[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"export\",domProps:{\"textContent\":_vm._s(_vm.svg)}})],1)],1)],1),_c('triangulation-interaction',{attrs:{\"layout\":layout,\"options\":_vm.options,\"outer\":_vm.show.includes('outer'),\"inner\":_vm.show.includes('triangulation')}}),_c('label-interaction',{attrs:{\"layout\":layout,\"options\":_vm.options,\"outer\":_vm.show.includes('outer-labels'),\"numeric\":_vm.show.includes('numeric-labels')}}),_c('flatsurf',{ref:\"flatsurf\",staticClass:\"render\",staticStyle:{\"display\":\"block\"},style:({ 'width': (_vm.width + \"px\"), 'height': (_vm.height + \"px\") }),attrs:{\"triangulation\":_vm.triangulation,\"flow-components\":_vm.flowComponents,\"layout\":layout,\"viewportCoordinateSystem\":_vm.viewport.viewportCoordinateSystem,\"visualizationOptions\":_vm.options}})],1)],1):_vm._e()],1)],1)]}}],null,false,2667427372)}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Ref, Watch } from \"vue-property-decorator\";\n\nimport AsyncComputed from 'vue-async-computed-decorator'\nimport Flatsurf from \"@/components/flatsurf/Flatsurf.vue\";\nimport TriangulationInteraction from \"@/components/interactions/TriangulationInteraction\";\nimport LabelInteraction from \"@/components/interactions/LabelInteraction\";\nimport VisualizationOptions from \"@/components/flatsurf/options/VisualizationOptions\";\nimport Layouter from \"@/components/Layouter\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Layout from \"@/layout/Layout\";\nimport FlatTriangulation from \"@/flatsurf/FlatTriangulation\";\nimport Viewport from \"@/geometry/Viewport\";\nimport Vertical from \"@/flatsurf/Vertical\";\n\n@Component({\n  components: {\n    Flatsurf,\n    TriangulationInteraction,\n    LabelInteraction,\n    Layouter,\n  },\n})\nexport default class Export extends Vue {\n  @Prop({ required: true, type: Array }) show!: string[];\n\n  tab = 0;\n\n  options = new VisualizationOptions();\n\n  width = 1024;\n  height = 1024;\n\n  ready: string | null = null;\n\n  viewport: Viewport | null = null;\n\n  @Ref()\n  readonly flatsurf!: Flatsurf;\n\n  get layout() : Layout | null {\n    return this.$store.state.layout;\n  }\n\n  set layout(layout: Layout | null) {\n    if (this.layout !== layout)\n      this.$store.commit('layout', { layout });\n  }\n\n  get triangulation() : FlatTriangulation | null {\n    return this.$store.state.triangulation;\n  }\n\n  get vertical() : Vertical | null {\n    return this.$store.state.vertical;\n  }\n\n  get svgCoordinateSystem(): CoordinateSystem | null {\n    if (this.viewport == null)\n      return null;\n    if (this.layout == null)\n      return null;\n\n    this.viewport.focus(this.layout.hull);\n\n    return this.viewport.viewportCoordinateSystem;\n  }\n\n  base64(data: string) {\n    return btoa(unescape(encodeURIComponent(data)));\n  }\n\n  get flowComponents() {\n    if (this.show.includes('flow-components'))\n      return this.$store.state.flowComponents;\n    return [];\n  }\n\n  @AsyncComputed({default: \"…\"})\n  async svg() {\n    if (this.viewport == null)\n      return \"…\";\n\n    if (this.layout == null)\n      return \"…\";\n\n    this.viewport.resize(this.width, this.height);\n    this.viewport.focus(this.layout.hull);\n\n    await this.$nextTick();\n\n    return await this.flatsurf.svg();\n  }\n\n  @Watch(\"triangulation\", { immediate: true })\n  onTriangulationChange() {\n    if (this.triangulation != null) {\n      this.viewport = new Viewport(this.vertical!.coordinateSystem);\n    }\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Export.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Export.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Export.vue?vue&type=template&id=54d87b92&scoped=true&\"\nimport script from \"./Export.vue?vue&type=script&lang=ts&\"\nexport * from \"./Export.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Export.vue?vue&type=style&index=0&id=54d87b92&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54d87b92\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabItem } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTabsItems } from 'vuetify/lib/components/VTabs';\nimport { VTabsSlider } from 'vuetify/lib/components/VTabs';\ninstallComponents(component, {VCard,VCardText,VCardTitle,VCol,VIcon,VImg,VRow,VSlider,VSubheader,VTab,VTabItem,VTabs,VTabsItems,VTabsSlider})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',{staticClass:\"col-md-4 col-12\"},[_c('v-card',[_c('v-card-title',[_vm._v(\" vue-flatsurf Widget \")]),_c('v-card-text',[_c('p',[_vm._v(\"The \"),_c('code',[_vm._v(\"Widget\")]),_vm._v(\" component encapsulated all the features of vue-flatsurf in a single component to simplify interacting with the widget from Jupyter Notebooks, e.g., through \"),_c('a',{attrs:{\"href\":\"https://github.com/flatsurf/ipyvue-flatsurf\"}},[_vm._v(\"ipyvue-flatsurf\")]),_vm._v(\".\")]),_c('p',[_vm._v(\"This view exposes all the features of that widget but is not connected to the other views of this demo application.\")])])],1)],1),_c('v-col',{staticClass:\"col-md-4 col-12\"},[_c('v-card',[_c('v-card-title',[_vm._v(\" Widget Visualization \")]),_c('v-card-text',[_c('v-checkbox',{attrs:{\"label\":\"Show Inner Edges\",\"hide-details\":\"\"},model:{value:(_vm.showInnerEdges),callback:function ($$v) {_vm.showInnerEdges=$$v},expression:\"showInnerEdges\"}}),_c('v-checkbox',{attrs:{\"label\":\"Show Outer Half Edges\",\"hide-details\":\"\"},model:{value:(_vm.showOuterHalfEdges),callback:function ($$v) {_vm.showOuterHalfEdges=$$v},expression:\"showOuterHalfEdges\"}}),_c('v-checkbox',{attrs:{\"label\":\"Show Numeric Labels on Edges and Half Edges\",\"hide-details\":\"\"},model:{value:(_vm.showNumericLabels),callback:function ($$v) {_vm.showNumericLabels=$$v},expression:\"showNumericLabels\"}}),_c('v-checkbox',{attrs:{\"label\":\"Show Alphanumeric Labels on Outer Half Edges\",\"hide-details\":\"\"},model:{value:(_vm.showOuterLabels),callback:function ($$v) {_vm.showOuterLabels=$$v},expression:\"showOuterLabels\"}}),_c('v-checkbox',{attrs:{\"label\":\"Show Flow Components\",\"disabled\":_vm.yaml.components.length == 0,\"hide-details\":\"\"},model:{value:(_vm.showFlowComponents),callback:function ($$v) {_vm.showFlowComponents=$$v},expression:\"showFlowComponents\"}}),_c('v-checkbox',{attrs:{\"label\":\"Rotate to Vertical\",\"disabled\":_vm.yaml.vertical == null,\"hide-details\":\"\"},model:{value:(_vm.applyVertical),callback:function ($$v) {_vm.applyVertical=$$v},expression:\"applyVertical\"}}),_c('v-checkbox',{attrs:{\"label\":\"Use Animations\",\"hide-details\":\"\"},model:{value:(_vm.showAnimations),callback:function ($$v) {_vm.showAnimations=$$v},expression:\"showAnimations\"}})],1)],1)],1),_c('v-col',{staticClass:\"col-md-4 col-12\"},[_c('v-card',[_c('v-card-title',[_vm._v(\" Widget Output \")]),_c('v-card-text',[_c('widget-component',{ref:\"widget\",attrs:{\"triangulation\":_vm.triangulation,\"flow-components\":_vm.flowComponents,\"vertical\":_vm.vertical,\"showInnerEdges\":_vm.showInnerEdges,\"showOuterHalfEdges\":_vm.showOuterHalfEdges,\"showOuterLabels\":_vm.showOuterLabels,\"showNumericLabels\":_vm.showNumericLabels,\"action\":_vm.action,\"animated\":_vm.showAnimations}})],1)],1)],1),_c('v-col',{staticClass:\"col-md-4 col-12\"},[_c('v-card',[_c('v-card-title',[_vm._v(\" Widget Interaction \")]),_c('v-card-text',[_c('v-select',{attrs:{\"items\":_vm.actions,\"item-text\":\"text\",\"item-value\":\"value\"},model:{value:(_vm.action),callback:function ($$v) {_vm.action=$$v},expression:\"action\"}}),(_vm.action === null)?_c('v-container',[_vm._v(\" Drag & Zoom the Surface. \")]):_vm._e(),(_vm.action === 'glue')?_c('v-container',[_c('p',[_vm._v(\" Left-click on a half edge to force it to be visually glued. Click again to force it to be unglued. Click again to choose gluing automatically. \")])]):_vm._e(),(_vm.action === 'path')?_c('v-container',[_vm._v(\" Click any vertex to start a path. Click half edges or vertices to draw the path. Press the escape key when the path is complete. \")]):_vm._e()],1)],1)],1),_c('v-col',{staticClass:\"col-md-4 col-12\"},[_c('v-card',[_c('v-card-title',[_vm._v(\" Query Widget \")]),_c('v-card-text',[_c('v-select',{attrs:{\"items\":_vm.queries,\"disabled\":_vm.info === '…'},model:{value:(_vm.query),callback:function ($$v) {_vm.query=$$v},expression:\"query\"}}),(_vm.query === 'SVG')?_c('p',[_vm._v(\" Return the widget as a standalone SVG. \")]):(_vm.query === 'Path')?_c('p',[_vm._v(\" Return the currently drawn path if any path is being drawn. \")]):(_vm.query === 'Complete Path')?_c('p',[_vm._v(\" Return the path once its complete, i.e., once the user pressed Escape. \")]):(_vm.query === 'Path Change')?_c('p',[_vm._v(\" Return the path once it changes. \")]):(_vm.query === 'Layout')?_c('p',[_vm._v(\" Return the data underlying the visual layout of the surface. \")]):(_vm.query === 'Layout Change')?_c('p',[_vm._v(\" Return the data underlying the visual layout of the surface once it changes. \")]):(_vm.query === 'Glue')?_c('p',[_vm._v(\" Return the explicitly selected gluings that were used to create the surface's layout. \")]):(_vm.query === 'Glue Change')?_c('p',[_vm._v(\" Return the explicitly selected gluings that were used to create the surface's layout once they change. \")]):(_vm.query === 'Force Gluing')?_c('p',[_vm._v(\" Establish the specified visual gluing and return the resulting layout. \"),_c('v-text-field',{staticClass:\"parameters\",attrs:{\"label\":\"Gluing\"},model:{value:(_vm.parameters),callback:function ($$v) {_vm.parameters=$$v},expression:\"parameters\"}})],1):_vm._e(),_c('p',{staticClass:\"tiny\",domProps:{\"textContent\":_vm._s(_vm.info)}}),_c('v-container',{staticClass:\"text-right\"},[_c('v-btn',{attrs:{\"loading\":_vm.info === '…'},on:{\"click\":_vm.performQuery}},[_vm._v(\"Refresh\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('layouter',{ref:\"layouter\",attrs:{\"triangulation\":_vm.parsedTriangulation},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar layout = ref.layout;\nvar relayout = ref.relayout;\nreturn [_c('viewer',{ref:\"viewer\",staticClass:\"surface\",attrs:{\"triangulation\":_vm.parsedTriangulation,\"flow-components\":_vm.parsedFlowComponents,\"layout\":layout,\"vertical\":_vm.parsedVertical,\"saddle-connections\":_vm.parsedSaddleConnections,\"paths\":_vm.parsedPaths},scopedSlots:_vm._u([{key:\"interaction\",fn:function(ref){\nvar focus = ref.focus;\nvar options = ref.options;\nvar refocus = ref.refocus;\nvar svg = ref.svg;\nreturn [_c('triangulation-interaction',{attrs:{\"layout\":layout,\"options\":options,\"outer\":_vm.showOuterHalfEdges,\"inner\":_vm.showInnerEdges}}),_c('label-interaction',{attrs:{\"layout\":layout,\"options\":options,\"outer\":_vm.showOuterLabels,\"numeric\":_vm.showNumericLabels}}),(_vm.action == 'glue')?_c('glue-interaction',{ref:\"glue\",attrs:{\"relayout\":relayout,\"svg\":svg,\"options\":options,\"focus\":focus,\"refocus\":refocus,\"layout\":layout}}):_vm._e(),(_vm.action == 'path')?_c('path-interaction',{ref:\"path\",attrs:{\"layout\":layout,\"svg\":svg,\"triangulation\":_vm.parsedTriangulation,\"options\":options,\"animated\":_vm.animated}}):_vm._e()]}}],null,true)})]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* ******************************************************************************\n * Copyright (c) 2020 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport xor from \"lodash-es/xor\";\n\n// A permutation of T where T is something that can be safely converted to a\n// key in an object, i.e., T should probably be number or string.\nexport default class Permutation<T> {\n  public static parse(raw: string): Permutation<number> {\n    return Permutation.fromCycles<number>(raw.substr(1, raw.length - 2).split(/\\)\\(/).map(cycle => cycle.split(/, /).map((s) => s.replaceAll(' ', '')).map(Number)));\n  }\n\n  public static fromCycles<T>(cycles: Array<T[]>) : Permutation<T> {\n    const mapping = [] as Array<[T, T]>;\n    for (let cycle of cycles)\n      for (let i = 0; i < cycle.length; i++)\n        mapping.push([cycle[i], cycle[(i + 1) % cycle.length]]);\n    return Permutation.fromMapping(mapping);\n  }\n\n  public static fromMapping<T>(mapping: Array<[T, T]>) : Permutation<T> {\n    return new Permutation<T>(mapping);\n  }\n\n  private constructor(mapping: Array<[T, T]>) {\n    this.mapping = {};\n    this.inverse = {};\n\n    for (let entry of mapping) {\n      if (entry[0] in this.mapping)\n        throw Error(`${entry} specified more than once in mapping domain`);\n      if (entry[1] in this.inverse)\n        throw Error(`${entry} specified more than once in mapping codomain`);\n      this.mapping[String(entry[0])] = entry[1];\n      this.inverse[String(entry[1])] = entry[0];\n    }\n\n    if (xor(Object.keys(this.mapping), Object.keys(this.inverse)).length !== 0)\n      throw Error(`domain {${Object.keys(this.mapping)}} and codomain {${Object.keys(this.inverse)}} of permutation are not identical`);\n\n    this.cycles = [];\n    for (let [a, b] of mapping) {\n      if (this.cycles.find((cycle) => cycle.includes(a)))\n        continue;\n      const cycle = [a, b];\n      while(true) {\n        const x = cycle[cycle.length - 1];\n        if (cycle[0] == x) {\n          cycle.pop();\n          break;\n        }\n        cycle.push(this.mapping[String(x)]);\n      }\n      this.cycles.push(cycle);\n    }\n  }\n\n  public image(x: T) {\n    return this.mapping[String(x)];\n  }\n\n  public preimage(x: T) {\n    return this.inverse[String(x)];\n  }\n\n  public get domain() : T[] {\n    return Object.values(this.mapping);\n  }\n\n  public readonly cycles : Array<T[]>;\n\n  private readonly mapping : { [key: string]: T }; \n  private readonly inverse : { [key: string]: T };\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport HalfEdge from \"./HalfEdge\";\nimport Permutation from \"./Permutation\";\n\nexport interface VertexSchema {\n  source: HalfEdge[],\n};\n\nexport default class Vertex {\n  constructor(source: HalfEdge[]) {\n    this.source = source;\n  }\n\n  public static fromPermutation(vertices: Permutation<HalfEdge>): Vertex[] {\n    return vertices.cycles.map((cycle) => new Vertex(cycle));\n  }\n\n  readonly source: HalfEdge[];\n}\n","/* ******************************************************************************\n * Copyright (c) 2020 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport xor from \"lodash-es/xor\";\nimport partition from \"lodash-es/partition\";\nimport zipObject from \"lodash-es/zipObject\";\nimport mapValues from \"lodash-es/mapValues\";\n\nimport HalfEdge from \"./HalfEdge\";\nimport Edge from \"./Edge\";\nimport Permutation from \"./Permutation\";\n\nimport Vector, { VectorSchema } from \"@/geometry/Vector\";\nimport Point from \"@/geometry/Point\";\nimport CoordinateSystem from '@/geometry/CoordinateSystem';\nimport Vertex from \"./Vertex\";\n\nexport interface FlatTriangulationSchema {\n  vertices: Array<HalfEdge[]>,\n  vectors: { [key: number]: VectorSchema }\n};\n\nexport default class FlatTriangulation {\n  public static parse(raw: string, coordinateSystem: CoordinateSystem) : FlatTriangulation;\n  public static parse(yaml: FlatTriangulationSchema, coordinateSystem: CoordinateSystem) : FlatTriangulation;\n  public static parse(data: FlatTriangulationSchema | string, coordinateSystem: CoordinateSystem) : FlatTriangulation {\n    if (typeof data === \"string\") {\n      data = data.trim().replaceAll(/\\n/g, ' ');\n      const pattern = /^FlatTriangulationCombinatorial\\(vertices = (.*), faces = .*\\) with vectors \\{(.*)\\}$/;\n      const match = data.match(pattern);\n\n      if (match === null)\n        throw Error(`FlatTriangulation description does not match expected pattern ${pattern}`);\n\n      return new FlatTriangulation(\n        Permutation.parse(match[1]),\n        mapValues(\n        zipObject(\n          ...partition(match[2].substring(0, match[2].length - 1).split(/(?:: \\()|(?:\\), (?=\\d+:))/),\n          (v: string) => !v.match(/,/)) as [string[], string[]]\n        ), xy => Vector.parse(`(${xy})`, coordinateSystem)));\n    } else {\n      return new FlatTriangulation(\n        Permutation.fromCycles(data.vertices),\n        Object.fromEntries(Object.entries(data.vectors).map(([halfEdge, vector]) => [halfEdge, Vector.parse(vector, coordinateSystem)]))\n      );\n    }\n  }\n\n  private constructor(vertices: Permutation<HalfEdge>, vectors: {[key: string]: Vector}) {\n    this.vertices = vertices;\n    this.vertexes = Vertex.fromPermutation(vertices);\n    this.halfEdges = vertices.domain;\n    this.edges = this.halfEdges.filter((halfEdge) => halfEdge > 0).map((halfEdge) => new Edge(halfEdge));\n    this.faces = Permutation.fromMapping(this.halfEdges.map((he) => [-vertices.image(he), he]));\n\n    this.vectors = vectors;\n\n    if (xor(\n      [...Object.keys(this.vectors), ...Object.keys(this.vectors).map((he) => String(-Number(he)))],\n      this.halfEdges.map((he) => String(he))\n    ).length !== 0)\n      throw Error(`Provided vectors {${Object.keys(this.vectors)}} and present half edges {${this.halfEdges}} do not coincide.`);\n\n    const coordinateSystem = this.coordinateSystem;\n\n    for (const face of this.faces.cycles) {\n      const sum = face.reduce((sum, he) => sum.translate(this.vector(he)), new Point(coordinateSystem, 0, 0));\n      if (!sum.equalTo(new Point(coordinateSystem, 0, 0), 1e-6))\n        throw Error(`Face ${face} is not closed. Going around the face gives (${sum.x}, ${sum.y}) but should be zero.`);\n      // TODO: Wiggle the half edges to a place to make the faces closed in double coordinates. See https://github.com/flatsurf/vue-flatsurf/issues/38.\n    }\n  }\n\n  public get coordinateSystem() : CoordinateSystem {\n    if (Object.keys(this.vectors).length === 0)\n      throw Error(\"Cannot determine coordinate system for empty surface.\");\n    return Object.values(this.vectors)[0].parent;\n  }\n\n  public vector(halfEdge: HalfEdge): Vector {\n    return this.vectors[halfEdge] || this.vectors[-halfEdge].invert();\n  }\n\n  public readonly vertices: Permutation<HalfEdge>;\n  public readonly vertexes: Vertex[];\n  public readonly halfEdges : HalfEdge[];\n  public readonly edges: Edge[];\n  public readonly faces : Permutation<HalfEdge>;\n  private readonly vectors : {[key: string]: Vector };\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport HalfEdge, { HalfEdgeSchema } from \"./HalfEdge\";\nimport Vector, { VectorSchema } from \"@/geometry/Vector\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\n\nexport interface SaddleConnectionSchema {\n  source: HalfEdgeSchema,\n  target: HalfEdgeSchema,\n  vector: VectorSchema,\n  crossings: {\n    halfEdge: number,\n    at: number,\n  }[]\n};\n\nexport default class SaddleConnection {\n  public static parse(yaml: SaddleConnectionSchema, coordinateSystem: CoordinateSystem): SaddleConnection {\n    return new SaddleConnection(yaml.source, yaml.target, Vector.parse(yaml.vector, coordinateSystem), yaml.crossings);\n  }\n\n  private constructor(source: HalfEdge, target: HalfEdge, vector: Vector, crossings: {halfEdge: HalfEdge, at: number}[]) {\n    this.source = source;\n    this.target = target;\n    this.vector = vector;\n    this.crossings = Object.freeze(crossings);\n  }\n\n  public readonly source: HalfEdge;\n  public readonly target: HalfEdge;\n  public readonly vector: Vector;\n  // The sequence of half edges crossed with approximate\n  // relative point of crossing in [0, 1].\n  public readonly crossings: readonly {halfEdge: HalfEdge, at: number}[];\n}\n\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport SaddleConnection, { SaddleConnectionSchema } from \"./SaddleConnection\";\nimport CoordinateSystem from '@/geometry/CoordinateSystem';\nimport HalfEdge from \"./HalfEdge\";\n\nexport interface Touch {\n  halfEdge: HalfEdge;\n  index: number;\n}\n\nexport interface FlowConnectionSchema extends SaddleConnectionSchema {\n  vertical: boolean;\n  boundary: boolean;\n  touches: Touch[];\n}\n\nexport default class FlowConnection {\n  public static parse(yaml: FlowConnectionSchema, coordinateSystem: CoordinateSystem): FlowConnection {\n    return new FlowConnection(SaddleConnection.parse(yaml, coordinateSystem), yaml.vertical, yaml.boundary, yaml.touches);\n  }\n\n  private constructor(connection: SaddleConnection, vertical: boolean, boundary: boolean, touches: Touch[]) {\n    this.connection = connection;\n    this.vertical = vertical;\n    this.boundary = boundary;\n    this.touches = Object.freeze(touches);\n  }\n\n  public readonly connection: SaddleConnection;\n  public readonly vertical: boolean;\n  public readonly boundary: boolean;\n\n  // The sequence of half edges crossed/touched (most half edges show up in\n  // pairs) and the order of this crossing/touching in comparison to all the\n  // others of this component on that half edge. Typically, starts with\n  // [source half edge, 0], then the first [half edge crossed, 0] if this is\n  // the right-most crossing of that half edge, then [-half edge crossed,\n  // 0], ... until the [target half edge, 0].\n  public readonly touches: readonly Touch[];\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport CoordinateSystem from '@/geometry/CoordinateSystem';\nimport FlowConnection, { FlowConnectionSchema } from \"./FlowConnection\";\nimport HalfEdge, { HalfEdgeSchema } from './HalfEdge';\n\nexport interface FlowComponentSchema {\n  cylinder: boolean,\n  perimeter: FlowConnectionSchema[],\n  inside: HalfEdgeSchema[],\n};\n\nexport default class FlowComponent {\n  public static parse(yaml: FlowComponentSchema,\n  coordinateSystem: CoordinateSystem) : FlowComponent {\n    return new FlowComponent(yaml.cylinder, yaml.perimeter.map(connection => FlowConnection.parse(connection, coordinateSystem)), yaml.inside);\n  }\n\n  private constructor(cylinder: boolean, perimeter: FlowConnection[], inside: HalfEdge[]) {\n    this.cylinder = cylinder;\n    this.perimeter = perimeter;\n    this.inside = inside;\n  }\n\n  public readonly cylinder: boolean;\n  public readonly perimeter: FlowConnection[];\n  public readonly inside: HalfEdge[];\n}\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport SaddleConnection, {SaddleConnectionSchema} from \"./SaddleConnection\";\n\nexport interface PathSchema {\n  connections: SaddleConnectionSchema[],\n};\n\nexport default class Path {\n  public static parse(yaml: PathSchema, coordinateSystem: CoordinateSystem): Path {\n    return new Path(yaml.connections.map((connection) => SaddleConnection.parse(connection, coordinateSystem)));\n  }\n\n  private constructor(connections: SaddleConnection[]) {\n    this.connections = connections;\n  }\n\n  public readonly connections: SaddleConnection[];\n}\n\n\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Vector, { VectorSchema } from \"@/geometry/Vector\";\nimport Flatten from \"@flatten-js/core\";\n\nexport type VerticalSchema = VectorSchema;\n\nexport default class Vertical {\n  public static parse(yaml: VerticalSchema, coordinateSystem: CoordinateSystem): Vertical {\n    return new Vertical(Vector.parse(yaml, coordinateSystem));\n  }\n\n  private constructor(vector: Vector) {\n    this.vector = vector;\n    this.rotated = new CoordinateSystem(true);\n    const angle = new Vector(this.vector.parent, 0, 1).angleTo(this.vector);\n    this.rotated.embedInto(this.vector.parent, new Flatten.Matrix().rotate(-angle));\n  }\n\n  get coordinateSystem() {\n    return this.rotated;\n  }\n\n  public readonly vector: Vector;\n  public readonly rotated: CoordinateSystem;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Ref, Vue } from \"vue-property-decorator\";\n\nimport YAML from \"yaml\";\n\nimport FlatTriangulation from \"@/flatsurf/FlatTriangulation\";\nimport FlowComponent from \"@/flatsurf/FlowComponent\";\nimport SaddleConnection from \"@/flatsurf/SaddleConnection\";\nimport Path from \"@/flatsurf/Path\";\nimport CoordinateSystem from \"@/geometry/CoordinateSystem\";\nimport Layouter from \"@/components/Layouter\";\nimport Viewer from \"@/components/Viewer.vue\";\nimport IViewer from \"@/components/IViewer\";\nimport TriangulationInteraction from \"@/components/interactions/TriangulationInteraction\";\nimport LabelInteraction from \"@/components/interactions/LabelInteraction\";\nimport GlueInteraction from \"@/components/interactions/GlueInteraction.vue\";\nimport PathInteraction from \"@/components/interactions/PathInteraction.vue\";\nimport IPathInteraction from \"@/components/interactions/IPathInteraction\";\nimport IGlueInteraction from \"@/components/interactions/IGlueInteraction\";\nimport Vertical from \"@/flatsurf/Vertical\";\nimport IWidget from \"@/components/IWidget\";\n\n@Component({\n  components: {\n    Layouter,\n    Viewer,\n    GlueInteraction,\n    PathInteraction,\n    TriangulationInteraction,\n    LabelInteraction,\n  },\n})\nexport default class Widget extends Vue implements IWidget {\n  @Prop({ required: true, type: String }) triangulation!: string;\n  @Prop({ required: false, default: () => [], type: Array }) flowComponents!: string[];\n  @Prop({ required: false, default: () => [], type: Array }) saddleConnections!: string[];\n  @Prop({ required: false, default: () => [], type: Array }) paths!: string[];\n  @Prop({ required: false, default: null, type: String }) vertical!: string | null;\n  @Prop({ required: false, default: true, type: Boolean }) showInnerEdges!: boolean;\n  @Prop({ required: false, default: true, type: Boolean }) showOuterHalfEdges!: boolean;\n  @Prop({ required: false, default: true, type: Boolean }) showOuterLabels!: boolean;\n  @Prop({ required: false, default: false, type: Boolean }) showNumericLabels!: boolean;\n  @Prop({ required: false, default: null, type: String }) action!: string | null;\n  @Prop({ required: false, default: false, type: Boolean }) animated!: boolean;\n\n  coordinateSystem = new CoordinateSystem(true);\n\n  @Ref(\"viewer\")\n  readonly _viewer!: IViewer;\n\n  get viewer() {\n    return (async () => {\n      if (this._viewer === undefined) {\n        await new Promise<void>((resolve) => {\n          this.layouter.$once(\"layout\", () => resolve());\n        });\n        await this.$nextTick();\n      }\n      return this._viewer;\n    })();\n  }\n\n  get parsedTriangulation(): FlatTriangulation {\n    return FlatTriangulation.parse(YAML.parse(this.triangulation), this.coordinateSystem);\n  }\n\n  get parsedFlowComponents(): FlowComponent[] {\n    return this.flowComponents.map((component) => FlowComponent.parse(YAML.parse(component), this.coordinateSystem));\n  }\n\n  get parsedSaddleConnections(): SaddleConnection[] {\n    return [...this.saddleConnections].map((connection) => SaddleConnection.parse(YAML.parse(connection), this.coordinateSystem));\n  }\n\n  get parsedPaths(): Path[] {\n    return [...this.paths].map((path) => Path.parse(YAML.parse(path), this.coordinateSystem));\n  }\n\n  get parsedVertical() {\n    if (this.vertical == null)\n      return null;\n\n    return Vertical.parse(YAML.parse(this.vertical), this.coordinateSystem);\n  }\n\n  async svg(): Promise<string> {\n    return await (await this.viewer).svg();\n  }\n\n  @Ref()\n  readonly layouter!: Layouter;\n\n  async layout(when: \"now\" | \"changed\") {\n    return await this.layouter.query(when);\n  }\n\n  @Ref(\"glue\")\n  readonly _glueInteraction!: IGlueInteraction;\n\n  get glueInteraction(): Promise<IGlueInteraction> {\n    if (this.action !== \"glue\")\n      throw Error(\"Cannot access glue interaction when action is not set to 'glue'.\");\n\n    return (async () => {\n      await this.viewer;\n\n      return this._glueInteraction;\n    })();\n  }\n\n  async glued(when: \"now\" | \"changed\") {\n    return await (await this.glueInteraction).query(when);\n  }\n\n  async glue(glued: {[positive: number]: boolean}) {\n    const layout = await (await this.glueInteraction).force(glued);\n    (await this.viewer).refocus();\n    return layout;\n  }\n\n  @Ref(\"path\")\n  readonly _pathInteraction!: IPathInteraction;\n\n  get pathInteraction(): Promise<IPathInteraction> {\n    if (this.action !== \"path\")\n      throw Error(\"Cannot access path interaction when action is not set to 'path'.\");\n\n    return (async () => {\n      await this.viewer;\n\n      return this._pathInteraction;\n    })();\n  }\n\n  async path(when: \"now\" | \"completed\" | \"changed\") {\n    return await (await this.pathInteraction).query(when);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Widget.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Widget.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Widget.vue?vue&type=template&id=91510802&scoped=true&\"\nimport script from \"./Widget.vue?vue&type=script&lang=ts&\"\nexport * from \"./Widget.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Widget.vue?vue&type=style&index=0&id=91510802&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"91510802\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Ref, Vue, Watch } from \"vue-property-decorator\";\n\nimport YAML from \"yaml\";\nimport WidgetComponent from \"@/components/Widget.vue\";\nimport type { FlatTriangulationSchema } from \"@/flatsurf/FlatTriangulation\";\nimport type { FlowComponentSchema } from \"@/flatsurf/FlowComponent\";\nimport type { VerticalSchema } from \"@/flatsurf/Vertical\";\n\n@Component({\n  components: {\n    WidgetComponent,\n  },\n})\nexport default class Widget extends Vue {\n  showInnerEdges = true;\n  showOuterHalfEdges = true;\n\n  showOuterLabels = true;\n  showNumericLabels = false;\n\n  showFlowComponents = false;\n\n  showAnimations = true;\n\n  applyVertical = true;\n\n  actions = [\n    {text: \"None\", value: null},\n    {text: \"Change Layout\", value: \"glue\"},\n    {text: \"Draw Path\", value: \"path\"},\n  ]\n\n  action = \"glue\";\n\n  info = \"(none)\";\n\n  queries = [\"SVG\", \"Path\", \"Complete Path\", \"Path Change\", \"Layout\", \"Layout Change\", \"Glue\", \"Glue Change\", \"Force Gluing\"];\n\n  query = 'Path'\n\n  parameters = \"{1: true, 2: false}\"\n\n  get yaml() {\n    return YAML.parse(this.$store.state.raw);\n  }\n\n  get triangulation() {\n    const schema: FlatTriangulationSchema = {\n      vertices: this.yaml.vertices,\n      vectors: this.yaml.vectors,\n    };\n    return YAML.stringify(schema);\n  }\n\n  get flowComponents() {\n    if (!this.showFlowComponents)\n      return [];\n\n    const schema: FlowComponentSchema[] = this.yaml.components || [];\n\n    return schema.map((component) => YAML.stringify(component));\n  }\n\n  get vertical() {\n    if (this.yaml.vertical == null)\n      return null;\n\n    if (!this.applyVertical)\n      return null;\n\n    const schema: VerticalSchema = this.yaml.vertical;\n\n    return YAML.stringify(schema);\n  }\n\n  @Watch(\"query\", {immediate: true})\n  onQueryChanged() {\n    this.info = \"(none)\";\n  }\n\n  async performQuery() {\n    this.info = \"…\";\n\n    const query = (() => {\n      if (this.query === \"SVG\")\n        return this.widget.svg();\n      if (this.query === 'Path')\n        return this.widget.path(\"now\");\n      if (this.query === 'Complete Path')\n        return this.widget.path(\"completed\");\n      if (this.query === 'Path Change')\n        return this.widget.path(\"changed\");\n      if (this.query === 'Layout')\n        return this.widget.layout(\"now\");\n      if (this.query === \"Layout Change\")\n        return this.widget.layout(\"changed\");\n      if (this.query === \"Glue\")\n        return this.widget.glued(\"now\");\n      if (this.query === \"Glue Change\")\n        return this.widget.glued(\"changed\");\n      if (this.query === \"Force Gluing\")\n        return (async () => {\n          const glued = JSON.parse(this.parameters);\n          return await this.widget.glue(glued);\n        })();\n    })();\n\n    try {\n      const result = await query;\n      this.info = JSON.stringify(result);\n    } catch(e) {\n      this.info = e.message;\n    }\n  }\n\n  @Ref()\n  readonly widget!: WidgetComponent;\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Widget.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-39[0].rules[0].use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??clonedRuleSet-39[0].rules[0].use[2]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Widget.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Widget.vue?vue&type=template&id=10e52461&scoped=true&\"\nimport script from \"./Widget.vue?vue&type=script&lang=ts&\"\nexport * from \"./Widget.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Widget.vue?vue&type=style&index=0&id=10e52461&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"10e52461\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardText,VCardTitle,VCheckbox,VCol,VContainer,VRow,VSelect,VTextField})\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport type { Route } from \"vue-router\";\n\nimport Viewer from './Viewer.vue';\nimport ViewerMenu from './ViewerMenu.vue';\nimport Editor from './Editor.vue';\nimport EditorMenu from './EditorMenu.vue';\nimport Export from './Export.vue';\nimport Widget from './Widget.vue';\n\nimport castArray from \"lodash-es/castArray\";\n\nfunction viewerProps(route: Route) {\n  return {\n    action: route.query.action || \"glue\",\n    show: castArray(route.query.show || [\"outer\", \"outer-labels\", \"triangulation\"]),\n  };\n}\n\nfunction exportProps(route: Route) {\n  return {\n    action: \"view\",\n    show: castArray(route.query.show || [\"outer\", \"outer-labels\"]),\n  };\n}\n\nconst routes = [\n  { path: '/', redirect: '/view' },\n  { path: '/view', components: {\n      default: Viewer,\n      menu: ViewerMenu,\n    },\n    props: {\n      default: viewerProps,\n      menu: viewerProps,\n    },\n  },\n  { path: '/edit', components: {\n    default: Editor,\n    menu: EditorMenu,\n  }},\n  { path: '/svg', components: {\n      default: Export,\n    },\n    props: {\n      default: exportProps,\n    },\n  },\n  { path: '/widget', components: {\n      default: Widget,\n    },\n  },\n  { path: '*', redirect: '/view' },\n]\n\nexport default routes;\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport HalfEdge from \"./HalfEdge\";\n\ntype HalfEdgeMap = { [preimage: number]: HalfEdge };\n\nexport interface AutomorphismSchema {\n  halfEdges: HalfEdgeMap,\n};\n\n/*\n * An automorphism of a Flat Triangulation.\n */\nexport default class Automorphism {\n  public static parse(yaml: AutomorphismSchema): Automorphism {\n    return new Automorphism(yaml.halfEdges);\n  }\n\n  private constructor(halfEdges: HalfEdgeMap ) {\n    const set = (preimage: HalfEdge, image: HalfEdge) => {\n      if (halfEdges.hasOwnProperty(preimage))\n        console.assert(halfEdges[preimage] === image);\n      halfEdges[preimage] = image;\n    };\n\n    for (const [key, image] of Object.entries(halfEdges)) {\n      const preimage = Number(key);\n      set(-preimage, -image);\n      set(image, preimage);\n      set(-image, -preimage);\n    }\n\n    this.halfEdgeMap = halfEdges;\n  }\n\n  // The mapping of half edges under the automorphism.\n  // This mapping might not contain all half edges if the automorphism is only\n  // defined on the level of the Delaunay cells of the triangulation.\n  public readonly halfEdgeMap: HalfEdgeMap;\n}\n\n\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport type { StoreOptions } from \"vuex\";\nimport YAML from \"yaml\";\n\nimport FlatTriangulation from '@/flatsurf/FlatTriangulation';\nimport FlowComponent from '@/flatsurf/FlowComponent';\nimport Automorphism from '@/flatsurf/Automorphism';\nimport CoordinateSystem from '@/geometry/CoordinateSystem';\nimport Layout from \"@/layout/Layout\";\nimport Vertical from \"@/flatsurf/Vertical\";\n\nconst state = {\n  raw: \"\",\n  error: null as null | string,\n  triangulation: null as null | FlatTriangulation,\n  vertical: null as null | Vertical,\n  flowComponents: null as null | FlowComponent[],\n  automorphisms: null as null | Automorphism[],\n  layout: null as null | Layout,\n  coordinateSystem: new CoordinateSystem(true),\n};\n\nconst store: StoreOptions<typeof state> = {\n  state,\n  actions: {\n    reset: function({ commit, state }, payload: { raw: string }) {\n      try {\n        const parsed = YAML.parse(payload.raw);\n\n        const triangulation = FlatTriangulation.parse(parsed.triangulation || parsed, state.coordinateSystem);\n        const vertical = Vertical.parse(parsed.vertical || { x: 0, y: 1 }, state.coordinateSystem);\n        const flowComponents = (parsed.components || []).map((component: any) => FlowComponent.parse(component, state.coordinateSystem));\n        const automorphisms = (parsed.automorphisms || []).map((automorphism: any) => Automorphism.parse(automorphism));\n\n        commit('reset', {\n          raw: payload.raw,\n          triangulation,\n          vertical,\n          flowComponents,\n          automorphisms,\n        });\n      } catch (e) {\n        commit('error', {message: e.message});\n      }\n    },\n  },\n  mutations: {\n    layout: function(state, payload: {\n      layout: Layout\n    }) {\n      state.layout = payload.layout;\n    },\n\n    reset: function(state, payload: {\n      raw: string,\n      triangulation: FlatTriangulation,\n      vertical: Vertical,\n      flowComponents: FlowComponent[],\n      automorphisms: Automorphism[],\n    }) {\n      state.raw = payload.raw;\n      state.triangulation = payload.triangulation;\n      state.vertical = payload.vertical;\n      state.flowComponents = payload.flowComponents;\n      state.automorphisms = payload.automorphisms;\n      state.layout = null;\n      state.error = null;\n    },\n\n    error: function(state, payload: { message: string }) {\n      state.error = payload.message;\n    },\n  },\n};\n\nexport default store;\n","/* ******************************************************************************\n * Copyright (c) 2021 Julian Rüth <julian.rueth@fsfe.org>\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * *****************************************************************************/\n\nimport Vue, { VNode } from 'vue';\nimport App from './App.vue';\nimport Vuetify from 'vuetify/lib';\nimport VueRouter from 'vue-router'\nimport Vuex from 'vuex';\nimport AsyncComputed from \"vue-async-computed\";\nimport '@mdi/font/css/materialdesignicons.css'\n\nimport routes from \"./routes\";\nimport store from \"./store\";\n\nimport raw from \"!!raw-loader!./2-3-4.txt\";\n\nVue.config.productionTip = false;\n\nVue.use(Vuetify);\nVue.use(VueRouter);\nVue.use(Vuex);\nVue.use(AsyncComputed);\n\nnew Vue({\n    render: (h): VNode => h(App),\n    vuetify: new Vuetify({}),\n    router: new VueRouter({ routes }),\n    store: new Vuex.Store(store),\n    created() {\n      this.$store.dispatch(\"reset\", { raw });\n    }\n}).$mount('#app');\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) var result = runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkvue_flatsurf\"] = self[\"webpackChunkvue_flatsurf\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(8461); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"sourceRoot":""}